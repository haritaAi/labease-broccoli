(this.webpackJsonplabease=this.webpackJsonplabease||[]).push([[3],{1077:function(e,t){},1265:function(e,t,n){},1311:function(e,t,n){},1312:function(e,t,n){},1313:function(e,t,n){},1315:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(32),i=n.n(a),o=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,1535)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},s=n(11),l=n.n(s),d=n(17),j=n(6),u=n(61),b=n(27),f=n(20),h=n(5),x="http://31.220.48.122/api",O=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},m=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/resetpswd/").concat(t,"/").concat(n),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.status})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),p=(n(772),n.p+"static/media/logo-white.b9de9241.png"),v=n(155),g=n(0),y=function(e,t){return e.location.pathname===t?{color:"#0b8df7"}:{color:"#FFFFFF"}},w=Object(u.h)((function(e){var t=e.history,n=(e.path,Object(c.useState)(null)),r=Object(j.a)(n,2),a=(r[0],r[1],function(e){if("menu"===e)document.querySelector(".collapsible_menu").classList.toggle("collapsible_expanded");else if("user"===e){document.querySelector(".collapsible_user").classList.toggle("collapsible_expanded")}});return Object(g.jsxs)("div",{className:"menu container-fluid",children:[Object(g.jsx)("div",{className:"menu-left",children:Object(g.jsx)("div",{className:"logo-container",children:Object(g.jsx)("img",{className:"logo-img ",src:p})})}),Object(g.jsxs)("div",{className:"menu-left ",children:[Object(g.jsx)("div",{className:"user_list_container",children:Object(g.jsxs)("ul",{className:"nav-list",children:[Object(g.jsx)(c.Fragment,{children:Object(g.jsxs)("div",{className:"user-logo",children:[Object(g.jsx)("div",{className:"avatar",onClick:function(){return a("user")},children:Object(g.jsx)(v.a,{icon:"user",size:"1x",color:"#fff"})}),O()&&O().user.name&&Object(g.jsx)("div",{style:{color:"#FFFFFF"},className:"fs-4",children:O().user.name})]})}),Object(g.jsx)("div",{className:"collapsible_user",children:O()&&Object(g.jsx)(c.Fragment,{children:Object(g.jsx)("div",{className:"nav-link",style:{color:"#FFFFFF"},onClick:function(){!function(e){if("undefined"!==typeof window)localStorage.removeItem("jwt"),e(),fetch("".concat(x,"/signout"),{method:"GET"}).then((function(e){return e.status(200).json("Signed out successfully")})).catch((function(e){return e}))}((function(){t.push("/")}))},children:"Sign out"})})})]})}),Object(g.jsx)("div",{className:"menu_list_container",children:O()&&1===O().user.role&&Object(g.jsxs)(c.Fragment,{children:[Object(g.jsx)("div",{className:"nav__toggler mt-3",onClick:function(){return a("menu")},children:Object(g.jsx)(v.a,{icon:"bars",color:"#fff",size:"2x"})}),Object(g.jsxs)("ul",{className:"nav-list collapsible_menu",children:[Object(g.jsx)("li",{style:{color:"#FFFFFF"},children:Object(g.jsx)(b.b,{style:y(t,"/"),to:"/",className:"nav-link",children:"Home"})}),Object(g.jsx)("li",{style:{color:"#FFFFFF"},children:Object(g.jsx)(b.b,{style:y(t,"/client"),to:"/client",className:"nav-link",children:"Client"})}),Object(g.jsx)("li",{style:{color:"#FFFFFF"},children:Object(g.jsx)(b.b,{style:y(t,"/order"),to:"/order",className:"nav-link",children:"Order"})}),Object(g.jsx)("li",{style:{color:"#FFFFFF"},children:Object(g.jsx)(b.b,{style:y(t,"/products"),to:"/products",className:"nav-link",children:"Products"})}),Object(g.jsx)("li",{style:{color:"#FFFFFF"},children:Object(g.jsx)(b.b,{style:y(t,"/accounts"),className:"nav-link",to:"/accounts",children:"Accounts"})}),Object(g.jsx)("li",{style:{color:"#FFFFFF"},children:Object(g.jsx)(b.b,{style:y(t,"/settings"),className:"nav-link",to:"/settings",children:"Settings"})})]})]})})]})]})})),N=n(185),S=n(48);N.b.add(S.l,S.h,S.f,S.p,S.z,S.s,S.r,S.c,S.d,S.b,S.a,S.q,S.k,S.B,S.x,S.n,S.A,S.j,S.t,S.y,S.w,S.v,S.m,S.u,S.e,S.g,S.i,S.o);var C=function(e){return Object(g.jsx)("div",{className:"error mt-1",children:e.children})},D=function(){var e=Object(c.useState)({email:"",password:"",error:"",loading:!1,didRedirect:!1}),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),i=Object(j.a)(a,2),o=i[0],s=i[1],l=n.email,d=n.password,m=n.error,p=n.loading,v=n.didRedirect,y=function(e){return function(t){r(Object(h.a)(Object(h.a)({},n),{},Object(f.a)({error:!1},e,t.target.value)))}},N=function(e){var t;e.preventDefault(),r(Object(h.a)(Object(h.a)({},n),{},{error:!1,loading:!0})),(t={email:l,password:d},fetch("".concat(x,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){e.error?(r(Object(h.a)(Object(h.a)({},n),{},{error:e.error,loading:!1})),s(!0),setTimeout((function(){return s(!1)}),2e3)):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){r(Object(h.a)(Object(h.a)({},n),{},{didRedirect:!0,loading:!1}))}))})).catch((function(e){e&&(s(!0),setTimeout((function(){return s(!1)}),2e3)),r({error:e,loading:!1}),window.alert("Error singin in ..")}))};return Object(g.jsxs)("div",{children:[Object(g.jsx)(w,{}),p&&Object(g.jsx)("div",{className:"fs-3 text-center",children:"Loading..."}),m&&Object(g.jsx)("div",{className:"fs-3 text-center text-danger",children:"User name or password does not match"}),Object(g.jsxs)("div",{className:"container-signin fs-3",children:["Login",Object(g.jsxs)("form",{action:"",children:[Object(g.jsx)("div",{className:"form-group",children:Object(g.jsx)("input",{onChange:y("email"),value:l,className:"form-control",type:"text",placeholder:"Username"})}),Object(g.jsx)("div",{className:"form-group",children:Object(g.jsx)("input",{onChange:y("password"),value:d,className:"form-control",type:"password",placeholder:"password"})}),o&&Object(g.jsx)(C,{className:"text-danger",children:"email or password does not match"}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-end",children:[Object(g.jsx)("button",{onClick:N,className:"my-btn btn-rounded ",children:"Login"}),Object(g.jsx)(b.b,{to:"/reset-pswd",className:"  text-primary fs-4 paswd-link",children:"Forgot password "})]})]})]}),v||O()?Object(g.jsx)(u.a,{to:"/"}):void 0]})},k=n(149),T=n(277),P={name:"",email:"",password:""},A=T.a({name:T.b().required("Name is required").min(3),email:T.b().email("Invalid email format").required("Email is required"),password:T.b().required("password is required").min(5)}),E=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)({error:"",success:!1,didredirect:!1}),i=Object(j.a)(a,2),o=i[0],s=i[1],l=(o.error,o.success,o.didRedirect),d=function(e){s(Object(h.a)(Object(h.a)({},o),{},{error:!1})),console.log(" local submit button called : values are ::",e);var t,n=e.name,c=e.email,a=e.password;(t={name:n,email:c,password:a},fetch("".concat(x,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){console.log("Data recieved : ",e),e.error?(s(Object(h.a)(Object(h.a)({},o),{},{error:e.error,success:!1})),r(!0),setTimeout((function(){return r(!1)}),2e3)):(console.log("sign up successfu;;y"),s(Object(h.a)(Object(h.a)({},o),{},{error:"",success:!0,didRedirect:!0})))})).catch((function(e){console.log("error in signup"),r(!0),setTimeout((function(){return r(!1)}),2e3)}))};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(w,{}),Object(g.jsxs)("div",{className:"container-signin ",children:["Sign up",Object(g.jsx)(k.d,{initialValues:P,validationSchema:A,onSubmit:d,children:function(e){return Object(g.jsxs)(k.c,{children:[Object(g.jsx)("div",{className:"form-group ",children:Object(g.jsx)(k.b,{className:"form-control",name:"name",type:"text",placeholder:"Name"})}),Object(g.jsx)(k.a,{name:"name",component:C}),Object(g.jsx)("div",{className:"form-group",children:Object(g.jsx)(k.b,{className:"form-control",name:"email",type:"email",placeholder:"email"})}),Object(g.jsx)(k.a,{name:"email",component:C}),Object(g.jsx)("div",{className:"form-group",children:Object(g.jsx)(k.b,{className:"form-control",name:"password",type:"password",placeholder:"password"})}),Object(g.jsx)(k.a,{name:"password",component:C}),n&&Object(g.jsx)(C,{children:"Error in sign up"}),Object(g.jsx)("button",{className:"my-btn btn-rounded",onClick:function(){return d(e.values)},disabled:!e.isValid,children:"Submit"})]})}})]}),l||O()?Object(g.jsx)(u.a,{to:"/signin"}):void 0]})},I=(n(569),r.a.createContext());I.displayName="CompanyContext";var z=I,F=r.a.createContext();F.displayName="ClientContext";var R=F;var _=function(){var e=Object(c.useContext)(R),t=e.setClientSelected,n=e.setRedirect,r=Object(c.useContext)(z),a=(r.currentCompany,r.setCurrentCompany);return Object(c.useEffect)((function(){t(null),n(!1)}),[]),Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)(w,{}),Object(g.jsx)("div",{className:"",children:Object(g.jsx)("div",{className:" d-flex  flex-wrap   ",children:["Evoq Digital Dental Solutions","Evoq Dental Studio","Evoq Digital Dental Solutionss"].map((function(e,t){return Object(g.jsx)("div",{className:" border border-secondary ",children:Object(g.jsx)("div",{className:"d-flex flex-column flex-sm-row  company-container  company-background",onClick:function(){return console.log("Hi , this is ".concat(e))},children:Object(g.jsxs)("div",{className:"co-12 col-md-4 p-1",children:[Object(g.jsx)("h1",{className:"company-heading",children:e}),Object(g.jsx)("div",{children:Object(g.jsx)(b.b,{className:"btn btn-info fs-4 my-1",to:"/client/newClient",style:{width:120},onClick:function(){return a(t)},children:Object(g.jsx)("div",{children:"New Client"})})}),Object(g.jsx)("div",{children:Object(g.jsx)(b.b,{className:"btn btn-info fs-4 my-1",style:{width:120},to:"/order/neworder",children:Object(g.jsx)("div",{children:"New Order"})})}),Object(g.jsx)("div",{children:Object(g.jsx)(b.b,{className:"btn btn-info fs-4 my-1",style:{width:120},to:"/payment",children:Object(g.jsx)("div",{children:"New Payment"})})})]})})})}))})})]})},B=n(367),L=["component"],M=function(e){var t=e.component,n=Object(B.a)(e,L);return Object(g.jsx)(u.b,Object(h.a)(Object(h.a)({},n),{},{render:function(e){return O()&&1===O().user.role?Object(g.jsx)(t,Object(h.a)({},e)):Object(g.jsx)(u.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},U=r.a.createContext();U.displayName="OrderContext";var V=U,G=n(44),W=n.n(G),J=n(720),H=n.n(J),q=n(728),Y=n.n(q),K=n(721),X=n.n(K),Z=n(726),Q=n.n(Z),$=n(474),ee=n.n($),te=n(473),ne=n.n(te),ce=n(161),re=n.n(ce),ae=n(354),ie=n.n(ae),oe=n(723),se=n.n(oe),le=n(724),de=n.n(le),je=n(725),ue=n.n(je),be=n(729),fe=n.n(be),he=n(722),xe=n.n(he),Oe=n(727),me=n.n(Oe),pe=n(730),ve=n.n(pe),ge={Add:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(H.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Check:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(X.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Clear:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(ne.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Delete:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(re.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),DetailPanel:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(ee.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Edit:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(ie.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Export:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(xe.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Filter:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(se.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),FirstPage:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(de.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),LastPage:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(ue.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),NextPage:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(ee.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),PreviousPage:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(Q.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),ResetSearch:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(ne.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Search:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(me.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),SortArrow:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(Y.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(fe.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),ViewColumn:Object(c.forwardRef)((function(e,t){return Object(g.jsx)(ve.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))}))},ye=n(705),we=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/clients/create/").concat(t),{method:"POST",headers:{"content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Ne=function(e,t){return fetch("".concat(x,"/clients/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return e}))},Se=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/update/clients/").concat(t),{method:"PUT",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Ce=function(){return fetch("".concat(x,"/invoicecounter"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return e}))},De=function(){return fetch("".concat(x,"/adjustmentcounter"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return e}))},ke=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/orders/create/").concat(t),{method:"POST",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Te=function(e,t,n){return fetch("".concat(x,"/update/orders/").concat(e),{method:"PUT",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(n)}).then((function(e){return e})).catch((function(e){return e}))},Pe=function(e,t){return fetch("".concat(x,"/orders"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return e}))},Ae=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/producttypes/create/").concat(t),{method:"POST",headers:{"content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Ee=function(){return fetch("".concat(x,"/producttypes"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))},Ie=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/producttypes/update/").concat(t),{method:"PUT",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),ze=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/producttypes/delete/").concat(n),{method:"DELETE",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/products/").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(e){return e.json()})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Re=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/products/update/").concat(t),{method:"PUT",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),_e=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/products/delete/").concat(t),{method:"DELETE",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Be=function(){return fetch("".concat(x,"/category"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))},Le=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/invoices/create/").concat(t),{method:"POST",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Me=function(){return fetch("".concat(x,"/invoices"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))},Ue=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/update/invoices/").concat(t),{method:"PUT",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/invoices/unpaid"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/receipts"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),We=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/receipts/create/").concat(t),{method:"POST",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Je=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/receipt/update/").concat(t),{method:"PUT",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),He=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/adjustments/create/").concat(t),{method:"POST",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),qe=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/adjustments"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/adjustments/delete/").concat(t),{method:"DELETE",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/enclosures/create/").concat(t),{method:"POST",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/enclosures/update/").concat(t),{method:"PUT",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Ze=function(){return fetch("".concat(x,"/enclosures"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))},Qe=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/enclosures/delete/").concat(t),{method:"DELETE",headers:{Accept:"applicaiton/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),$e=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/priorities/create/").concat(t),{method:"POST",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),et=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/priorities/update/").concat(t),{method:"PUT",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),tt=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/priorities/delete/").concat(t),{method:"DELETE",headers:{Accept:"applicaiton/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),nt=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/clientcategories/create/").concat(t),{method:"POST",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),ct=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/clientcategories/update/").concat(t),{method:"PUT",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),rt=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/pricebands/create/").concat(t),{method:"POST",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),at=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/pricebands/update/").concat(t),{method:"PUT",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),it=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/pricebands/delete/").concat(t),{method:"DELETE",headers:{Accept:"applicaiton/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),ot=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/paymentmodes/create/").concat(t),{method:"POST",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),st=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/paymentmodes/update/").concat(t),{method:"PUT",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),lt=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/paymentmodes/delete/").concat(t),{method:"DELETE",headers:{Accept:"applicaiton/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),dt=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/upi/create/").concat(t),{method:"POST",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),jt=function(){var e=Object(d.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/upi/update/").concat(t),{method:"PUT",headers:{Accept:"application/json","content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),ut=r.a.createContext();ut.displayName="UserContext";var bt=ut,ft=n(588),ht=function(e){if(e){var t=new Date(e),n=t.getFullYear(),c=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][t.getMonth()],r=t.getDate();return"".concat(r," ").concat(c," ").concat(n)}},xt=function(e){if(e){var t=new Date(e),n=t.getFullYear(),c=t.getMonth()+1,r=t.getDate();return r<10&&(r="0"+r),c<10&&(c="0"+c),"".concat(n,"-").concat(c,"-").concat(r)}},Ot=function(e){var t=e.data,n=e.onUpdate,r=e.searchField,a=Object(c.useState)(0),i=Object(j.a)(a,2),o=i[0],s=i[1],l=Object(c.useState)({startDate:new Date,endDate:new Date}),d=Object(j.a)(l,2),u=d[0],b=d[1],x=function(e,c){var a=new Date(e).getTime(),i=new Date(c).getTime(),o=t.filter((function(e){return new Date(e[r]).getTime()>a&&new Date(e[r]).getTime()<i}));n(o)},O=function(e){return function(t){var n=t.target.value;if(b(Object(h.a)(Object(h.a)({},u),{},Object(f.a)({},e,n))),"startDate"===e){var c=new Date(new Date(n).getFullYear(),new Date(n).getMonth(),new Date(n).getDate()),r=u.endDate,a=new Date(new Date(r).getFullYear(),new Date(r).getMonth(),new Date(r).getDate()+1);x(c,a)}else if("endDate"===e){var i=u.startDate,o=new Date(new Date(i).getFullYear(),new Date(i).getMonth(),new Date(i).getDate()),s=new Date(new Date(n).getFullYear(),new Date(n).getMonth(),new Date(n).getDate()+1);x(o,s)}}};return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-4",children:"Search filters"}),Object(g.jsxs)("select",{onChange:function(e){var t=e.target.value,n=new Date,c=new Date,r=new Date;switch(t){case"0":c=new Date(n.getFullYear(),n.getMonth(),n.getDate()-7),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1),b({startDate:c,endDate:r}),x(c,r);break;case"1":c=new Date(n.getFullYear(),n.getMonth(),n.getDate()-10),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()-1),b({startDate:c,endDate:r}),x(c,r);break;case"2":c=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1),b({startDate:new Date}),x(c,r);break;case"3":c=new Date(n.getFullYear(),n.getMonth(),n.getDate()-2),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()-1),b({startDate:new Date(n.getFullYear(),n.getMonth(),n.getDate()-1)}),x(c,r);break;case"4":var a=n.getDay();c=new Date(n.getFullYear(),n.getMonth(),n.getDate()-a),r=new Date,b({startDate:c,endDate:r}),x(c,r);break;case"5":var i=new Date;i.setDate(1),r=new Date,b({startDate:i,endDate:r}),x(i,r);break;case"6":c=new Date(n.getFullYear(),n.getMonth(),n.getDate()-7),r=new Date,b({startDate:c,endDate:r}),x(c,r);break;case"7":c=new Date(n.getFullYear(),n.getMonth(),n.getDate()-(7-n.getDay())-6),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()-(7-n.getDay())),b({startDate:c,endDate:r}),x(c,r);break;case"8":var o=new Date(n.getFullYear(),n.getMonth()+1,0);c=new Date(n.getFullYear(),n.getMonth()-1,1),r=new Date(n.getFullYear(),n.getMonth()-1,o.getDate()-1),b({startDate:c,endDate:r}),x(c,r);break;case"9":var l=new Date(n.getFullYear(),n.getMonth(),n.getDate()-30),d=new Date(n.getFullYear(),n.getMonth(),n.getDate());b({startDate:l,endDate:d}),x(l,d);break;case"10":c=new Date(n.getFullYear(),0,1),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),b({startDate:c,endDate:r}),x(c,r);break;case"11":n.getMonth()>=3?(c=new Date(n.getFullYear(),3,1),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),b({startDate:c,endDate:r})):(c=new Date(n.getFullYear()-1,3,1),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),b({startDate:c,endDate:r})),x(c,r);break;case"12":c=new Date(n.getFullYear(),n.getMonth()-6,n.getDate()),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),b({startDate:c,endDate:r}),x(c,r);break;case"13":c=new Date(n.getFullYear()-1,n.getMonth(),n.getDate()),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),b({startDate:c,endDate:r}),x(c,r);break;case"14":var j=new Date;j.setDate(1),j.setMonth(0),j.setYear(2021),c=new Date(j),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()-1),b({startDate:c,endDate:r}),x(c,r);break;case"15":var u=new Date;u.setDate(1),u.setMonth(0),u.setYear(2021),c=new Date(u),b({endDate:new Date(n.getFullYear(),n.getMonth(),n.getDate())}),x(c,r);break;default:b({startDate:new Date,endDate:new Date}),x(c,r)}s(t)},className:"fs-4 ",children:[Object(g.jsx)("option",{value:0,children:"Custom"}),Object(g.jsx)("option",{value:1,children:"Recent"}),Object(g.jsx)("option",{value:2,children:"Today"}),Object(g.jsx)("option",{value:3,children:"yesterday"}),Object(g.jsx)("option",{value:4,children:"This Week from Sunday"}),Object(g.jsx)("option",{value:5,children:"Month To Date"}),Object(g.jsx)("option",{value:6,children:"Last 7 days"}),Object(g.jsx)("option",{value:7,children:"Last Full week"}),Object(g.jsx)("option",{value:8,children:"Last Full Month"}),Object(g.jsx)("option",{value:9,children:"Last 30 Days"}),Object(g.jsx)("option",{value:10,children:"Year To Date"}),Object(g.jsx)("option",{value:11,children:"Finacial Year To Date"}),Object(g.jsx)("option",{value:12,children:"Last 6 Months"}),Object(g.jsx)("option",{value:13,children:"Last 12 Months"}),Object(g.jsx)("option",{value:14,children:"All Dates to yesterday"}),Object(g.jsx)("option",{value:15,children:"All Dates to Today"})]}),o>=14&&Object(g.jsx)("div",{style:{display:"inline",marginLeft:"10px"},children:"Up To"}),Object(g.jsx)("input",{type:"date",className:"fs-4 mx-3",disabled:o>0,style:{display:o>=14?"none":"inline"},value:xt(u.startDate),onChange:O("startDate")}),Object(g.jsx)("input",{type:"date",className:"fs-4 mx-3",disabled:o>0,style:{display:o>1&&o<4?"none":"inline"},value:xt(u.endDate),onChange:O("endDate")})]})},mt=Object(ft.a)({root:{backgroundColor:"blue",color:"green"},toolbar:{backgroundColor:"white"},caption:{color:"black",fontSize:"20px"},selectIcon:{color:"blue",fontSize:"2rem"},select:{color:"blue",fontSize:"2rem"},actions:{color:"blue"},tableCell:{padding:"0px 3px"}}),pt=function(e){var t=mt(),n=Object(c.useContext)(V).setOrderSelected,r=Object(c.useContext)(R).setClientSelected,a=Object(c.useState)([]),i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)([]),f=Object(j.a)(u,2),x=(f[0],f[1]),O=Object(c.useState)([]),m=Object(j.a)(O,2),p=m[0],v=m[1],y=Object(c.useState)([]),w=Object(j.a)(y,2),N=w[0],S=w[1],C=Object(c.useContext)(bt),D=C.user,k=C.token,T=Object(c.useState)({error:"",loading:!1}),P=Object(j.a)(T,2),A=P[0],E=P[1],I=Object(c.useState)([]),z=Object(j.a)(I,2),F=z[0],_=z[1],B=Object(c.useState)(""),L=Object(j.a)(B,2),M=L[0],U=L[1],J=Object(c.useState)(!1),H=Object(j.a)(J,2),q=H[0],Y=H[1],K=Object(c.useState)("orderDate"),X=Object(j.a)(K,2),Z=X[0],Q=X[1],$=function(e){console.log("Updating assign To");var t=e.target.value,n=0;F.length>0?F.forEach((function(e){var c=Object(h.a)(Object(h.a)({},e),{},{status:t});Te(D._id,k,c).then((function(e){(n+=1)===F.length&&re()})).catch((function(e){U("Error while  updating status"),Y(!0),setTimeout((function(){return Y(!1)}),2e3),window.alert("Error while updating status")}))})):window.alert("Please Select Orders for updating status")},ee=function(e){var t=e.target.value;if(F.length>0){var n=0;F.forEach((function(e){var c=Object(h.a)(Object(h.a)({},e),{},{department:t});Te(D._id,k,c).then((function(e){(n+=1)===F.length&&re()})).catch((function(e){U("Error while  updating department"),Y(!0),setTimeout((function(){return Y(!1)}),2e3),window.alert("Error while Updating Department")}))}))}else window.alert("Please Select Orders for updating ")},te=function(e){if(F.length>0){var t=0;F.forEach((function(n){var c=Object(h.a)(Object(h.a)({},n),{},{assignedTo:e.target.value});Te(D._id,k,c).then((function(e){(t+=1)===F.length&&re()})).catch((function(e){U("Error while  updating staff assigned"),Y(!0),setTimeout((function(){return Y(!1)}),2e3),window.alert("Error while updating staff assigned")}))})),U("".concat(t," orders updated successfully")),Y(!0),setTimeout((function(){return Y(!1)}),2e3)}else window.alert("Please Select Orders for updating")},ne=function(e){var t=[];return e.forEach((function(e){return t.push("".concat(e.product,"-").concat(e.units))})),t.join()},ce=function(e){var t=e.target.value,n=[];"true"===t?(n=o.filter((function(e){return!0===e.isInvoiced})),S(n)):"false"===t?(n=o.filter((function(e){return!1===e.isInvoiced})),S(n)):S(o)};Object(c.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(null),E({loading:!0}),e.next=4,Ne(D._id,k);case 4:return t=e.sent,e.next=7,Pe(D._id,k);case 7:c=e.sent,x(t),s(c),v(c),S(c),E({loading:!1});case 13:case"end":return e.stop()}}),e)})))()}),[]);var re=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(D._id,k).then((function(e){e.error?(U("Error fetching data"),Y(!0),setTimeout((function(){return Y(!1)}),2e3)):s(e)})).catch((function(e){U("Error fetching data"),Y(!0),setTimeout((function(){return Y(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=[{title:"Order#",field:"orderNo",maxWidth:"7rem",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c",width:"3rem"},render:function(e){return Object(g.jsx)(b.b,{to:"/order/neworder",style:{textDecoration:"none"},onClick:function(){n(e)},children:e.orderNo})}},{title:"OrderDate",field:"orderDate",maxWidth:"11rem",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c",width:"5rem"},filtering:!1,render:function(e){return Object(g.jsx)("div",{children:e.orderDate&&Object(g.jsx)("div",{children:new Intl.DateTimeFormat("en-GB").format(new Date(e.orderDate))})})}},{title:"Client",field:"client",minWidth:"180px",defaultSort:"asc",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"},render:function(e){return Object(g.jsx)(b.b,{to:"/client/clientprofile",style:{textDecoration:"none"},className:t.tableCell,onClick:function(){return r(e.clientId)},children:e.client.toUpperCase()})}},{title:"Patient",field:"patient",maxWidth:"7rem",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"}},{titile:"Products",field:"products",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"},render:function(e){return Object(g.jsx)("div",{children:ne(e.products)})}},{title:"Value",field:"orderAmount",align:"left",maxWidth:"15rem",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"},type:"currency",currencySetting:{currencyCode:"INR"}},{title:"Status",field:"status",minWidth:"15rem",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"},render:function(e){return"Complete"===e.status?Object(g.jsx)("div",{style:{color:"#04910e"},children:e.status}):"Hold"===e.status?Object(g.jsx)("div",{style:{color:"#f20a0a",fontWeight:"bold"},children:e.status}):Object(g.jsx)("div",{style:{color:"#5c5c5c"},children:e.status})},lookup:{New:"NEW","In Production":"In Prodction",Complete:"COMPLETE",Hold:"HOLD","Try In":"Try In",Cancelled:"Cancelled"}},{title:"Due Date",field:"duedate",width:"7%",maxWidth:"11rem",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"},render:function(e){return e.duedate&&Object(g.jsx)("div",{children:new Date(e.duedate).toDateString()===(new Date).toDateString()?Object(g.jsx)("div",{style:{color:"red",fontWeight:"bold"},children:new Intl.DateTimeFormat("en-GB").format(new Date(e.duedate))}):Object(g.jsx)("div",{children:new Intl.DateTimeFormat("en-GB").format(new Date(e.duedate))})})}},{title:"Date In",foeld:"dateIn",width:"7%",maxWidth:"11rem",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"},render:function(e){return e.dateIn&&Object(g.jsx)("div",{children:new Intl.DateTimeFormat("en-GB").format(new Date(e.dateIn))})}}],ie=(A.error,A.loading);return Object(g.jsxs)("div",{className:"container",children:[Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{children:[ie&&Object(g.jsx)("div",{className:"fs-3 text-center text-secondary",children:"Loading..."}),Object(g.jsx)("div",{className:"fs-4",children:"Compare Date"}),Object(g.jsxs)("select",{className:"fs-4",onChange:function(e){Q(e.target.value)},children:[Object(g.jsx)("option",{value:"dueDate",children:"Final Delivery Due Date"}),Object(g.jsx)("option",{value:"orderDate",children:"Order Date"}),Object(g.jsx)("option",{value:"dateIn",children:"Date In"}),Object(g.jsx)("option",{value:"invoiceDate",children:"Invoice Date"}),Object(g.jsx)("option",{value:"tryinDate",children:"Schedule tryin Delivery Date"})]})]}),Object(g.jsx)(Ot,{data:p,onUpdate:function(e){S(e)},searchField:Z})]}),q&&Object(g.jsx)("div",{className:"fs-3 text-danger ",children:Object(g.jsx)("b",{children:M})}),Object(g.jsx)(W.a,{columns:ae,data:N,icons:ge,title:"Order Data",components:{Toolbar:function(e){return Object(g.jsxs)("div",{children:[Object(g.jsx)(G.MTableToolbar,Object(h.a)({},e)),Object(g.jsxs)("div",{style:{padding:"10px 0px"},children:[Object(g.jsxs)("select",{className:"bg-body border border-dark rounded outline-0 p-2 mx-3 col-6 col-sm-2 fs-4",name:"status",onChange:$,children:[Object(g.jsx)("option",{children:"Mark as"}),Object(g.jsx)("option",{value:"New",children:"New"}),Object(g.jsx)("option",{value:"In Production",children:"In Production"}),Object(g.jsx)("option",{value:"Complete",children:"Complete"}),Object(g.jsx)("option",{value:"Hold",children:"Hold"}),Object(g.jsx)("option",{value:"Try In",children:"Try In"}),Object(g.jsx)("option",{value:"Cancelled",children:"Cancelled"})]}),Object(g.jsxs)("select",{className:"bg-body border border-dark rounded outline-0 p-2 fs-4 mx-3 my-2 col-6 col-sm-2",onChange:ee,children:[Object(g.jsx)("option",{children:"Move To"}),Object(g.jsx)("option",{value:"OUTBOX",children:"OUTBOX"}),Object(g.jsx)("option",{value:"ACRYLIC",children:"ACRYLIC"}),Object(g.jsx)("option",{value:"ADMIN",children:"ADMIN"}),Object(g.jsx)("option",{value:"CAD CAM",children:"CAD CAM"}),Object(g.jsx)("option",{value:"METAL",children:"METAL"}),Object(g.jsx)("option",{value:"MOULD AND DIE",children:"MOULD AND DIE"}),Object(g.jsx)("option",{value:"ORTHODONTIC",children:"ORTHODONTIC"}),Object(g.jsx)("option",{value:"PICKUP AND DELIVERY",children:"PICKUP AND DELIVERY"}),Object(g.jsx)("option",{value:"PORCELAIN",children:"PORCELAIN"}),Object(g.jsx)("option",{value:"OUALITY",children:"OUALITY"}),Object(g.jsx)("option",{value:"WAX",children:"WAX"})]}),Object(g.jsxs)("select",{className:"bg-body border border-dark rounded outline-0 p-2 fs-4 mx-3 my-2 col-6 col-sm-2",onChange:te,children:[Object(g.jsx)("option",{children:"Assign To"}),Object(g.jsx)("option",{value:"BHARAT BHAI",children:"BHARAT BHAI"}),Object(g.jsx)("option",{value:"CHANDRAKANT BHAI",children:"CHANDRAKANT BHAI"}),Object(g.jsx)("option",{value:"Courier",children:"Courier"}),Object(g.jsx)("option",{value:"Dr DHAVAL THAKKAR",children:"Dr DHAVAL THAKKAR"}),Object(g.jsx)("option",{value:"JAGDISHBHAI",children:"JAGDISHBHAI"}),Object(g.jsx)("option",{value:"MOULD AND DIE",children:"MOULD AND DIE"}),Object(g.jsx)("option",{value:"MR.AJIT",children:"MR.AJIT"}),Object(g.jsx)("option",{value:"NAGIN BHAI",children:"NAGIN BHAI"}),Object(g.jsx)("option",{value:"R K",children:"R K"}),Object(g.jsx)("option",{value:"RAHUL TAPODHAN",children:"RAHUL TAPODHAN"}),Object(g.jsx)("option",{value:"RAKESH BHAI",children:"RAKESH BHAI"}),Object(g.jsx)("option",{value:"RATI KAKA",children:"RATI KAKA"}),Object(g.jsx)("option",{value:"UMIT DAVE",children:"UMIT DAVE"}),Object(g.jsx)("option",{value:"YOGESH BHAI",children:"YOGESH BHAI"})]}),Object(g.jsx)("div",{className:"btn btn-info fs-4 my-1 mx-3",onClick:function(){return S(o)},children:"All Orders"}),Object(g.jsx)("div",{className:"btn btn-info fs-4 my-1 mx-3",onClick:function(){return function(){var e=o.filter((function(e){return"repeat"===e.workType}));S(e)}()},children:"Repeat Orders"}),Object(g.jsx)("div",{className:"btn btn-info fs-4 my-1 mx-3",onClick:function(){return function(){var e=o.filter((function(e){return"repair"===e.workType}));S(e)}()},children:"Repair Orders"})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{children:"Invoice:"}),Object(g.jsxs)("select",{className:" border border-dark rounded outline-0 p-2 mx-3 my-1 col-1 fs-4",name:"invoice",onChange:ce,children:[Object(g.jsx)("option",{children:"All"}),Object(g.jsx)("option",{value:!0,children:"Invoiced"}),Object(g.jsx)("option",{value:!1,children:"Not Invoiced"})]})]})]})},Pagination:function(e){return Object(g.jsx)(ye.a,{component:"div",colSpan:e.colSpan,count:e.count,rowsPerPage:e.rowsPerPage,page:e.page,onChangePage:e.onChangePage,onChangeRowsPerPage:e.onChangeRowsPerPage,classes:{root:t.root,toolbar:t.toolbar,caption:t.caption,selectIcon:t.selectIcon,select:t.select,actions:t.actions}})}},onSelectionChange:function(e){_(e)},options:{filtering:!0,pageSize:25,padding:"dense",pageSizeOptions:[10,20,50,100],paginationType:"stepped",exportButton:!0,exportAllData:!0,exportFileName:"orderdata",columnsButton:!0,actionsCellStyle:{border:"1px solid #5c5c5c"},rowStyle:function(e,t){return t%2==0?{background:"#f2f2f2"}:null},selection:!0,showSelectAllCheckbox:!1,showTextRowsSelected:!1,headerStyle:{backgroundColor:"#01572b",color:"#FFF",fontSize:"1.5rem"},style:{fontSize:"1.5rem"}}})]})},vt=(n(599),function(e,t){if(e.location.pathname===t)return{backgroundColor:"#ADF6F8"}}),gt=Object(u.h)((function(e,t){return Object(g.jsx)(g.Fragment,{children:O()&&1===O().user.role&&Object(g.jsxs)("div",{className:"submenu-container bg-info text-white",children:[Object(g.jsx)("div",{style:vt(e,"/order"),children:Object(g.jsx)(b.b,{to:"/order",className:"px-3 nav-link",children:"Order"})}),Object(g.jsx)("div",{style:vt(e,"/order/neworder"),children:Object(g.jsx)(b.b,{to:"/order/neworder",className:"px-3 nav-link",children:"+New Order"})})]})})})),yt=(n(415),function(){var e=Object(c.useContext)(R).setClientSelected,t=Object(c.useContext)(V).setOrderSelected;return Object(c.useEffect)((function(){e(null),t(null)}),[]),Object(g.jsxs)("div",{children:[Object(g.jsx)(w,{}),Object(g.jsxs)("div",{className:"container ",children:[Object(g.jsx)(gt,{}),Object(g.jsx)("div",{className:" fs-3",children:Object(g.jsx)(pt,{})})]})]})}),wt=n(356),Nt=n.n(wt),St=n(576),Ct=n(71),Dt=n.n(Ct),kt=n(202),Tt=n.n(kt),Pt=Object(ft.a)({root:{backgroundColor:"blue",color:"green"},toolbar:{backgroundColor:"white"},caption:{color:"black",fontSize:"20px"},selectIcon:{color:"blue",fontSize:"2rem"},select:{color:"blue",fontSize:"2rem"},actions:{color:"blue"},tableCell:{padding:"0px 3px"}}),At=function(e){e.onEditClient;var t=e.onOrderClient,n=e.onPaymentClient,r=e.clients,a=Pt(),i=Object(c.useContext)(R).setClientSelected,o=[{title:"Name",field:"name",cellStyle:{fontSize:"1.6rem"},defaultSort:"asc",render:function(e){return Object(g.jsx)(b.b,{to:"/client/clientprofile",style:{textDecoration:"none"},onClick:function(){return i(e)},children:e.name.toUpperCase()})}},{title:"Code",field:"code",cellStyle:{fontSize:"1.6rem"},sorting:!1,render:function(e){return Object(g.jsx)(b.b,{style:{textDecoration:"none"},to:"/client/newclient",onClick:function(){return i(e)},children:e.code})}},{title:"office Phone",cellStyle:{fontSize:"1.6rem"},field:"phoneO"},{title:"Cell Phone",cellStyle:{fontSize:"1.6rem"},field:"phoneM"},{title:"City",field:"city",cellStyle:{fontSize:"1.6rem"}},{title:"Email",field:"emailPrimary",cellStyle:{fontSize:"1.6rem"}},{title:"",field:"",render:function(e){return Object(g.jsx)(b.b,{to:"/client/newClient",style:{textDecoration:"none",color:"#000"},onClick:function(){i(e)},children:Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Edit Client"}),children:Object(g.jsx)(Dt.a,{sx:{fontSize:24}})})})}}];return Object(g.jsx)("div",{children:Object(g.jsx)(W.a,{columns:o,data:r,icons:ge,title:"Client Data",components:{Pagination:function(e){return Object(g.jsx)(ye.a,{component:"component",colSpan:e.colSpan,count:e.count,rowsPerPage:e.rowsPerPage,page:e.page,onChangePage:e.onChangePage,onChangeRowsPerPage:e.onChangeRowsPerPage,classes:{root:a.root,toolbar:a.toolbar,caption:a.caption,selectIcon:a.selectIcon,select:a.select,actions:a.actions}})}},actions:[{icon:function(){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Create Order"}),children:Object(g.jsx)(Nt.a,{sx:{fontSize:30}})})},onClick:function(e,n){t(n)}},{icon:function(){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"New Payment"}),children:Object(g.jsx)(Tt.a,{sx:{fontSize:30}})})},onClick:function(e,t){n(t)}}],options:{filtering:!0,pageSize:50,pageSizeOptions:[10,20,50,100],paginationType:"stepped",exportAllData:!0,padding:"dense",exportFileName:"clientdata",addRowPosition:"first",actionsColumnIndex:6,columnsButton:!0,rowStyle:function(e,t){return t%2==0?{background:"#f2f2f2"}:null},headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontSize:"1.5rem"},style:{fontSize:"2rem"}}})})},Et=function(e,t){if(e.location.pathname===t)return{backgroundColor:"#ADF6F8"}},It=Object(u.h)((function(e){var t=e.history;e.path;return Object(g.jsx)(g.Fragment,{children:O()&&1===O().user.role&&Object(g.jsxs)("div",{className:"submenu-container bg-info ",children:[Object(g.jsx)("div",{style:Et(t,"/client"),children:Object(g.jsx)(b.b,{to:"/client",className:"px-3 nav-link",style:{color:"#000"},children:"Client"})}),Object(g.jsx)("div",{style:Et(t,"/client/newclient"),children:Object(g.jsx)(b.b,{to:"/client/newclient",className:"px-3 nav-link",style:{color:"#000"},children:"+New Client"})}),Object(g.jsx)("div",{style:Et(t,"/client/orders"),children:Object(g.jsx)(b.b,{to:"/client/orders",className:"px-3 nav-link",style:{color:"#000"},children:"Orders"})})]})})})),zt=function(){var e=Object(c.useState)({_id:"",name:"",email:"",address1:"",address2:"",loction:"",state:"",phoneO:"",phoneR:"",phoneM:"",error:"",loading:!1,formData:""}),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useContext)(bt),i=a.user,o=a.token,s=Object(c.useContext)(R),u=s.onClientSelect,b=s.setClientSelected,f=s.setPathRedirect,h=s.setRedirect,x=Object(c.useState)([]),O=Object(j.a)(x,2),m=O[0],p=O[1],v=n.error,y=n.loading,N=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({error:"",loading:!0}),e.next=3,Ne(i._id,o).then((function(e){e.error?(r({error:"Error fetching data",loading:!1}),window.alert("Failed to Connect to database ")):(p(e),r({error:"",loading:!1}))})).catch((function(e){r({error:e,loading:!1}),window.alert("Failed to Connect to database ")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){N(),b(null),h(!1)}),[]),Object(g.jsxs)("div",{children:[Object(g.jsx)(w,{}),Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)(It,{}),y&&Object(g.jsx)("div",{className:"fs-3 text-center text-secondary",children:"Loading..."}),v&&Object(g.jsxs)("div",{className:"fs-3 text-center text-danger",children:[v," "]}),Object(g.jsxs)("div",{className:"row  fs-4",children:[m.length>0&&Object(g.jsx)(At,{clients:m,onEditClient:function(e){f("/client/newclient"),u(e)},onOrderClient:function(e){f("/order/neworder"),u(e)},onPaymentClient:function(e){f("/payment"),u(e)}}),0===m.length&&Object(g.jsx)("div",{children:"No database available"})]})]})]})},Ft=n(19),Rt=function(e){var t=Object(c.useContext)(bt),n=t.user,r=t.token,a=Object(c.useState)(!1),i=Object(j.a)(a,2),o=i[0],s=(i[1],Object(c.useState)([])),u=Object(j.a)(s,2),b=u[0],x=u[1],O=Object(c.useState)({name:""}),m=Object(j.a)(O,2),p=m[0],v=m[1],y=function(e){return!(e.name.length<3)||(window.alert("Please enter valid enclosure Name"),!1)},w=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(n._id).then((function(e){e.error?window.alert("Error while fetching data"):x(e)})).catch((function(e){window.alert("Error while fetching data")}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){w()}),[o]);return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:" mx-3 my-2 ",children:Object(g.jsx)("h1",{children:Object(g.jsx)("b",{children:"Enclosures"})})}),Object(g.jsx)("div",{children:function(){return Object(g.jsxs)("form",{children:[Object(g.jsx)("div",{className:"w-25 d-inline-flex",children:Object(g.jsx)("input",{type:"text",className:"fs-4",value:p.name,onChange:(e="name",function(t){var n=t.target.value;v(Object(h.a)(Object(h.a)({},p),{},Object(f.a)({},e,n)))}),placeholder:"Type new Entry here"})}),Object(g.jsx)("div",{className:"btn btn-info fs-4 px-5 mx-3",onClick:function(){!function(){var e={name:p.name.trim()};y(e)&&Ke(n._id,r,e).then((function(e){e.error?window.alert("Error Fetching data"):(w(),v({name:""}))})).catch((function(e){window.alert("Error Fetching data")}))}()},children:"Add"})]});var e}()}),Object(g.jsx)("div",{className:"w-50 my-5",children:function(){var e=function(e){return function(n){t[e].tempName=n.target.value,x(t)}},t=Object(Ft.a)(b);return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-3",children:Object(g.jsx)("b",{children:"Available entries:"})}),t.length>0&&Object(g.jsx)("div",{style:{listStyleType:"none"},className:"",children:t.map((function(c,a){return Object(g.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-evenly border border-dark border-bottom  ",children:[Object(g.jsx)("div",{className:"fs-4 ",children:a+1}),Object(g.jsx)("input",{type:"text",style:{outlineWidth:"none",border:"none"},className:"fs-4  d-block px-2",value:c.update?c.tempName:c.name,onChange:e(a),onClick:function(){c.update=!0,x(t),c.tempName=c.name}},c._id),c.update&&Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"btn btn-info fs-5",onClick:function(){c.update=!1,x(t),function(e){var t={name:e.tempName.trim(),_id:e._id};y(t)&&Xe(n._id,r,t).then((function(e){e.error?window.alert("Error while fetching data"):Ze()})).catch((function(e){window.alert("Error while fetching data")}))}(c)},children:"Ok"}),Object(g.jsx)("div",{className:"btn btn-info fs-5 mx-2",onClick:function(){c.update=!1,x(t)},children:"Cancel"})]}),Object(g.jsx)("div",{className:"btn btn-outline-danger my-1 fs-5",onClick:function(){return function(e){Qe(n._id,r,e).then((function(e){w()})).catch()}(c)},children:"Delete"})]})}))})]})}()})]})},_t=function(e){var t=Object(c.useContext)(bt),n=t.user,r=t.token,a=Object(c.useState)([]),i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)({name:""}),b=Object(j.a)(u,2),O=b[0],m=b[1],p=function(e){return!(e.name.length<3)||(window.alert("Please enter valid enclosure Name"),!1)},v=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n._id,fetch("".concat(x,"/priorities"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))).then((function(e){e.error?window.alert("Error while fetching data"):s(e)})).catch((function(e){window.alert("Error while fetching data")}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){v()}),[]);return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:" mx-3 my-2 ",children:Object(g.jsx)("h1",{children:Object(g.jsx)("b",{children:"Priorities"})})}),Object(g.jsx)("div",{children:function(){return Object(g.jsxs)("form",{children:[Object(g.jsx)("div",{className:"w-25 d-inline-flex",children:Object(g.jsx)("input",{type:"text",className:"fs-4",value:O.name,onChange:(e="name",function(t){var n=t.target.value;m(Object(h.a)(Object(h.a)({},O),{},Object(f.a)({},e,n)))}),placeholder:"Type new Entry here"})}),Object(g.jsx)("div",{className:"btn btn-info fs-4 px-5 mx-3",onClick:function(){!function(){var e={name:O.name.trim()};p(e)&&$e(n._id,r,e).then((function(e){e.error?window.alert("Error Fetching data"):(v(),m({name:""}))})).catch((function(e){window.alert("Error Fetching data")}))}()},children:"Add"})]});var e}()}),Object(g.jsx)("div",{className:"w-50 my-5",children:function(){var e=function(e){return function(n){t[e].tempName=n.target.value,s(t)}},t=Object(Ft.a)(o);return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-3",children:Object(g.jsx)("b",{children:"Available entries:"})}),t.length>0&&Object(g.jsx)("div",{style:{listStyleType:"none"},className:"",children:t.map((function(c,a){return Object(g.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-evenly border border-dark border-bottom  ",children:[Object(g.jsx)("div",{className:"fs-4 ",children:a+1}),Object(g.jsx)("input",{type:"text",style:{outlineWidth:"none",border:"none"},className:"fs-4  d-block px-2",value:c.update?c.tempName:c.name,onChange:e(a),onClick:function(){c.update=!0,s(t),c.tempName=c.name}},c._id),c.update&&Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"btn btn-info fs-5",onClick:function(){c.update=!1,s(t),function(e){var t={name:e.tempName.trim(),_id:e._id};p(t)&&et(n._id,r,t).then((function(e){e.error?window.alert("Error while fetching data"):v()})).catch((function(e){window.alert("Error while fetching data")}))}(c)},children:"Ok"}),Object(g.jsx)("div",{className:"btn btn-info fs-5 mx-2",onClick:function(){c.update=!1,s(t)},children:"Cancel"})]}),Object(g.jsx)("div",{className:"btn btn-outline-danger my-1 fs-5",onClick:function(){return function(e){tt(n._id,r,e).then((function(e){v()})).catch()}(c)},children:"Delete"})]})}))})]})}()})]})},Bt=(n(227),n(118)),Lt=n.n(Bt),Mt=(n(935),n(475),n.p+"static/media/logo-print.361f394b.jpg"),Ut=n(15),Vt=Ut.StyleSheet.create({container:{height:150,flexDirection:"row",maxHeight:"120px",fontWeight:"light",fontSize:12,margin:"10 2",justifyContent:"space-between"},leftSection:{width:"70%",flexDirection:"row",justifyContent:"flex-start",overflow:"wrap"},rigthSection:{width:"30%",justifyContent:"flex-start",textAlign:"right",fontSize:14,paddingTop:10},imageContainer:{width:"10%"},image:{height:"60%"},title:{paddingTop:5,fontSize:20,fontWeigth:900},textStyle:{fontSize:14,paddingRight:100,fontWeight:300}});var Gt=function(e){var t=e.client,n="",c="",r="",a="";return 1===t.company?(n="Evoq Digital Dental Solutions",c="804,Venus Atlantis Corporate Park, 100Ft. Rd, Nr. Shell Petrol Pump, Prahaladnagar Ahmedabad-380054",r="evoqdds@gmail.com",a="079-48910770"):2===t.company?(n="Evoq Digital Dental Solutions2",c="804,Venus Atlantis Corporate Park, 100Ft. Rd, Nr. Shell Petrol Pump, Prahaladnagar Ahmedabad-380054",r="evoqdds@gmail.com2",a="079-48910770"):3===t.company?(n="Evoq Digital Dental Solutions3",c="804,Venus Atlantis Corporate Park, 100Ft. Rd, Nr. Shell Petrol Pump, Prahaladnagar Ahmedabad-380054",r="evoqdds@gmail.com3",a="079-48910770"):(n="Evoq Digital Dental Solutions",c="804,Venus Atlantis Corporate Park, 100Ft. Rd, Nr. Shell Petrol Pump, Prahaladnagar Ahmedabad-380054",r="evoqdds@gmail.com",a="079-48910770"),Object(g.jsxs)(Ut.View,{style:Vt.container,children:[Object(g.jsxs)(Ut.View,{style:Vt.leftSection,children:[Object(g.jsx)(Ut.Image,{style:Vt.image,src:Mt}),Object(g.jsxs)(Ut.View,{style:{paddingLeft:10},children:[Object(g.jsx)(Ut.Text,{style:Vt.title,children:n}),Object(g.jsx)(Ut.Text,{style:Vt.textStyle,children:c})]})]}),Object(g.jsxs)(Ut.View,{style:Vt.rigthSection,children:[Object(g.jsxs)(Ut.Text,{children:["contact :  (O)",a]}),Object(g.jsx)(Ut.Text,{children:r})]})]})},Wt=Ut.StyleSheet.create({heading1:{fontSize:"14px",alignItems:"center"}}),Jt=function(e){return Object(g.jsxs)(Ut.View,{style:Wt.heading1,children:[Object(g.jsx)(Ut.Text,{children:Object(g.jsx)("b",{children:"BILL OF SUPPLY"})}),Object(g.jsx)(Ut.Text,{children:"COMPOSITION TAXABLE PERSON"}),Object(g.jsx)(Ut.Text,{children:"NOT ELIGIBLE TO COLLECT TAX ON SUPPLIES"})]})},Ht=Ut.StyleSheet.create({tableContainer:{flexDirection:"row"},tableHeaders:{flexDirection:"row",fontSize:12,fontWeight:"ultrabold",borderBottom:"1px solid #000"},tableRow:{flexDirection:"row",fontSize:12,fontWeight:400,borderBottom:"1px solid #000",minHeight:20,alignContent:"center"},tableCell:{border:"1px solid #000",width:"fit-content"},cell1:{padding:2,textAlign:"center",borderRight:"1px solid #000",flexBasis:0,flexGrow:.2},cellOrderDate:{padding:2,textAlign:"left",borderRight:"1px solid #000",flexBasis:0,flexGrow:.8,fontSize:10},cellPatient:{padding:2,borderRight:"1px solid #000",flexBasis:0,flexGrow:1},cellListRate:{padding:2,borderRight:"1px solid #000",flexBasis:0,flexGrow:.8},cellOrderNo:{padding:2,borderRight:"1px solid #000",flexBasis:0,flexGrow:.8},cellProduct:{padding:2,borderRight:"1px solid #000",flexBasis:0,flexGrow:2},cellTeeth:{borderRight:"1px solid #000",textAlign:"center",flexBasis:0,flexGrow:2,flexDirection:"column"},cellUnits:{padding:2,borderRight:"1px solid #000",flexBasis:0,flexGrow:.5},cellRateUnits:{padding:2,borderRight:"1px solid #000",flexBasis:0,flexGrow:.6},cellDiscount:{padding:2,borderRight:"1px solid #000",flexBasis:0,flexGrow:.6},cellTotalAmount:{padding:2,flexBasis:0,flexGrow:1,textAlign:"right"},archLeft:{flexBasis:0,flexGrow:2,textAlign:"right",borderRight:"1px solid black",fontSize:12},archRight:{flexBasis:0,flexGrow:2,textAlign:"left",fontSize:12},archUp:{flexDirection:"row",flexBasis:0,flexGrow:1,height:"50%"},archDown:{flexDirection:"row",flexBasis:0,flexGrow:1,height:"50%",borderTop:"1px solid #000"},cell:{flexBasis:0,flexGrow:1,flexDirection:"row"}}),qt=function(e){return Object(g.jsxs)(Ut.View,{style:Ht.tableHeaders,children:[Object(g.jsxs)(Ut.View,{style:Ht.cell,children:[Object(g.jsx)(Ut.Text,{style:Ht.cell1,children:"#"}),Object(g.jsx)(Ut.Text,{style:[Ht.cellOrderDate,{fontSize:12}],children:"Order Date"}),Object(g.jsx)(Ut.Text,{style:Ht.cellPatient,children:"Patient"}),Object(g.jsx)(Ut.Text,{style:Ht.cellListRate,children:"List rate"}),Object(g.jsx)(Ut.Text,{style:Ht.cellOrderNo,children:"Order #"}),Object(g.jsx)(Ut.Text,{style:Ht.cellProduct,children:"Product"})]}),Object(g.jsxs)(Ut.View,{style:Ht.cell,children:[Object(g.jsx)(Ut.Text,{style:Ht.cellTeeth,children:"Teeth"}),Object(g.jsx)(Ut.Text,{style:Ht.cellUnits,children:"Units"}),Object(g.jsx)(Ut.Text,{style:Ht.cellRateUnits,children:"Rate /unit"}),Object(g.jsx)(Ut.Text,{style:Ht.cellDiscount,children:"Disc."}),Object(g.jsx)(Ut.Text,{style:Ht.cellTotalAmount,children:"Total Amount"})]})]})},Yt=(Ut.StyleSheet.create({cell:{flexDirection:"row",borderBottom:"1px solid #000"},arch:{flexBasis:0,flexGrow:1,borderRight:"1px solid #000"}}),function(e){var t=e.ordersList.map((function(e,t){return Object(g.jsxs)(Ut.View,{style:Ht.tableRow,children:[Object(g.jsxs)(Ut.View,{style:Ht.cell,children:[Object(g.jsx)(Ut.Text,{style:Ht.cell1,children:t}),Object(g.jsx)(Ut.Text,{style:Ht.cellOrderDate,children:ht(e.orderDate)}),Object(g.jsx)(Ut.Text,{style:Ht.cellPatient,children:e.patient}),Object(g.jsx)(Ut.Text,{style:Ht.cellListRate,children:e.orderAmount}),Object(g.jsx)(Ut.Text,{style:[Ht.cellOrderNo,{fontSize:10}],children:e.orderNo}),Object(g.jsx)(Ut.Text,{style:[Ht.cellProduct,{fontSize:10}],children:e.productsList})]}),Object(g.jsxs)(Ut.View,{style:Ht.cell,children:[Object(g.jsxs)(Ut.View,{style:Ht.cellTeeth,children:[Object(g.jsxs)(Ut.View,{style:Ht.archUp,children:[Object(g.jsx)(Ut.Text,{style:Ht.archLeft,children:e.teethList[1]}),Object(g.jsx)(Ut.Text,{style:Ht.archRight,children:e.teethList[2]})]}),Object(g.jsxs)(Ut.View,{style:Ht.archDown,children:[Object(g.jsx)(Ut.Text,{style:Ht.archLeft,children:e.teethList[3]}),Object(g.jsx)(Ut.Text,{style:Ht.archRight,children:e.teethList[4]})]})]}),Object(g.jsx)(Ut.Text,{style:Ht.cellUnits,children:e.units}),Object(g.jsx)(Ut.Text,{style:Ht.cellRateUnits}),Object(g.jsx)(Ut.Text,{style:Ht.cellDiscount,children:e.discount}),Object(g.jsx)(Ut.Text,{style:Ht.cellTotalAmount,children:e.orderAmount})]})]},e._id)}));return Object(g.jsx)(c.Fragment,{children:t})}),Kt=Ut.StyleSheet.create({total:{flexBasis:0,flexGrow:9,borderRight:"1px solid #000",textAlign:"right",paddingRight:30},cellUnits:{flexBasis:0,flexGrow:.8,borderRight:"1px solid #000"},cellRateUnits:{flexBasis:0,flexGrow:.8,borderRight:"1px solid #000"},cellDiscount:{flexBasis:0,flexGrow:.8,borderRight:"1px solid #000",textAlign:"right"},cellTotalAmount:{flexBasis:0,flexGrow:1.25,textAlign:"right"}}),Xt=function(e){var t=e.invoiceTotal,n=e.units,c=e.disc;return Object(g.jsx)(Ut.View,{style:{fontWeight:800},children:Object(g.jsxs)(Ut.View,{style:Ht.tableRow,children:[Object(g.jsx)(Ut.Text,{style:Kt.total,children:"Total : "}),Object(g.jsx)(Ut.Text,{style:Kt.cellUnits,children:n}),Object(g.jsx)(Ut.Text,{style:Kt.cellRateUnits}),Object(g.jsx)(Ut.Text,{style:Kt.cellDiscount,children:c}),Object(g.jsx)(Ut.Text,{style:Kt.cellTotalAmount,children:t})]})})},Zt=Ut.StyleSheet.create({cellLeft:{flexBasis:0,flexGrow:1,borderRight:"1px solid #000",alignContent:"center"},cellRight:{flexBasis:0,flexGrow:1,flexDirection:"column"},celllower:{flexBasis:0,flexGrow:1,flexDirection:"row"}}),Qt=function(e){var t=e.state,n=e.taxrate,c=e.taxAmount,r=e.amount;return Object(g.jsxs)(Ut.View,{style:[Ht.tableRow,{minHeight:35}],children:[Object(g.jsx)(Ut.View,{style:Zt.cellLeft,children:Object(g.jsxs)(Ut.Text,{children:["State : ",t.toUpperCase()]})}),Object(g.jsxs)(Ut.View,{style:Zt.cellRight,children:[Object(g.jsxs)(Ut.View,{style:[Zt.celllower,{borderBottom:"1px solid #000"}],children:[Object(g.jsxs)(Ut.Text,{style:{flexBasis:0,flexGrow:1,textAlign:"right"},children:["GST @ ",n]}),Object(g.jsxs)(Ut.Text,{style:{flexBasis:0,flexGrow:1,textAlign:"right"},children:[c," "]})]}),Object(g.jsxs)(Ut.View,{style:{flexBasis:0,flexGrow:1,flexDirection:"row"},children:[Object(g.jsx)(Ut.Text,{style:{flexBasis:0,flexGrow:1,textAlign:"right"},children:"Invoice Total"}),Object(g.jsx)(Ut.Text,{style:{flexBasis:0,flexGrow:1,textAlign:"right"},children:r})]})]})]})},$t=n(357),en=(Ut.StyleSheet.create({}),function(e){var t=e.grandTotal,n=e.amount,c=new $t.ToWords({localeCode:"en-IN",converterOptions:{currency:!0,ignoreDecimal:!1,ignoreZeroCurrency:!1,doNotAddOnly:!1}}).convert(t,{currency:!0});return Object(g.jsxs)(Ut.View,{style:[Ht.tableRow,{fontWeight:900}],children:[Object(g.jsx)(Ut.View,{style:{flexBasis:0,flexGrow:4,alignContent:"stretch"},children:Object(g.jsxs)(Ut.Text,{children:["Grand Total : Rs. ",c]})}),Object(g.jsx)(Ut.View,{style:{flexBasis:0,flexGrow:1},children:Object(g.jsxs)(Ut.Text,{children:["Rs.",n]})})]})});Ut.StyleSheet.create({});var tn=function(e){var t=e.invoice;return Object(g.jsxs)(Ut.View,{children:[Object(g.jsx)(qt,{}),Object(g.jsx)(Yt,{ordersList:t.ordersList}),Object(g.jsx)(Xt,{invoiceTotal:t.amount,units:t.totalunits,disc:t.discount}),Object(g.jsx)(Qt,{state:"Gujarat",taxrate:"0.0",taxAmount:"0",amount:t.amount}),Object(g.jsx)(en,{grandTotal:t.amount,amount:t.amount})]})},nn=Ut.StyleSheet.create({container:{flex:1},heading:{flexDirection:"row",justifyContent:"space-between",fontSize:14,padding:2},tableContainer:{borderLeft:"1px solid #000",borderRight:"1px solid #000",borderTop:"1px solid #000",marginTop:2}}),cn=function(e){var t=e.invoice,n=Object(c.useState)([t.ordersList]),r=Object(j.a)(n,2),a=(r[0],r[1]),i=Object(c.useState)(Object(h.a)({},t.clientDetail)),o=Object(j.a)(i,2),s=o[0],u=o[1],b=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(a(t.ordersList),u(t.clientDetail));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){b()}),[]),Object(g.jsx)(Ut.View,{style:nn.container,children:t&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(Ut.View,{style:nn.heading,children:[Object(g.jsxs)(Ut.Text,{children:[s.salutation,t.client]}),Object(g.jsxs)(Ut.View,{style:{alignItems:"flex-end"},children:[Object(g.jsxs)(Ut.Text,{style:{paddingBottom:5,textAlign:"right"},children:["Invoice#: ",t.invoiceNo]}),Object(g.jsxs)(Ut.Text,{style:{paddingBottom:5},children:["Date : ",new Date(t.invoiceDate).toDateString()]})]})]}),Object(g.jsx)(Ut.View,{style:nn.tableContainer,children:Object(g.jsx)(tn,{invoice:t})})]})})},rn=Ut.StyleSheet.create({container:{flex:1,justifyContent:"flex-start",fontSize:10,fontWeight:300,marginTop:100}}),an=function(e){var t=e.client,n="";return n=(1===t.company||2===t.company||t.company,"GSTIN:24AJSPT8576H1ZA"),Object(g.jsx)(Ut.View,{style:rn.container,children:Object(g.jsx)(Ut.Text,{children:n})})},on=Ut.StyleSheet.create({page:{flexDirection:"row",backgroundColor:"#fff",color:"#000"},section:{margin:10,padding:15,flexGrow:1},heading1:{textAlign:"center",fontSize:"14px"},fontStyle:{font:"Times New Roman",fontWeight:"bold"},image:{width:"10%"}}),sn=function(e){var t=e.invoice;return Object(g.jsx)(Ut.Document,{children:Object(g.jsx)(Ut.Page,{size:"A4",style:on.page,children:Object(g.jsxs)(Ut.View,{style:on.section,children:[Object(g.jsx)(Jt,{}),Object(g.jsx)(Gt,{client:t.clientDetail}),Object(g.jsx)(cn,{invoice:t}),Object(g.jsx)(an,{client:t.clientDetail})]})})})},ln=function(e){void 0!==typeof window&&localStorage.setItem("invoice",JSON.stringify(e))},dn=Ut.StyleSheet.create({page:{flexDirection:"row",backgroundColor:"#E4E4E4",width:"100%",height:"100vh"},section:{margin:10,padding:10,flexGrow:1}}),jn=function(e){var t=Object(c.useState)(null),n=Object(j.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){var e=function(){var e={};if(void 0!==typeof window)return e=JSON.parse(localStorage.getItem("invoice")),localStorage.removeItem("invoice"),e}();e&&a(e)}),[]),Object(g.jsx)(Ut.PDFViewer,{style:dn.page,children:r&&Object(g.jsx)(sn,{invoice:r})})};var un=function(e){return Object(g.jsx)("div",{children:"Print Settings"})},bn=function(e){var t=Object(c.useContext)(bt),n=t.user,r=t.token,a=Object(c.useState)([]),i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)({name:""}),b=Object(j.a)(u,2),O=b[0],m=b[1],p=function(e){return!(e.name.length<3)||(window.alert("Please enter valid enclosure Name"),!1)},v=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n._id,fetch("".concat(x,"/clientcategories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))).then((function(e){e.error?window.alert("Error while fetching data"):s(e)})).catch((function(e){window.alert("Error while fetching data")}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){v()}),[]);return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:" mx-3 my-2 ",children:Object(g.jsx)("h1",{children:Object(g.jsx)("b",{children:"Categories"})})}),Object(g.jsx)("div",{children:function(){return Object(g.jsxs)("form",{children:[Object(g.jsx)("div",{className:"w-25 d-inline-flex",children:Object(g.jsx)("input",{type:"text",className:"fs-4",value:O.name,onChange:(e="name",function(t){var n=t.target.value;m(Object(h.a)(Object(h.a)({},O),{},Object(f.a)({},e,n)))}),placeholder:"Type new Entry here"})}),Object(g.jsx)("div",{className:"btn btn-info fs-4 px-5 mx-3",onClick:function(){!function(){var e={name:O.name.trim()};p(e)&&nt(n._id,r,e).then((function(e){e.error?window.alert("Error Fetching data"):(v(),m({name:""}))})).catch((function(e){window.alert("Error Fetching data")}))}()},children:"Add"})]});var e}()}),Object(g.jsx)("div",{className:"w-50 my-5",children:function(){var e=function(e){return function(n){t[e].tempName=n.target.value,s(t)}},t=Object(Ft.a)(o);return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-3",children:Object(g.jsx)("b",{children:"Available entries:"})}),t.length>0&&Object(g.jsx)("div",{style:{listStyleType:"none"},className:"",children:t.map((function(c,a){return Object(g.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-evenly border border-dark border-bottom  ",children:[Object(g.jsx)("div",{className:"fs-4 ",children:a+1}),Object(g.jsx)("input",{type:"text",style:{outlineWidth:"none",border:"none"},className:"fs-4  d-block px-2",value:c.update?c.tempName:c.name,onChange:e(a),onClick:function(){c.update=!0,s(t),c.tempName=c.name}},c._id),c.update&&Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"btn btn-info fs-5",onClick:function(){c.update=!1,s(t),function(e){var t={name:e.tempName.trim(),_id:e._id};p(t)&&ct(n._id,r,t).then((function(e){e.error?window.alert("Error while fetching data"):v()})).catch((function(e){window.alert("Error while fetching data")}))}(c)},children:"Ok"}),Object(g.jsx)("div",{className:"btn btn-info fs-5 mx-2",onClick:function(){c.update=!1,s(t)},children:"Cancel"})]}),Object(g.jsx)("div",{className:"btn btn-outline-danger my-1 fs-5",children:"Delete"})]})}))})]})}()})]})},fn=function(e){var t=Object(c.useContext)(bt),n=t.user,r=t.token,a=Object(c.useState)(!1),i=Object(j.a)(a,2),o=(i[0],i[1],Object(c.useState)([])),s=Object(j.a)(o,2),u=s[0],b=s[1],O=Object(c.useState)({name:""}),m=Object(j.a)(O,2),p=m[0],v=m[1],y=function(e){return!(e.name.length<3)||(window.alert("Please enter valid enclosure Name"),!1)},w=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n._id,fetch("".concat(x,"/pricebands"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))).then((function(e){e.error?window.alert("Error while fetching data"):b(e)})).catch((function(e){window.alert("Error while fetching data")}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){w()}),[]);return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:" mx-3 my-2 ",children:Object(g.jsx)("h1",{children:Object(g.jsx)("b",{children:"Price Bands"})})}),Object(g.jsx)("div",{children:function(){return Object(g.jsxs)("form",{children:[Object(g.jsx)("div",{className:"w-25 d-inline-flex",children:Object(g.jsx)("input",{type:"text",className:"fs-4",value:p.name,onChange:(e="name",function(t){var n=t.target.value;v(Object(h.a)(Object(h.a)({},p),{},Object(f.a)({},e,n)))}),placeholder:"Type new Entry here"})}),Object(g.jsx)("div",{className:"btn btn-info fs-4 px-5 mx-3",onClick:function(){!function(){var e={name:p.name.trim()};y(e)&&rt(n._id,r,e).then((function(e){e.error?window.alert("Error Fetching data"):(w(),v({name:""}))})).catch((function(e){window.alert("Error Fetching data")}))}()},children:"Add"})]});var e}()}),Object(g.jsx)("div",{className:"w-50 my-5",children:function(){var e=function(e){return function(n){t[e].tempName=n.target.value,b(t)}},t=Object(Ft.a)(u);return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-3",children:Object(g.jsx)("b",{children:"Available entries:"})}),t.length>0&&Object(g.jsx)("div",{style:{listStyleType:"none"},className:"",children:t.map((function(c,a){return Object(g.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-evenly border border-dark border-bottom  ",children:[Object(g.jsx)("div",{className:"fs-4 ",children:a+1}),Object(g.jsx)("input",{type:"text",style:{outlineWidth:"none",border:"none"},className:"fs-4  d-block px-2",value:c.update?c.tempName:c.name,onChange:e(a),onClick:function(){c.update=!0,b(t),c.tempName=c.name}},c._id),c.update&&Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"btn btn-info fs-5",onClick:function(){c.update=!1,b(t),function(e){var t={name:e.tempName.trim(),_id:e._id};y(t)&&at(n._id,r,t).then((function(e){e.error?window.alert("Error while fetching data"):w()})).catch((function(e){window.alert("Error while fetching data")}))}(c)},children:"Ok"}),Object(g.jsx)("div",{className:"btn btn-info fs-5 mx-2",onClick:function(){c.update=!1,b(t)},children:"Cancel"})]}),Object(g.jsx)("div",{className:"btn btn-outline-danger my-1 fs-5",onClick:function(){return e=c,console.log("Priceband received for deletion :",e),void it(n._id,r,e).then((function(e){w()})).catch();var e},children:"Delete"})]})}))})]})}()})]})},hn=n(1388),xn=n(738),On=n.n(xn),mn=function(e){var t=Object(c.useContext)(bt),n=t.user,r=t.token,a=Object(c.useState)(!1),i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)([]),b=Object(j.a)(u,2),O=b[0],m=b[1],p=Object(c.useState)({vpa:"",name:""}),v=Object(j.a)(p,2),y=v[0],w=v[1],N=Object(c.useState)(null),S=Object(j.a)(N,2),C=S[0],D=S[1],k=Object(c.useState)(!1),T=Object(j.a)(k,2),P=T[0],A=T[1],E=Object(c.useState)(null),I=Object(j.a)(E,2),z=I[0],F=I[1],R=Boolean(z),_=R?"simple-popover":void 0,B=Object(c.useState)({description:"",type:"",relAc:"",relAcAccess:""}),L=Object(j.a)(B,2),M=L[0],U=L[1],V=function(e){return function(t){var n=t.target.value;console.log("".concat(e," : ").concat(n)),U(Object(h.a)(Object(h.a)({},M),{},Object(f.a)({},e,n)))}},G=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n._id,fetch("".concat(x,"/paymentmodes"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))).then((function(e){e.error?window.alert("Error while fetching data"):m(e)})).catch((function(e){window.alert("Error while fetching data")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(h.a)(Object(h.a)({},M),{},{_id:C._id});console.log("Values to be updated"),e.description.length<3&&(window.alert("Please enter valid Payment Mode Name"),1)||st(n._id,r,e).then((function(e){e.error?window.alert("Error while fetching data"):(G(),s(!1),U({description:"",type:"",relAc:"",relAcAccess:""}))})).catch((function(e){window.alert("Error while fetching data")}))},J=function(e){return function(t){var n=t.target.value;w(Object(h.a)(Object(h.a)({},y),{},Object(f.a)({},e,n)))}},H=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n._id,fetch("".concat(x,"/upi"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))).then((function(e){w(e[0])})).catch((function(e){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){G(),H()}),[o]);var q=function(){F(null)};return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-2 fw-bold",children:"Payment Modes"}),Object(g.jsxs)("div",{className:"d-flex flex-row ",children:[Object(g.jsx)("div",{className:"btn btn-info fs-4 px-3",onClick:function(){A(!0)},children:"+Add New"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"btn btn-info fs-4 mx-5",onClick:function(e){F(e.currentTarget)},children:"UPI Pay Settings"}),Object(g.jsx)(hn.a,{open:R,id:_,anchorEl:z,onClose:q,anchorOrigin:{verticle:"top",horizontal:"left"},children:Object(g.jsxs)("div",{className:"fs-4 border border-secondary rounded",children:[Object(g.jsxs)("div",{className:" bg-info p-3 fs-3 fw-bold d-flex  flex-row justify-content-between",children:[Object(g.jsx)("div",{children:" UPI Pay Settings"}),Object(g.jsx)("div",{className:"btn btn-secondary",onClick:q,children:Object(g.jsx)(On.a,{sx:{fontSize:25}})})]}),Object(g.jsxs)("div",{className:"row  p-3",children:[Object(g.jsxs)("div",{className:"col",children:[Object(g.jsx)("div",{children:"Payee VPA"}),Object(g.jsx)("input",{type:"text",value:y.vpa,onChange:J("vpa")})]}),Object(g.jsxs)("div",{className:"col",children:[Object(g.jsx)("div",{children:"Payee Name"}),Object(g.jsx)("input",{type:"text",value:y.name,onChange:J("name")})]})]}),Object(g.jsxs)("div",{className:"d-flex p-3",children:[Object(g.jsx)("div",{className:"btn btn-info fs-4 px-3",onClick:function(){y.vpa.length>0&&y.name.length>0?y._id?jt(n._id,r,y).then((function(e){e.error?window.alert("Error Fetching data"):(H(),q(),w({vpa:"",name:""}))})).catch((function(e){window.alert("Error Fetching data")})):dt(n._id,r,y).then((function(e){e.error?window.alert("Error Fetching data"):(H(),q(),w({vpa:"",name:""}))})).catch((function(e){window.alert("Error Fetching data")})):0===y.vpa.length?window.alert("Please enter valid VPA"):0===y.name.length&&window.alert("Please enter valid Payee Name")},children:"OK"}),Object(g.jsx)("div",{className:"btn btn-info fs-4 mx-5",onClick:q,children:"Cancel"})]})]})})]})]}),(o||P)&&Object(g.jsx)("div",{children:Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-4",children:"Description"}),Object(g.jsx)("input",{type:"text",className:"fs-4",value:M.description,onChange:V("description")})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-4",children:"Type"}),Object(g.jsxs)("select",{className:"fs-4",value:M.type,onChange:V("type"),children:[Object(g.jsx)("option",{}),Object(g.jsx)("option",{value:"Cash",children:"Cash"}),Object(g.jsx)("option",{value:"Cheque",children:"Cheque"}),Object(g.jsx)("option",{value:"CreditCard",children:"CreditCard"}),Object(g.jsx)("option",{value:"NetBanking",children:"NetBanking"})]})]}),Object(g.jsxs)("div",{className:"fs-4",children:[Object(g.jsx)("div",{children:"Related Account"}),Object(g.jsxs)("select",{className:"fs-4",value:M.relAc,onChange:V("relAc"),children:[Object(g.jsx)("option",{}),Object(g.jsx)("option",{value:"Bank a/c",children:"Bank a/c"}),Object(g.jsx)("option",{value:"Cash Account",children:"Cash Account"})]})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-4",children:"Related Account Access"}),Object(g.jsxs)("select",{className:"fs-4",value:M.relAcAccess,onChange:V("relAcAccess"),children:[Object(g.jsx)("option",{}),Object(g.jsx)("option",{value:"Edit",children:"Edit"}),Object(g.jsx)("option",{value:"ReadOnly",children:"ReadOnly"}),Object(g.jsx)("option",{value:"Hide",children:"Hide"})]})]}),Object(g.jsxs)("div",{className:"d-flex  my-3",children:[Object(g.jsx)("div",{className:"fs-4 btn btn-info px-4",onClick:function(){o?W():function(){var e=Object(h.a)({},M);ot(n._id,r,e).then((function(e){e.error?window.alert("Error Fetching data"):(G(),A(!1),U({description:"",type:"",relAc:"",relAcAccess:""}))})).catch((function(e){window.alert("Error Fetching data")}))}()},children:"Save"}),Object(g.jsx)("div",{className:"fs-4 btn btn-info mx-5",onClick:function(){A(!1),s(!1),U({description:"",type:"",relAc:"",relAcAccess:""})},children:"Cancel"})]})]})}),Object(g.jsx)("div",{className:"w-50 my-5",children:Object(g.jsx)("div",{children:!o&&Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-3",children:Object(g.jsx)("b",{children:"Available entries:"})}),O.length>0&&Object(g.jsx)("div",{style:{listStyleType:"none"},className:"",children:O.map((function(e,t){return Object(g.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-evenly border border-dark ",children:[Object(g.jsx)("div",{className:"fs-4 ",children:t+1}),Object(g.jsx)("div",{className:"fs-4  d-block px-2 col-7",children:e.description},e._id),Object(g.jsx)("div",{className:"btn btn-info fs-5 col-2",onClick:function(){U(e),D(e),s(!0)},children:"Edit"}),Object(g.jsx)("div",{className:"btn btn-outline-danger my-1 fs-5 col-2",onClick:function(){return function(e){lt(n._id,r,e).then((function(e){e.error?window.alert("Error while fetching data"):G(e)})).catch((function(e){window.alert("Error while fetching data")}))}(e)},children:"Delete"})]})}))})]})})})]})},pn=function(e){var t=Object(c.useState)(0),n=Object(j.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(0),o=Object(j.a)(i,2),s=o[0],l=o[1],d=function(){return Object(g.jsxs)("div",{className:"d-flex flex-row",children:[Object(g.jsx)("div",{className:"fs-4  btn btn-info  ",style:1===s&&1===r?{backgroundColor:"#0b8df7"}:null,onClick:function(){a(1),l(1)},children:"Enclosure"}),Object(g.jsx)("div",{className:"fs-4  btn btn-info  mx-2",style:2===s&&1===r?{backgroundColor:"#0b8df7"}:null,onClick:function(){a(1),l(2)},children:"Priorities"}),Object(g.jsx)("div",{className:"fs-4  btn btn-info   mx-2",style:3===s&&1===r?{backgroundColor:"#0b8df7"}:null,onClick:function(){a(1),l(3)},children:"Tax Options"})]})},u=function(){return Object(g.jsxs)("div",{className:"d-flex flex-row",children:[Object(g.jsx)("div",{className:"fs-4  btn btn-info  ",style:1===s&&2===r?{backgroundColor:"#0b8df7"}:null,onClick:function(){a(2),l(1)},children:"Categories"}),Object(g.jsx)("div",{className:"fs-4  btn btn-info   mx-2",style:2===s&&2===r?{backgroundColor:"#0b8df7"}:null,onClick:function(){a(2),l(2)},children:"Price Bands"}),Object(g.jsx)("div",{className:"fs-4  btn btn-info   mx-2",style:3===s&&2===r?{backgroundColor:"#0b8df7"}:null,onClick:function(){a(2),l(3)},children:"Payment Modes"})]})};return Object(c.useEffect)((function(){a(0),l(0)}),[]),Object(g.jsxs)("div",{children:[Object(g.jsx)(w,{}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-2",children:Object(g.jsxs)("div",{className:"container-fluid d-flex flex-column justify-content-start",children:[Object(g.jsx)("div",{className:" btn btn-info  fs-4 my-2",style:1===r?{backgroundColor:"#0b8df7"}:null,onClick:function(){a(1),l(1)},children:"Orders"}),Object(g.jsx)("div",{className:"btn btn-info  fs-4 my-2 ",style:2===r?{backgroundColor:"#0b8df7"}:null,onClick:function(){a(2),l(1)},children:"Clients"})]})}),Object(g.jsxs)("div",{className:"col-10 d-flex flex-column",children:[0===r&&0===s&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"my-2 mx-2",children:d()}),Object(g.jsx)("div",{className:"my-2 mx-2",children:u()})]}),r>0&&s>0&&Object(g.jsxs)(g.Fragment,{children:[1===r&&Object(g.jsxs)("div",{className:"my-2",children:[Object(g.jsx)("div",{children:d()}),1===s&&Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Rt,{})}),2===s&&Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(_t,{})})]}),2===r&&Object(g.jsxs)("div",{className:"my-2",children:[Object(g.jsx)("div",{children:u()}),1===s&&Object(g.jsx)(bn,{}),2===s&&Object(g.jsx)(fn,{}),3===s&&Object(g.jsx)(mn,{})]})]})]})]}),Object(g.jsx)("div",{children:3===r&&Object(g.jsx)(un,{currentTab:s})})]})},vn=function(e){var t=Object(c.useState)({email:""}),n=Object(j.a)(t,2),r=n[0],a=n[1],i=function(){var e;(e=r,fetch("".concat(x,"/resetpswd"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return 400===e.status&&window.alert("this email does not exist"),e.json({error:"error"})})).catch((function(e){return console.log("Error :",e),e}))).then((function(e){window.alert("Please check email")})).catch((function(e){return console.log(e)}))};return Object(c.useEffect)((function(){}),[]),Object(g.jsx)("div",{className:"container-reset",children:Object(g.jsxs)("div",{className:"container-signin",children:[Object(g.jsx)("h3",{className:"text-dark fs-2 text-center",children:"Password Reset"}),Object(g.jsx)("div",{children:"Send Reset Link on : "}),"\xa0                     ",Object(g.jsx)("div",{className:"text-dark",children:"Email"}),Object(g.jsx)("input",{type:"email",className:"w-75",onChange:function(e){e.preventDefault(),a({email:e.target.value})}}),Object(g.jsx)("button",{className:"btn btn-primary my-2  w-50 fs-4",onClick:function(){return i()},children:"Send"})]})})},gn=r.a.createContext();gn.displayName="ProductContext";var yn=gn,wn=r.a.createContext();wn.displayName="InvoiceContext";var Nn=wn,Sn=r.a.createContext();Sn.displayName="ReceiptContext";var Cn=Sn,Dn=(n(1265),function(e){var t=e.index,n=e.onSelectTooth,c=e.state;return Object(g.jsx)("div",{children:Object(g.jsx)("button",{className:"btn-tooth",style:c?{backgroundColor:"#0694d1",border:"2px solid #000"}:{backgroundColor:"#aaacad"},onClick:function(e){e.preventDefault(),n(t)},children:t})})}),kn=function(e){var t=e.selectorClass,n=e.division,c=e.handleSelectTooth,r=e.selectedTeeth;return Object(g.jsx)("div",{className:"d-flex + m-2 + ".concat(t),division:n,children:r.map((function(e){return Object(g.jsx)(Dn,{index:e.index,state:e.state,onSelectTooth:function(e){return c(e,n)}},100*Math.random(1e3)+n)}))})},Tn=function(e){var t=e.jobs,n=[{index:"1",state:!1},{index:"2",state:!1},{index:"3",state:!1},{index:"4",state:!1},{index:"5",state:!1},{index:"6",state:!1},{index:"7",state:!1},{index:"8",state:!1}],c=[{index:"1",state:!1},{index:"2",state:!1},{index:"3",state:!1},{index:"4",state:!1},{index:"5",state:!1},{index:"6",state:!1},{index:"7",state:!1},{index:"8",state:!1}],r=[{index:"1",state:!1},{index:"2",state:!1},{index:"3",state:!1},{index:"4",state:!1},{index:"5",state:!1},{index:"6",state:!1},{index:"7",state:!1},{index:"8",state:!1}],a=[{index:"1",state:!1},{index:"2",state:!1},{index:"3",state:!1},{index:"4",state:!1},{index:"5",state:!1},{index:"6",state:!1},{index:"7",state:!1},{index:"8",state:!1}],i=function(e){return e.slice(0,1)},o=function(e,t){if("1"===t){var i=n.findIndex((function(t){return t.index===e}));n[i].state=!0}else if("2"===t){var o=c.findIndex((function(t){return t.index===e}));c[o].state=!0}else if("3"===t){var s=r.findIndex((function(t){return t.index===e}));r[s].state=!0}else if("4"===t){var l=a.findIndex((function(t){return t.index===e}));a[l].state=!0}};return Object(g.jsxs)("div",{children:[void(t.length>0&&t.forEach((function(e){var t=Object(Ft.a)(e.teethSelected);if(t.length>0)for(var n=0;n<t.length;n++){var c=t[n].slice(1),r=i(t[n]);o(c,r)}}))),Object(g.jsx)("div",{className:"tooth-container  ",children:Object(g.jsxs)("div",{className:" border border-dark  px-2 toothSelector ",children:[Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)(kn,{selectorClass:"flex-md-row-reverse",division:1,selectedTeeth:n}),Object(g.jsx)("span",{className:"divider-vt"}),Object(g.jsxs)("span",{children:[" ",Object(g.jsx)(kn,{division:2,selectedTeeth:c})," "]})]}),Object(g.jsx)("div",{className:"divider-hz "}),Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)(kn,{selectorClass:"flex-row-reverse",division:4,selectedTeeth:a}),Object(g.jsx)("span",{className:"divider-vt"}),Object(g.jsxs)("span",{children:[" ",Object(g.jsx)(kn,{division:3,selectedTeeth:r})," "]})]})]})})]})},Pn=n(1397),An=n(1390),En=n(1392),In=function(e){var t=e.title,n=e.option1,c=e.option2,a=e.option3,i=e.onSelectOption,o=r.a.useState(null),s=Object(j.a)(o,2),l=s[0],d=s[1],u=Boolean(l),b=function(e){d(null),i(e)};return Object(g.jsxs)("div",{children:[Object(g.jsx)(Pn.a,{className:"fs-5 text-white",id:"demo-positioned-button","aria-controls":"demo-positioned-menu","aria-haspopup":"true","aria-expanded":u?"true":void 0,onClick:function(e){d(e.currentTarget)},children:t}),Object(g.jsxs)(An.a,{id:"demo-positioned-menu","aria-labelledby":"demo-positioned-button",anchorEl:l,open:u,onClose:b,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[Object(g.jsx)(En.a,{style:{color:"#5c5c5c",fontSize:"1.5rem"},onClick:function(){return b(n)},children:n}),Object(g.jsx)(En.a,{style:{color:"#5c5c5c",fontSize:"1.5rem"},onClick:function(){return b(c)},children:c}),Object(g.jsx)(En.a,{style:{color:"#5c5c5c",fontSize:"1.5rem"},onClick:function(){return b(a)},children:a})]})]})};var zn=function(e){var t=e.onProductSelection,n=Object(c.useContext)(yn).products;return Object(g.jsx)("div",{className:"w-75 m-auto  ",style:{zIndex:"10"},children:Object(g.jsx)(W.a,{columns:[{title:"Name",field:"name",cellStyle:{fontSize:"1.8rem"},defaultSort:"asc"},{title:"Type",field:"productType.name",cellStyle:{fontSize:"1.8rem"}},{title:"Price",field:"price",cellStyle:{fontSize:"1.8rem"}}],data:n,icons:ge,title:"Products",onRowClick:function(e,n){t(n)},options:{filtering:!0,pageSizeOptions:[5,10,20,50,100],padding:"dense",paginationType:"stepped",headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontSize:"2rem",position:"relative",zIndex:"0"}}})})},Fn=function(e){var t=e.job,n=(e.onAddOrderCancel,e.onJobSave),r=e.onEditJob,a=Object(c.useState)(null),i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)([]),b=Object(j.a)(u,2),x=b[0],O=b[1],m=Object(c.useState)(!1),p=Object(j.a)(m,2),v=p[0],y=p[1],w=Object(c.useContext)(yn).products,N=Object(c.useState)(!1),S=Object(j.a)(N,2),C=(S[0],S[1]),D=Object(c.useState)(),k=Object(j.a)(D,2),T=(k[0],k[1],Object(c.useState)([])),P=Object(j.a)(T,2),A=P[0],E=P[1],I=Object(c.useState)({id:0,discount:0,discount_type:"a",price:0,product:"",total:0,type:"",units:0,slab1End:0,slab1Price:0,slab2End:0,slab2Price:0,slab3Price:0}),z=Object(j.a)(I,2),F=z[0],R=z[1],_=Object(c.useState)([{index:"1",state:!1},{index:"2",state:!1},{index:"3",state:!1},{index:"4",state:!1},{index:"5",state:!1},{index:"6",state:!1},{index:"7",state:!1},{index:"8",state:!1}]),B=Object(j.a)(_,2),L=B[0],M=B[1],U=Object(c.useState)([{index:"1",state:!1},{index:"2",state:!1},{index:"3",state:!1},{index:"4",state:!1},{index:"5",state:!1},{index:"6",state:!1},{index:"7",state:!1},{index:"8",state:!1}]),V=Object(j.a)(U,2),G=V[0],W=V[1],J=Object(c.useState)([{index:"1",state:!1},{index:"2",state:!1},{index:"3",state:!1},{index:"4",state:!1},{index:"5",state:!1},{index:"6",state:!1},{index:"7",state:!1},{index:"8",state:!1}]),H=Object(j.a)(J,2),q=H[0],Y=H[1],K=Object(c.useState)([{index:"1",state:!1},{index:"2",state:!1},{index:"3",state:!1},{index:"4",state:!1},{index:"5",state:!1},{index:"6",state:!1},{index:"7",state:!1},{index:"8",state:!1}]),X=Object(j.a)(K,2),Z=X[0],Q=X[1],$=F.slab1End,ee=F.slab1Price,te=F.slab2End,ne=F.slab2Price,ce=F.slab3Price,re=function(e,t,n){E(e?function(e){return[].concat(Object(Ft.a)(e),["".concat(t).concat(n)])}:A.filter((function(e){return e!=="".concat(t).concat(n)})))},ae=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee();case 2:t=e.sent,O(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e;ae(),t&&(y(!0),E(t.teethSelected),se(),R(Object(h.a)({},t)),s((e=t.productId,w.filter((function(t){return t._id===e}))[0])))}),[v]);var ie=function(e){return e.slice(0,1)},oe=function(e,t){if("1"===t){console.log("INside upperArch1n");var n=L.findIndex((function(t){return t.index===e})),c=Object(Ft.a)(L);c[n].state=!0,M(c)}else if("2"===t){var r=G.findIndex((function(t){return t.index===e})),a=Object(Ft.a)(G);a[r].state=!0,W(a)}else if("3"===t){var i=q.findIndex((function(t){return t.index===e})),o=Object(Ft.a)(q);o[i].state=!0,Y(o)}else if("4"===t){var s=Z.findIndex((function(t){return t.index===e})),l=Object(Ft.a)(Z);l[s].state=!0,Q(l)}},se=function(){if(console.log("TEETH  SELECTED IN GETARCH",A),A.length>0){var e=Object(Ft.a)(t.teethSelected);if(e.length>0)for(var n=0;n<e.length;n++){var c=e[n].slice(1),r=ie(e[n]);oe(c,r)}}},le=function(e,t){var n,c;1===t?(n=L.findIndex((function(t){return t.index===e})),(c=Object(Ft.a)(L))[n].state=!c[n].state,re(c[n].state,t,e),M(c)):2===t?(n=G.findIndex((function(t){return t.index===e})),(c=Object(Ft.a)(G))[n].state=!c[n].state,re(c[n].state,t,e),W(c)):3===t?(n=q.findIndex((function(t){return t.index===e})),(c=Object(Ft.a)(q))[n].state=!c[n].state,re(c[n].state,t,e),Y(c)):4===t&&(n=Z.findIndex((function(t){return t.index===e})),(c=Object(Ft.a)(Z))[n].state=!c[n].state,re(c[n].state,t,e),Q(c))},de=function(e){var t;console.log("In handleToothReset",e),"None"===e?((t=Object(Ft.a)(L)).forEach((function(e){return e.state=!1})),M(t),(t=Object(Ft.a)(G)).forEach((function(e){return e.state=!1})),W(t),(t=Object(Ft.a)(q)).forEach((function(e){return e.state=!1})),Y(t),(t=Object(Ft.a)(Z)).forEach((function(e){return e.state=!1})),Q(Z),E([])):"Upper Arch"===e?((t=Object(Ft.a)(L)).forEach((function(e){return e.state=!0})),M(t),(t=Object(Ft.a)(G)).forEach((function(e){return e.state=!0})),W(t),E((function(e){return[].concat(Object(Ft.a)(e),["11","12","13","14","15","16","17","18","21","22","23","24","25","26","27","28"])}))):"Lower Arch"===e&&((t=Object(Ft.a)(q)).forEach((function(e){return e.state=!0})),Y(t),(t=Object(Ft.a)(Z)).forEach((function(e){return e.state=!0})),Q(Z),E((function(e){return[].concat(Object(Ft.a)(e),["41","42","43","44","45","46","47","48","31","32","33","34","35","36","37","38"])})))},je=function(){s(null)},ue=function(e){return function(t){t.preventDefault(),R(Object(h.a)(Object(h.a)({},F),{},Object(f.a)({},e,t.target.value)))}},be=function(){console.log("JOB ID IN EDIT ",t.id);var e=x.filter((function(e){return e.name===o.productType.name})),n={id:t.id,units:A.length,price:o.price,product:o.name,type:o.productType.name,productTypeCategory:e[0].category.name,productId:o._id,discount:F.discount,discount_type:F.discount_type,total:he(),slab1End:$,slab1Price:ee,slab2End:te,slab2Price:ne,slab3Price:ce,teethSelected:A};console.log("NEW JOB TO BE SAVED IS :",n),r(n),R({id:0,units:0,price:0,discount:0,total:0,discount_type:"a",product:"",category:"",productId:"",type:"",slab1End:0,slab1Price:0,slab2End:0,slab2Price:0,slab3Price:0}),de("None"),s(null)},fe=function(){var e=x.filter((function(e){return e.name===o.productType.name}));console.log("Details of product type selected :",e[0]);var t={units:A.length,price:o.price,product:o.name,type:o.productType.name,productTypeCategory:e[0].category.name,productId:o._id,discount:F.discount,discount_type:F.discount_type,total:he(),slab1End:$,slab1Price:ee,slab2End:te,slab2Price:ne,slab3Price:ce,teethSelected:A};n(t),R({id:0,units:0,price:0,discount:0,total:0,discount_type:"a",product:"",category:"",productId:"",type:"",slab1End:0,slab1Price:0,slab2End:0,slab2Price:0,slab3Price:0}),de("None"),s(null)},he=function(){console.log("Product SELECTED :::::",o);var e=0;if(o.slabPrice){console.log("SlabPrice true");for(var t=A.length,n=0;n<$&&n<t;)e+=parseInt(ee),n++,console.log("Amount:",e);if(te)for(;n<te&&n<t;)e+=parseInt(ne),n++,console.log("Amount:",e);if(n<t)for(;n<t;)e+=parseInt(ce),n++}else e=o.price*A.length;var c=F.discount;return"p"===F.discount_type&&(c=F.discount*e/100),e-c};return Object(g.jsxs)("div",{className:"container ",children:[o&&Object(g.jsxs)(g.Fragment,{children:["     ",Object(g.jsxs)("div",{className:"tooth-container",children:[Object(g.jsxs)("div",{className:"d-flex justify-content-between lh-1",children:[Object(g.jsx)("div",{children:o.product_type}),Object(g.jsx)("div",{children:o.productTypeCategory}),Object(g.jsxs)("div",{className:"d-inline-flex ",children:[Object(g.jsx)("div",{className:"fs-2",children:o.name}),Object(g.jsx)("div",{className:"btn btn-secondary mx-2 fs-3",onClick:je,children:"Change"})]})]}),Object(g.jsxs)("div",{className:" border border-dark  px-auto toothSelector",children:[Object(g.jsxs)("div",{className:"d-flex justify-content-between bg-info fs-4 text-white p-2",children:[Object(g.jsx)("div",{className:"",children:"Select Teeth"}),Object(g.jsx)(In,{title:"Quick Select",option1:"None",option2:"Upper Arch",option3:"Lower Arch",onSelectOption:de})]}),Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)(kn,{selectorClass:"flex-md-row-reverse",division:1,handleSelectTooth:le,selectedTeeth:L}),Object(g.jsx)("span",{className:"divider-vt"}),Object(g.jsxs)("span",{children:[" ",Object(g.jsx)(kn,{division:2,handleSelectTooth:le,selectedTeeth:G})," "]})]}),Object(g.jsx)("div",{className:"divider-hz "}),Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)(kn,{selectorClass:"flex-row-reverse",division:4,handleSelectTooth:le,selectedTeeth:Z}),Object(g.jsx)("span",{className:"divider-vt"}),Object(g.jsxs)("span",{children:[" ",Object(g.jsx)(kn,{division:3,handleSelectTooth:le,selectedTeeth:q})," "]})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-column justify-content-between fs-4 m-2 ",children:[Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{children:["Teeth :",A.join()]}),Object(g.jsxs)("div",{children:["Units :",A.length," "]}),!o.slabPrice&&Object(g.jsxs)("div",{className:"w-50",children:["Unit Rate : ",Object(g.jsx)("input",{type:"number",className:"input-group",defaultValue:o.price,onChange:ue("price")})]}),A.length>0&&Object(g.jsxs)("div",{className:"fs-3",children:["Total : ",he()," "]})]}),o.slabPrice&&Object(g.jsx)("div",{children:Object(g.jsx)("div",{children:o.slabPrice&&Object(g.jsxs)("div",{className:"border border-dark rounded fs-4  px-3",children:[Object(g.jsx)("div",{className:"d-flex flex-row justify-content-between",children:Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-around py-2 mx-2 ",children:[Object(g.jsxs)("div",{className:"d-flex flex-row ",children:[Object(g.jsx)("div",{className:"w-75",children:" First "}),Object(g.jsx)("input",{className:"form-control w-25 mx-2",type:"number",name:"slEnd1",value:$,onChange:ue("slab1End")})]}),Object(g.jsxs)("div",{className:"d-flex flex-row ",children:[Object(g.jsx)("div",{className:"w-75",children:" Units@ "}),Object(g.jsx)("input",{className:"form-control w-25",name:"s1Price",type:"number",value:ee,onChange:ue("slab1Price")})]}),Object(g.jsx)("div",{children:"Per Unit"})]})}),te>0&&Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-around  py-2",children:[Object(g.jsxs)("div",{className:"d-flex flex-row ",children:[Object(g.jsx)("div",{className:"w-75",children:"  Next"}),Object(g.jsx)("input",{className:"form-control w-25 mx-2",name:"slEnd2",type:"number",value:te,onChange:ue("slab2End")})]}),Object(g.jsxs)("div",{className:"d-flex flex-row ",children:[Object(g.jsx)("div",{className:"w-75",children:" Units@ "}),Object(g.jsx)("input",{className:"form-control w-25",name:"s2Price",type:"number",value:ne,onChange:ue("slab2Price")})]}),Object(g.jsx)("div",{children:"Per Unit"})]}),Object(g.jsxs)("div",{className:"d-flex flex-row  py-2",children:[Object(g.jsx)("div",{className:"w-50 ",children:"Remaining Units@"}),Object(g.jsx)("div",{className:"w-25 ",children:Object(g.jsx)("input",{className:"form-control",name:"s3Price",type:"number",value:ce,onChange:ue("slab3Price")})}),Object(g.jsx)("div",{className:"px-2",children:"Per Unit"})]})]})})}),Object(g.jsxs)("div",{className:"d-flex flex-column mw-50",children:[Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(g.jsxs)("div",{className:"col-5",children:["Discount Type:",Object(g.jsxs)("select",{onChange:ue("discount_type"),children:[Object(g.jsx)("option",{value:"p",children:"Precent"}),Object(g.jsx)("option",{value:"a",selected:!0,children:"Amount"})]})]}),Object(g.jsxs)("div",{className:"col-5 ",children:["Discount: ",Object(g.jsx)("input",{type:"number",className:"input-group",value:F.discount,onChange:ue("discount")})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(g.jsxs)("div",{className:"my-3 fs-3",children:["Gross Amount: ",he()]}),Object(g.jsx)("div",{className:"d-flex  flex-md-column align-items-end flex-sm-row mt-3",children:Object(g.jsx)("button",{className:" btn btn-success fs-4 my-3 ",onClick:function(e){e.preventDefault(),v?(A.length>0||!0===window.confirm("No Teeth selected , Are you sure you want to continue?"))&&be():(A.length>0||!0===window.confirm("No Teeth selected , Are you sure you want to continue?"))&&fe()},children:"Save"})})]})]})]})]}),"     "]}),!o&&!v&&Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(zn,{onProductSelection:function(e){console.log("Product selected  in tooth selector:",e),s(e),e.slabPrice&&(C(!0),R(Object(h.a)(Object(h.a)({},F),{},{slab1Price:e.slab1.s1price,slab1End:e.slab1.end,slab2End:e.slab2.end,slab2Price:e.slab2.s2price,slab3Price:e.slab3.s3price})))}})})]})},Rn=function(e){var t=e.job,n=(e.index,e.onJobDelete),r=e.onJobEdit,a=(e.onAddOrderCancel,e.onEditJobClick),i=Object(c.useState)(!1),o=Object(j.a)(i,2),s=o[0],l=o[1],d=t.id,u=t.units,b=t.price,f=t.product,h=t.type,x=(t.productId,t.discount),O=t.discount_type,m=t.total,p=t.productTypeCategory,v=t.teethSelected;return Object(c.useEffect)((function(){l(!1)}),[t]),Object(g.jsxs)(g.Fragment,{children:[!s&&Object(g.jsxs)("div",{className:" border border-secondary",children:[Object(g.jsxs)("div",{className:"d-flex flex-row w-75 justify-content-start",children:[Object(g.jsxs)("div",{className:"  border border-dark p-2 mx-3 ",children:[" ",h]}),Object(g.jsx)("div",{className:"border border-dark p-2 mx-5",children:p})]}),Object(g.jsxs)("div",{className:"d-flex w-75 justify-content-start align-items-center",children:[Object(g.jsx)("div",{className:"text-primary fs-3",children:Object(g.jsx)("b",{children:f})}),Object(g.jsx)("div",{className:"fs-3 mx-5",children:Object(g.jsx)("b",{children:v.join()})})]}),Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsxs)("div",{className:"d-flex w-75 justify-content-start align-items-center my-1 mx-1",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("b",{children:u})," Unit  @ ",Object(g.jsx)("b",{children:b})," "]}),Object(g.jsx)("div",{className:"mx-2",children:x?"discount : ".concat(x):""}),Object(g.jsx)("div",{className:"mx-2",children:x?"discount type : ".concat(O):""}),Object(g.jsxs)("div",{className:"mx-2",children:["Total charge :",Object(g.jsxs)("b",{children:[" ",m]})]})]}),Object(g.jsxs)("div",{className:"d-flex w-25 justify-content-end",children:[Object(g.jsx)("div",{className:"btn ",children:Object(g.jsx)(ie.a,{style:{fontSize:24,border:"1px solid black",borderRadius:"0.5rem"},onClick:function(){l(!0)}})}),Object(g.jsx)("div",{className:"btn",children:Object(g.jsx)(re.a,{style:{color:"red",fontSize:24,border:"1px solid red",borderRadius:"0.5rem"},onClick:function(){n(d)}})})]})]}),Object(g.jsx)("div",{className:"d-flex justify-content-end"})]}),s&&Object(g.jsx)("div",{children:Object(g.jsx)(Fn,{job:t,onAddOrderCancel:function(){l(!1)},onJobSave:r,onEditJob:a})})]})},_n=function(e){var t=e.products,n=e.onAddOrderCancel,r=e.onConfirmOrder,a=(e.onJobEdit,e.onDelete),i=e.onEditJob,o=Object(c.useState)([]),s=Object(j.a)(o,2),l=s[0],d=s[1],u=function(e){console.log("Job Selected after Edit in**** JobSET :",l[e])};return Object(c.useEffect)((function(){t.length>0&&d(t)}),[]),console.log("Jobs confirmed :",l.length),Object(g.jsxs)("div",{className:"d-flex flex-column ",children:[console.log("Products received in JobSet :",t),l.length>0&&Object(g.jsx)(c.Fragment,{children:Object(g.jsx)("div",{children:Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:Object(g.jsx)(Tn,{jobs:t})}),t.length>0&&Object(g.jsx)("div",{className:" m-auto fs-4 job-details",children:t.map((function(e,t){return Object(g.jsx)(Rn,{job:e,index:t,onJobDelete:a,onJobEdit:u,onAddOrderCancel:n,onEditJobClick:i})}))})]})})}),l.length<1&&Object(g.jsx)(Fn,{onAddOrderCancel:n,onJobSave:r})]})},Bn=function(e){var t=e.onClientSelection,n=Object(c.useState)([]),r=Object(j.a)(n,2),a=r[0],i=r[1],o=Object(c.useContext)(bt),s=o.user,u=o.token,b=Object(c.useState)({error:"",loading:!1}),f=Object(j.a)(b,2),h=f[0],x=f[1],O=(h.error,h.loading),m=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x({error:"",loading:!0}),e.next=3,Ne(s._id,u).then((function(e){e.error?(x({error:"Error fetching data",loading:!1}),window.alert("Failed to Connect to database ")):(i(e),x({error:"",loading:!1}))})).catch((function(e){x({error:e,loading:!1}),window.alert("Failed to Connect to database ")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){m()}),[]),Object(g.jsxs)("div",{className:"container-fluid ",children:[O&&Object(g.jsx)("div",{children:"Loading..."}),Object(g.jsx)(W.a,{columns:[{title:"Name",field:"name",defaultSort:"asc",cellStyle:{fontSize:"1.8rem"}},{title:"Mobile",field:"phoneM",cellStyle:{fontSize:"1.8rem"}},{title:"City",field:"city",cellStyle:{fontSize:"1.8rem"}}],data:a,icons:ge,title:"Client Data",onRowClick:function(e,n){t(n)},options:{filtering:!0,pageSizeOptions:[10,25,50,100],pageSize:25,paginationType:"stepped",exportAllData:!0,padding:"dense",exportFileName:"clientdata",addRowPosition:"first",actionsColumnIndex:6,columnsButton:!0,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontSize:"2rem"},style:{fontSize:"2rem"}}})]})},Ln=n(482),Mn=n.n(Ln),Un=n(376),Vn=n.n(Un),Gn=(n(1267),n(1268),n(452),n(1394)),Wn=function(e){e.onAddOrderCancel,e.onConfirmOrder;var t=Object(u.g)(),n=(function(){var e,t,n,c=new Date;e=c.getDate(),t=c.getMonth()+1,n=c.getFullYear(),"".concat(n,"-").concat(t,"-").concat(e)}(),Object(c.useContext)(bt)),r=n.user,a=n.token,i=Object(c.useContext)(R),o=(i.clients,i.clientSelected),s=i.onClientSelect,b=i.setPathRedirect,O=i.setRedirect,m=i.setClientSelected,p=Object(c.useContext)(V),v=(p.orders,p.fetchOrders),y=p.orderSelected,N=p.setOrderSelected,S=Object(c.useState)(null),C=Object(j.a)(S,2),D=C[0],k=C[1],T=Object(c.useState)(1),P=Object(j.a)(T,2),A=P[0],E=P[1],I=Object(c.useState)({orderNo:0,orderAmount:0,status:"New",orderDate:new Date,updated:new Date,duedate:new Date,dateIn:new Date,deliverytime:"",deliveryMethod:"",department:"",ordertime:"",client:"",clientId:"",patient:"",user:r.name,shipment:"",assignedTo:"",error:"",additionalAmount:0,trayNo:0,shade1:"",shade2:"",shade3:"",shadeNote:"",articulatorTag:"",priority:"",notes:"",priceBand:"",billTo:"",orderNotes:"",invoiceId:"",productsList:"",products:[],workType:"new",log:[],modelno:""}),z=Object(j.a)(I,2),F=z[0],_=z[1],B=Object(c.useState)(!1),L=Object(j.a)(B,2),M=L[0],U=L[1],G=Object(c.useState)(""),W=Object(j.a)(G,2),J=W[0],H=W[1],q=Object(c.useState)(!1),Y=Object(j.a)(q,2),K=Y[0],X=Y[1],Z=Object(c.useState)(!1),Q=Object(j.a)(Z,2),$=Q[0],ee=Q[1],te=Object(c.useState)(new Date),ne=Object(j.a)(te,2),ce=ne[0],ae=ne[1],ie=Object(c.useState)(new Date),oe=Object(j.a)(ie,2),se=oe[0],le=oe[1],de=Object(c.useState)(new Date),je=Object(j.a)(de,2),ue=je[0],be=je[1],fe=Object(c.useState)(new Date),he=Object(j.a)(fe,2),xe=(he[0],he[1],Object(c.useState)([])),Oe=Object(j.a)(xe,2),me=Oe[0],pe=Oe[1],ve=(F._id,F.modelno),ge=F.orderNo,ye=(F.orderAmount,F.status),we=(F.orderDate,F.updated,F.dueDate,F.dateIn,F.deliverytime),Ne=F.deliveryMethod,Se=F.ordertime,Ce=(F.client,F.clientId,F.patient),De=(F.shipment,F.additionalAmount),Pe=F.trayNo,Ae=F.shade1,Ee=F.shade2,Ie=F.shade3,ze=F.shadeNote,Fe=F.articulatorTag,Re=F.priority,_e=(F.notes,F.department),Be=F.priceBand,Le=F.billTo,Me=F.orderNotes,Ue=F.invoiceId,Ve=(F.products,F.productsList,F.assignedTo),Ge=F.workType,We=function(e){return function(t){var n=t.target.value;console.log("".concat(e," : ").concat(n)),_(Object(h.a)(Object(h.a)({},F),{},Object(f.a)({},e,n)))}},Je=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].total,console.log("Total Bill :",t);return t},He=function(e){return De&&De>0?Je(me)+parseInt(De):Je(me)},qe=function(){t.goBack()},Ye=function(e){var t=Object(h.a)({},e);t.id=me.length+1;var n=[].concat(Object(Ft.a)(me),[t]);pe(n);var c=Je(n);_(Object(h.a)(Object(h.a)({},F),{},{orderAmount:c})),console.log("NEW JOBS RECEIVED IN ADDTOJOBS",n),ee(!1)},Ke=function(){ee(!1)},Xe=function(e){console.log("JOB RECIEVED FOR EDITING :",e);var t=me.findIndex((function(t){return t.id===e.id})),n=Object(Ft.a)(me);n[t]=Object(h.a)({},e),pe((function(){return Object(Ft.a)(n)})),console.log("Job recieved in NewOrderForm NEWJOBS********: ",n);var c=Je(n);_(Object(h.a)(Object(h.a)({},F),{},{orderAmount:c}))},Ze=function(e){if(1===me.length){if(!0===window.confirm("Are you sure you want to delete the order ?")){var t=me.filter((function(t){return t.id!==e}));pe((function(){return Object(Ft.a)(t)})),Je(me);var n=Je(t);_(Object(h.a)(Object(h.a)({},F),{},{orderAmount:n}))}}else{var c=me.filter((function(t){return t.id!==e}));console.log("New JOB :::AFTER DELETING ID ".concat(e," "),c),pe(c);var r=Je(c);_(Object(h.a)(Object(h.a)({},F),{},{orderAmount:r}))}},Qe=function(){var e=Object(Ft.a)(me),n={orderNo:D,orderAmount:He(),products:e,modelno:ve,status:ye,orderDate:ce,updated:new Date,duedate:se,dateIn:ue,deliverytime:we,deliveryMethod:Ne,ordertime:Se,client:o.name,clientId:o._id,patient:Ce,user:r.name,shipment:"",assignedTo:Ve,additionalAmount:De,trayNo:0,shade1:Ae,shade2:Ee,shade3:Ie,shadeNote:ze,articulatorTag:Fe,priority:Re,priceBand:o.priceBand,billTo:o.billTo,orderNotes:Me,department:_e,invoiceId:"",isInvoiced:!1,workType:Ge};K?(console.log("Order Values  in NewOrderForm UPDATE: ",n),n._id=y._id,Te(r._id,a,n).then((function(e){200!==e.status?(H("Error While Updating Order"),U(!0),setTimeout((function(){return U(!1)}),2e3)):(H("Order updated Successfully"),U(!0),setTimeout((function(){return U(!1)}),2e3),b("".concat(".","/order")),v(),O(!0),m(null))})).catch((function(e){H("Error While Updating Data: "),U(!0),setTimeout((function(){return U(!1)}),2e3)}))):ke(r._id,a,n).then((function(e){200!==e.status?(H("Error While Saving Order"),U(!0),setTimeout((function(){return U(!1)}),2e3)):(H("Order Saved Successfully"),U(!0),setTimeout((function(){return U(!1)}),2e3),b("".concat(".","/order")),v(),O(!0),m(null))})).catch((function(e){H("Error While Saving Data: "),U(!0),setTimeout((function(){return U(!1)}),2e3)})),t.goBack()},$e=function(e){var t=e.toString(),n=t.length;if(n<6)for(var c=0;c<6-n;c++)t="0"+t;return t},et=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/ordercounter"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return e})).then((function(e){k($e(e.sequence_val))})).catch((function(e){H("Error in sequence"),U(!0),setTimeout((function(){return U(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){y?(X(!0),m(y.clientId),pe(Object(Ft.a)(y.products)),k(y.orderNo),_(Object(h.a)({},y))):(et(),_(Object(h.a)(Object(h.a)({},F),{},{orderNo:D})),X(!1))}),[D]),Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)(w,{}),Object(g.jsx)("div",{className:"lh-1",children:Object(g.jsxs)("div",{className:" order-container border border-dark ",children:[Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(g.jsx)("div",{className:"fs-1",children:Object(g.jsxs)("b",{children:[K?"Edit":"New","  ","Order"]})}),me.length>0&&Object(g.jsx)("div",{className:"my-1",children:Object(g.jsxs)("div",{className:"d-flex flex-row",children:[Object(g.jsx)("div",{className:"btn btn-info fs-4 mx-2",style:1===A?{backgroundColor:"gold"}:null,onClick:function(){return E(1)},children:"Detail"}),Object(g.jsx)("div",{className:"btn btn-info fs-4 mx-2",style:2===A?{backgroundColor:"gold"}:null,onClick:function(){return E(2)},children:"Add Images"}),Object(g.jsx)("div",{className:"btn btn-info fs-4 mx-2",style:3===A?{backgroundColor:"gold"}:null,onClick:function(){return E(3)},children:"Log"})]})})]}),o&&Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)("form",{children:Object(g.jsxs)("div",{className:" d-flex flex-column flex-sm-row w-100 fs-4",children:[Object(g.jsx)("div",{className:"col  border border-dark ",children:Object(g.jsxs)("div",{className:"",children:[Object(g.jsxs)("div",{className:"d-flex flex-row flex-wrap ",children:[Object(g.jsxs)("div",{className:"col-5  d-flex flex-row mb-1 ",children:[Object(g.jsx)("div",{className:"col-6 col-md-4 ",children:"Order # : "}),Object(g.jsx)("input",{className:"col-6 col-md-8",value:ge,type:"number"})]}),Object(g.jsx)("div",{className:"col-md-1 "}),Object(g.jsxs)("div",{className:" col-5 d-flex flex-row mb-1",children:[Object(g.jsx)("div",{className:"col-6 col-md-4",children:"Charge : "}),Object(g.jsx)("div",{className:"col-6 col-md-8",children:He()})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-sm-row flex-column justify-content-between",children:[Object(g.jsxs)("div",{className:"col-sm-5 d-md-inline-flex  ",children:[Object(g.jsx)("div",{className:"col-md-4",children:"Order Date : "}),Object(g.jsx)(Vn.a,{selected:ce,onChange:function(e){return ae(e)},dateFormat:"dd/MM/yyyy",minDate:new Date,showYearDropdown:!0,scrollableMonthYearDropdown:!0})]}),Object(g.jsxs)("div",{className:" col-sm-5 d-md-inline-flex mb-1",children:[Object(g.jsx)("div",{className:"col-sm-4",children:"Model# :"}),Object(g.jsx)("input",{id:"modelno",className:" col col-md-8",type:"number"})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-sm-row flex-column justify-content-between",children:[Object(g.jsxs)("div",{className:"col-sm-5 d-md-inline-flex mb-1 ",children:[Object(g.jsx)("div",{className:"col-md-4 ",children:"Due Date : "}),Object(g.jsx)(Vn.a,{selected:se,onChange:function(e){return le(e)},dateFormat:"dd/MM/yyyy",minDate:new Date,style:{zIndex:"1000",fontSize:"1.8rem"},showYearDropdown:!0,scrollableMonthYearDropdown:!0})]}),Object(g.jsxs)("div",{className:" col-sm-5 d-md-inline-flex mb-1",children:[Object(g.jsx)("div",{className:"col-md-4 ",children:"@"}),Object(g.jsxs)("select",{id:"deliverytime",className:"col col-md-8 ",value:we,defaultValue:"Evening 4 - 5",onChange:We("deliverytime"),children:[Object(g.jsx)("option",{value:"Morning 10 AM",children:"Morning 10 AM"}),Object(g.jsx)("option",{value:"Afternoon 3",children:"Afternoon 3"}),Object(g.jsx)("option",{value:"Evening 4 - 5",children:"Evening 4 - 5"}),Object(g.jsx)("option",{value:"Prcel 6:30",children:"Prcel 6:30"}),Object(g.jsx)("option",{value:"Self Delivery",children:"Self Delivery"}),Object(g.jsx)("option",{value:"Urgent Any-time",children:"Urgent Any-time"}),Object(g.jsx)("option",{value:">Next Morning 8AM",children:"Next Morning 8AM"})]})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-sm-row flex-column justify-content-between",children:[Object(g.jsxs)("div",{className:"col-md-5 d-md-inline-flex mb-1 ",children:[Object(g.jsx)("div",{className:"col-md-4 ",children:"Date In : "}),Object(g.jsx)(Vn.a,{selected:ue,onChange:function(e){return be(e)},dateFormat:"dd/MM/yyyy",minDate:new Date,showYearDropdown:!0,scrollableMonthYearDropdown:!0})]}),Object(g.jsxs)("div",{className:"col-sm-5 d-md-inline-flex",children:[Object(g.jsx)("div",{className:"col-md-4",children:"@"}),Object(g.jsxs)("select",{className:"col col-md-8",id:"ordertime",value:Se,onChange:We("ordertime"),children:[Object(g.jsx)("option",{}),Object(g.jsx)("option",{value:"Morning 10 AM",children:"Morning 10 AM"}),Object(g.jsx)("option",{value:"Afternoon 3",children:"Afternoon 3"}),Object(g.jsx)("option",{value:"Evening 4 - 5",children:"Evening 4 - 5"}),Object(g.jsx)("option",{value:"Prcel 6:30",children:"Prcel 6:30"}),Object(g.jsx)("option",{value:"Self Delivery",children:"Self Delivery"}),Object(g.jsx)("option",{value:"Urgent Any-time",children:"Urgent Any-time"}),Object(g.jsx)("option",{value:"Next Morning 8AM",children:"Next Morning 8AM"})]})]})]})]})}),Object(g.jsx)("div",{className:"col border border-dark",children:Object(g.jsxs)("ul",{children:[Object(g.jsxs)("li",{className:"d-flex  flex-column flex-md-row ",children:[Object(g.jsxs)("div",{className:"col-md-6 d-flex flex-sm-row ",children:[Object(g.jsx)("div",{className:"col-md-3 col-6",children:"Client"}),Object(g.jsx)("div",{className:"col-md-3 col-6 text-primary ",children:Object(g.jsx)("b",{children:o.name})})]}),Object(g.jsxs)("div",{className:"col-md-6 d-flex flex-sm-row ",children:[Object(g.jsx)("div",{className:"col-md-3 col-6",children:"Balance"}),Object(g.jsx)("div",{className:"col-md-3 col-6",children:"0"})]})]}),Object(g.jsx)("li",{className:"d-flex flex-md-row flex-column",children:Object(g.jsxs)("div",{className:"col-md-6 d-flex flex-sm-row ",children:[Object(g.jsx)("div",{className:"col-md-3 col-6",children:"Price Band"}),Object(g.jsx)("div",{className:"col-md-3 col-6",children:Be})]})}),Object(g.jsxs)("li",{className:"d-flex flex-md-row flex-column",children:[Object(g.jsx)("div",{className:"col-md-3 col-6",children:"Bill To : "}),Object(g.jsx)("div",{className:"col-md-3 col-6",children:Le})]}),Object(g.jsxs)("li",{className:"d-flex flex-md-row",children:[Object(g.jsx)("div",{className:"col-md-auto col-6",children:"Notes : "}),Object(g.jsx)("div",{className:"col-md-auto col-6",children:o.notes})]}),Object(g.jsxs)("li",{className:"d-flex flex-md-row flex-column",children:[Object(g.jsxs)("div",{className:"col-md-6 d-flex flex-sm-row ",children:[Object(g.jsx)("div",{className:"col-md-auto col-6",children:"Invoice # : "}),Object(g.jsx)("div",{className:"col-md-auto col-6",children:Ue})]}),Object(g.jsx)("li",{className:"col-md-auto col-6",children:"Shipment # "}),Object(g.jsx)("li",{className:"col-md-auto col-6"})]})]})})]})}),Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)("div",{className:"d-flex flex-column flex-md-row justify-content-between",children:!$&&me.length>=1&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"col-12 col-md-8 border border-dark ",children:[M&&Object(g.jsx)("div",{className:"fs-3 text-danger",children:J}),Object(g.jsx)(_n,{products:me,onAddOrderCancel:qe,onConfirmOrder:Ye,onEditJob:Xe,onDelete:Ze})]}),Object(g.jsxs)("div",{className:"col-12 col-md-4 container border border-dark",children:[Object(g.jsx)("div",{children:Object(g.jsxs)("div",{className:"",children:[Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between fs-4",children:[Object(g.jsx)("div",{className:"col",children:Object(g.jsx)("b",{children:"#tryIn"})}),Object(g.jsx)("div",{className:"col",children:Object(g.jsx)("b",{children:"Scheduled"})}),Object(g.jsx)("div",{className:"col",children:Object(g.jsx)("b",{children:"Status"})})]}),Object(g.jsxs)("div",{className:"d-flex flex-row  justify-content-between align-items-center  ",children:[Object(g.jsx)("div",{className:" fs-4",children:"Zig Trial"}),Object(g.jsx)("div",{className:"",children:Object(g.jsx)("input",{type:"text",onChange:function(){return We()}})}),Object(g.jsxs)("div",{className:" d-flex flex-row align-items-center",children:[Object(g.jsx)("div",{className:"btn text-primary fs-3",children:Object(g.jsx)("b",{children:"X"})}),Object(g.jsx)("div",{className:" fs-4",children:"In Process"})]})]})]})}),Object(g.jsx)("hr",{}),Object(g.jsx)("div",{children:Object(g.jsxs)("div",{className:"container fs-4",children:["Shade",Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between my-1",children:[Object(g.jsxs)("div",{className:"w-25 ",children:[Object(g.jsx)("div",{children:" Shade1 "}),Object(g.jsx)("input",{type:"text",style:{maxWidth:"80%"},value:Ae,onChange:We("shade1")})]}),Object(g.jsxs)("div",{className:"w-25",children:[Object(g.jsx)("div",{children:"Shade2"}),Object(g.jsx)("input",{type:"text",style:{maxWidth:"80%"},value:Ee,onChange:We("shade2")})]}),Object(g.jsxs)("div",{className:"w-25",children:[Object(g.jsx)("div",{children:"Shade3"}),Object(g.jsx)("input",{type:"text",style:{maxWidth:"80%"},value:Ie,onChange:We("shade3")})]})]}),Object(g.jsx)("input",{type:"text",style:{width:"100%"},value:ze,placeholder:"shade Notes",onChange:function(){return We("shadeNote")}})]})}),Object(g.jsx)("hr",{}),Object(g.jsx)("div",{children:Object(g.jsxs)("div",{className:"row fs-4",children:[Object(g.jsxs)("div",{className:"col",children:["Articulator Tag",Object(g.jsx)("input",{type:"text",value:Fe,onChange:function(){return We("articulatorTag")}})]}),Object(g.jsxs)("div",{className:"col",children:["Priority",Object(g.jsxs)("select",{className:"form-select fs-4",children:[Object(g.jsx)("option",{value:"ASAP",children:"ASAP"}),Object(g.jsx)("option",{value:"Expediate Service",children:"Expediate Service"}),Object(g.jsx)("option",{value:"Normal",children:"Normal"}),Object(g.jsx)("option",{value:"Urgent",children:"Urgent"}),Object(g.jsx)("option",{value:"very Urgent",children:"very Urgent"})]})]})]})})]})]})}),(me.length<=0||$)&&Object(g.jsx)(Fn,{onAddOrderCancel:Ke,onJobSave:Ye,onEditJob:Xe})]}),!$&&me.length>0&&Object(g.jsx)("form",{children:Object(g.jsxs)("div",{className:" ",style:{fontSize:"1.6rem"},children:[Object(g.jsxs)("div",{className:"d-flex flex-column flex-md-row  ",children:[Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(g.jsxs)("div",{className:"mx-2",children:[Object(g.jsx)("div",{children:"Additional Amount"}),Object(g.jsx)("input",{type:"number",style:{maxWidth:"45vW"},value:De,onChange:We("additionalAmount")})]}),Object(g.jsxs)("div",{className:"mx-2",children:[Object(g.jsx)("div",{children:"Patient"}),Object(g.jsx)("input",{type:"text",value:Ce,style:{maxWidth:"45vW"},onChange:We("patient")})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(g.jsxs)("div",{className:"mx-2",children:[Object(g.jsx)("div",{children:"Delivery Method"}),Object(g.jsxs)("select",{id:"deliveryMehtod",type:"text",value:Ne,defaultValue:"Doctor pickup",onChange:We("deliveryMethod"),children:[Object(g.jsx)("option",{value:"courier",children:"courier"}),Object(g.jsx)("option",{value:"Delivery Boy",children:"Delivery Boy"}),Object(g.jsx)("option",{value:"Doctor pickup",children:"Doctor pickup"}),Object(g.jsx)("option",{value:"Mail",children:"Mail"})]})]}),Object(g.jsxs)("div",{className:"mx-2",children:[Object(g.jsx)("div",{children:"Status"}),Object(g.jsxs)("select",{value:ye,defaultValue:"New",onChange:We("status"),children:[Object(g.jsx)("option",{value:"New",children:"New"}),Object(g.jsx)("option",{value:"In Production",children:"In Production"}),Object(g.jsx)("option",{value:"Complete",children:"Complete"}),Object(g.jsx)("option",{value:"Hold",children:"Hold"}),Object(g.jsx)("option",{value:"Try In",children:"Try In"}),Object(g.jsx)("option",{value:"Cancelled",children:"Cancelled"})]})]}),Object(g.jsx)("div",{className:"mx-2",children:Object(g.jsx)("div",{children:(new Date).toDateString()})})]})]}),Object(g.jsx)("hr",{}),Object(g.jsxs)("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-center",children:[Object(g.jsxs)("div",{className:"d-flex flex-row  justify-content-start flex-wrap",children:[Object(g.jsxs)("div",{className:"mx-2",children:[Object(g.jsx)("div",{children:"Pan/Tray#"}),Object(g.jsx)("input",{type:"number",value:Pe,style:{maxWidth:"45vW"},onChange:We("trayNo")})]}),Object(g.jsxs)("div",{className:"mx-2",children:[Object(g.jsx)("div",{children:"Assign To"}),Object(g.jsx)("select",{style:{maxWidth:"45vw"},value:Ve,onChange:We("assignedTo"),children:Object(g.jsx)("option",{children:"staff"})})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"mx-2",children:"Manufacturer"}),Object(g.jsx)("select",{name:"",id:"",children:Object(g.jsx)("option",{children:"In house Lab"})})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-row ",children:[Object(g.jsx)("div",{className:" btn text-primary fs-4",children:"Add Enclosures"}),Object(g.jsx)("div",{className:"btn text-primary fs-4",children:"Edit Enclosures"})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center flex-wrap",children:[Object(g.jsxs)("div",{className:"mx-2",children:[Object(g.jsx)("div",{children:"Department"}),Object(g.jsx)("select",{style:{width:"15rem"},value:_e,onChange:We("department"),children:Object(g.jsx)("option",{value:""})})]}),Object(g.jsxs)("div",{className:"mx-2",children:[Object(g.jsx)("div",{children:"Work Type"}),Object(g.jsxs)("div",{className:"form-check form-check-inline",children:[Object(g.jsx)("label",{className:"form-check-label",htmlFor:"new",children:"New"}),Object(g.jsx)("input",{className:"form-check-input",name:"worktypeOption",id:"new",value:"new",onChange:We("workType"),type:"radio"})]}),Object(g.jsxs)("div",{className:"form-check form-check-inline",children:[Object(g.jsx)("label",{className:"form-check-label",htmlFor:"repeat",children:"Repeat"}),Object(g.jsx)("input",{className:"form-check-input",name:"worktypeOption",id:"repeat",value:"repeat",onChange:We("workType"),type:"radio"})]}),Object(g.jsxs)("div",{className:"form-check form-check-inline",children:[Object(g.jsx)("label",{className:"form-check-label",htmlFor:"repair",children:"Repair"}),Object(g.jsx)("input",{className:"form-check-input",name:"worktypeOption",id:"repair",value:"repair",onChange:We("workType"),type:"radio"})]})]}),Object(g.jsxs)("div",{className:"mx-2",children:["Sub Doctor",Object(g.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(g.jsx)("div",{children:"Primary Doctor"}),Object(g.jsx)(Gn.a,{children:Object(g.jsx)(Mn.a,{sx:{fontSize:30}})}),Object(g.jsx)(Gn.a,{children:Object(g.jsx)(Lt.a,{sx:{fontSize:30}})})]})]}),Object(g.jsxs)("div",{className:"mx-2",children:["Drop Location",Object(g.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(g.jsx)("div",{children:"Primary Address"}),Object(g.jsx)(Gn.a,{children:Object(g.jsx)(Mn.a,{sx:{fontSize:30}})}),Object(g.jsx)(Gn.a,{children:Object(g.jsx)(Lt.a,{sx:{fontSize:30}})})]})]})]}),Object(g.jsx)("hr",{}),Object(g.jsx)("div",{children:Object(g.jsx)("input",{type:"text",style:{width:"100%"},placeholder:"Order Notes",value:Me,onChange:We("orderNotes")})})]})})]}),!o&&!K&&Object(g.jsxs)("div",{className:" text-center  ",children:[Object(g.jsx)("span",{className:"text-danger fs-4",children:Object(g.jsx)("strong",{children:"Select Client to create New Order"})}),Object(g.jsx)(Bn,{onClientSelection:s})]}),!$&&Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-evenly ",children:[me.length>0&&Object(g.jsxs)(g.Fragment,{children:[" ",Object(g.jsx)("div",{className:"btn btn-info fs-4",onClick:function(){ee(!0)},children:"+Add Product"}),Object(g.jsx)("div",{className:"btn btn-info fs-4",children:"Save & Print"}),Object(g.jsx)("div",{className:"btn btn-info fs-4",onClick:Qe,children:"Save"})]}),K&&Object(g.jsxs)("div",{className:"text-white btn btn-danger fs-4",children:[Object(g.jsx)(re.a,{style:{fontSize:24}}),"Delete Order"]}),Object(g.jsx)("div",{className:"btn btn-info fs-4",onClick:function(){N(null),m(null),X(!1),ee(!1),t.goBack()},children:"Cancel"})]})]})})]})},Jn=r.a.createContext();Jn.displayName="OfficeContext";var Hn=Jn,qn=n(1393),Yn=n(156),Kn=n.n(Yn),Xn=["label","name","options"],Zn=function(e){var t=e.label,n=e.name,c=e.options,r=Object(B.a)(e,Xn);return Object(g.jsxs)("div",{className:"mx-2 ",children:[Object(g.jsxs)("label",{htmlFor:n,className:" mx-2",children:[t," "]}),Object(g.jsx)("select",Object(h.a)(Object(h.a)({id:n,as:"select",name:n,className:"form-select "},r),{},{children:c.map((function(e){return Object(g.jsx)("option",{value:e.value,children:e.value},e.value)}))}))]})},Qn=(n(701),function(e){var t=e.children,n=e.title;return Object(g.jsx)("div",{className:"modal-background  ",children:Object(g.jsxs)("div",{className:"my-modal d-flex flex-column ",children:[Object(g.jsx)("div",{className:"modal-heading fs-3 px-5 py-2",children:Object(g.jsx)("b",{children:n})}),Object(g.jsx)("hr",{}),Object(g.jsx)("div",{className:"modal-body",children:t}),Object(g.jsx)("hr",{})]})})}),$n=function(e){var t=e.onAddressConfirm,n=e.onAddressCancel,r=e.currentLocation,a=Object(c.useState)({name:"",address1:"",address2:"",area:"",city:"",pincode:"",state:"",contactPerson:"",phoneO:"",phoneM:"",workHours:"",route:""}),i=Object(j.a)(a,2),o=i[0],s=i[1],l=Object(c.useState)(""),d=Object(j.a)(l,2),u=d[0],b=d[1],x=Object(c.useState)(!1),O=Object(j.a)(x,2),m=O[0],p=O[1],v=function(e){return function(t){t.preventDefault();var n=t.target.value;s(Object(h.a)(Object(h.a)({},o),{},Object(f.a)({},e,n)))}},y=o.name,w=o.address1,N=o.address2,S=o.area,C=o.city,D=o.state,k=o.pincode,T=o.contactPerson,P=o.phoneM,A=o.phoneO,E=o.workHours,I=o.route;Object(c.useEffect)((function(){console.log("Current LOcation ::::::::::",r),r.address&&s(Object(h.a)({},r.address))}),[]);return Object(g.jsx)("div",{children:Object(g.jsxs)("form",{action:"",children:[Object(g.jsxs)("div",{className:"row fs-4",children:[m&&Object(g.jsx)("div",{className:"text-danger ",style:{fontSize:"1.6rem"},children:Object(g.jsx)("b",{children:u})}),Object(g.jsxs)("div",{className:"col w-50 mx-3",children:[Object(g.jsx)("label",{children:"Name"}),Object(g.jsx)("input",{className:"form-control",type:"text",label:"Name",name:"name",value:y,required:!0,onChange:v("name")}),Object(g.jsx)("label",{children:"Address:"}),Object(g.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"address line 1",name:"address1",value:w,onChange:v("address1")}),Object(g.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"address line 2",name:"address2",value:N,onChange:v("address2")}),Object(g.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Area",name:"area",value:S,onChange:v("area")}),Object(g.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"City",name:"city",value:C,onChange:v("city")}),Object(g.jsxs)("div",{className:"d-flex flex-row align-items-end",children:[Object(g.jsx)(Zn,{type:"text",className:"fs-5 px-4 w-100 ",name:"state",label:"State",value:D,options:[{value:"Select State"},{value:"GUJARAT"},{value:"MAHARASHTRA"},{value:"MADHYA PRADESH"}],onChange:v("state")}),Object(g.jsx)("input",{className:"w-50",type:"number",placeholder:"Pincode",name:"pincode",value:k,onChange:v("pincode")})]})]}),Object(g.jsxs)("div",{className:"col w-50 mx-5",children:[Object(g.jsx)("label",{children:"Contact Person"}),Object(g.jsx)("input",{className:"form-control",type:"text",label:"Contact Person",name:"contactPerson",value:T,onChange:v("contactPerson")}),Object(g.jsx)("label",{children:"Office Phone"}),Object(g.jsx)("input",{className:"form-control",type:"number",name:"phoneO",label:"Office Phone",value:A,onChange:v("phoneO")}),Object(g.jsx)("label",{children:"Cell Phone"}),Object(g.jsx)("input",{className:"form-control",type:"number",name:"phoneM",label:"Cell Phone",value:P,required:!0,onChange:v("phoneM")}),Object(g.jsx)("label",{children:"Working Hours"}),Object(g.jsx)("input",{className:"form-control",type:"text",label:"Working Hours",name:"workHours",value:E,onChange:v("workHours")}),Object(g.jsx)(Zn,{className:"form-select",type:"text",label:"Route",name:"route",value:I,options:[{value:"CTM"},{value:"ASARVA"}],onChange:v("route")})]})]}),Object(g.jsxs)("div",{className:" d-flex  justify-content-end  px-5 mt-5",children:[Object(g.jsx)("div",{className:"btn fs-3  bg-info pt-3  mb-3 px-5 mx-5",onClick:function(){(""===y||y.length<3||T.length<3||P.length<6)&&(b("Please enter valid Name ,contact person and mobile phone number"),p(!0),setTimeout((function(){return p(!1)}),2e3),1)||t(o)},children:"Save"}),Object(g.jsx)("div",{className:"btn btn-info fs-3 pt-3  mb-3 px-5 mx-5",onClick:n,children:"Cancel"})]})]})})},ec=function(e){var t=e.addressBook,n=e.onAddressEdit;return console.log("AddressBook received :",t),Object(g.jsx)("ul",{children:t.length>0&&t.map((function(e,t){return Object(g.jsx)("li",{children:Object(g.jsx)("div",{className:"",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-8 border border-dark",children:e.name}),Object(g.jsx)("div",{className:"col-4 border border-dark",children:Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Edit Location"}),children:Object(g.jsx)(Dt.a,{sx:{fontSize:30},onClick:function(){return n(e,t)}})})})]})})},t)}))})},tc=function(e){var t=e.addDoc,n=e.onAddDocConfirm,r=e.onAddDocCancel,a=e.onAddDocEdit,i=Object(c.useState)({name:"",cellno:"",designation:""}),o=Object(j.a)(i,2),s=o[0],l=o[1],d=Object(c.useState)(!1),u=Object(j.a)(d,2),b=u[0],x=u[1],O=Object(c.useState)(""),m=Object(j.a)(O,2),p=m[0],v=m[1],y=Object(c.useState)(!1),w=Object(j.a)(y,2),N=w[0],S=w[1],C=Object(c.useState)(!1),D=Object(j.a)(C,2),k=D[0],T=D[1],P=Object(c.useState)(null),A=Object(j.a)(P,2),E=A[0],I=A[1],z=function(e){return function(t){var n=t.target.value;l(Object(h.a)(Object(h.a)({},s),{},Object(f.a)({},e,n)))}};Object(c.useEffect)((function(){0===t.length&&x(!0)}),[]);var F=s.name,R=s.cellno,_=s.designation;return Object(g.jsxs)("div",{className:"container ",children:[b&&Object(g.jsxs)("ul",{className:"fs-4",children:[N&&Object(g.jsx)("li",{className:"text-danger fs-4",children:Object(g.jsx)("b",{children:p})}),Object(g.jsx)("li",{children:Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between ",children:[Object(g.jsxs)("div",{className:"w-75",children:[Object(g.jsx)("label",{children:"Name"}),Object(g.jsx)("input",{className:"form-control",type:"text",name:"name",value:F,onChange:z("name")})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{children:"Cell Phone"}),Object(g.jsx)("input",{className:"form-control",type:"number",name:"cellno",value:R,onChange:z("cellno")})]})]})}),Object(g.jsxs)("li",{children:[Object(g.jsx)("label",{children:"Designation Preference"}),Object(g.jsx)("input",{className:"form-control",type:"text",name:"designation",value:_,onChange:z("designation")})]}),Object(g.jsxs)("li",{className:" d-flex  justify-content-end  px-5 mt-5",children:[Object(g.jsx)("div",{className:"btn fs-3  bg-info pt-3  mb-3 px-5 mx-5",onClick:function(){(function(){var e=s.name,t=s.cellno;return s.designation,!(""===e||e.length<3||""===t)||(v("Please enter valid Name and Cell phone number"),S(!0),setTimeout((function(){return S(!1)}),2e3),!1)})()&&(k?a(s,E):n(s),T(!1),x(!1))},children:"Save"}),Object(g.jsx)("div",{className:"btn btn-info fs-3 pt-3  mb-3 px-5 mx-5",onClick:r,children:"Cancel"})]})]}),!b&&Object(g.jsxs)("ul",{children:[t.map((function(e,t){return Object(g.jsx)("li",{children:Object(g.jsxs)("div",{className:"d-flex flex-row mx-3 ",children:[Object(g.jsx)("div",{className:"btn w-75 border border-dark ",style:{fontSize:"1.6rem"},onClick:function(){return l(e)},children:e.name}),Object(g.jsx)("div",{className:"btn border border-dark",onClick:function(){return function(e,t){l(e),x(!0),T(!0),I(t)}(e,t)},children:Object(g.jsx)(Dt.a,{sx:{fontSize:24}})})]})},t)})),Object(g.jsx)("li",{className:"btn btn-info  mx-2 mt-2",style:{fontSize:"1.6rem"},onClick:function(){return x(!0)},children:"+ Add Doctors"}),Object(g.jsx)("li",{className:"btn btn-info mx-2 mt-2",style:{fontSize:"1.6rem"},onClick:r,children:"cancel"})]})]})};var nc=function(e){e.onCancel;var t=Object(u.g)(),n=Object(c.useContext)(R),r=n.clients,a=n.fetchClients,i=(n.onClientSelect,n.setClient,n.clientSelected),o=n.setClientSelected,s=n.setPathRedirect,b=n.setRedirect,O=(n.redirect,Object(c.useContext)(z)),m=O.currentCompany,p=(O.setCurrentCompany,Object(c.useState)(0)),v=Object(j.a)(p,2),y=(v[0],v[1]),N=Object(c.useState)({addDoc:[],area:"",address1:"",address2:"",address:[],acmanager:"",balance:"",billTo:"",creditLimit:0,code:0,company:m,contactPerson:"",category:"",city:"",dcireg:"",deliveryMethod:"",drcr:"dr",emailPrimary:"",emailSecondary:"",emailOption:!1,gstin:"",isLab:!1,name:"",notes:"",pincode:"",phoneO:"",phoneR:"",phoneM:"",priceBand:"",paymentTerms:"",route:"",regDate:(new Date).toDateString(),state:"",smsOption:!1,salutation:"Dr",taxEx:!1,workHours:""}),S=Object(j.a)(N,2),D=S[0],k=S[1],T=Object(c.useContext)(bt),P=T.user,A=T.token,E=(Object(c.useContext)(Hn).staff,Object(c.useState)(!1)),I=Object(j.a)(E,2),F=I[0],_=I[1],B=Object(c.useState)(""),L=Object(j.a)(B,2),M=L[0],U=L[1],V=Object(c.useState)(!1),G=Object(j.a)(V,2),W=G[0],J=G[1],H=Object(c.useState)(!1),q=Object(j.a)(H,2),Y=q[0],K=q[1],X=Object(c.useState)(!1),Z=Object(j.a)(X,2),Q=Z[0],$=Z[1],ee=Object(c.useState)([]),te=Object(j.a)(ee,2),ne=te[0],ce=te[1],re=Object(c.useState)(!1),ae=Object(j.a)(re,2),ie=ae[0],oe=ae[1],se=Object(c.useState)(!1),le=Object(j.a)(se,2),de=le[0],je=le[1],ue=Object(c.useState)([]),be=Object(j.a)(ue,2),fe=be[0],he=be[1],xe=Object(c.useState)(!1),Oe=Object(j.a)(xe,2),me=Oe[0],pe=Oe[1],ve=Object(c.useState)(!1),ge=Object(j.a)(ve,2),ye=ge[0],Ne=ge[1],Ce=Object(c.useState)({}),De=Object(j.a)(Ce,2),ke=De[0],Te=De[1],Pe=[{value:"Select Client"}];r.length>0&&r.map((function(e){return e.name})).forEach((function(e,t){return Pe[t+1]={value:e}}));var Ae=function(e,t){var n=r.filter((function(n){return n.name===e&&n.phoneM===t}));return console.log("Client found from set : ",n),n[0]},Ee=function(e){if(e.preventDefault(),""===D.name||D.name.length<3?(U("Please Enter Valid Name"),_(!0),setTimeout((function(){return _(!1)}),2e3),!1):!(""===D.phoneM||toString(D.phoneM).length<10)||(U("Please Enter Valid Cell phone Number"),_(!0),setTimeout((function(){return _(!1)}),2e3),!1)){var t=document.getElementById("taxEx");if(t.checked&&(D.taxEx=!0),(t=document.getElementById("isLab")).checked&&(D.isLab=!0),(t=document.getElementById("smsOption")).checked&&(D.smsOption=!0),(t=document.getElementById("emailOption")).checked&&(D.emailOption=!0),console.log("New Values Received in NewForm ::::",D),Y){var n=Object(h.a)(Object(h.a)({},D),{},{_id:i._id,addDoc:ne,address:fe});k(Object(h.a)(Object(h.a)({},D),{},{_id:i._id})),console.log("UPDATE CLIENT VALUES :",n),Se(P._id,A,n).then((function(e){200!==e.status?(U("Some error while updating data!"),_(!0),setTimeout((function(){return _(!1)}),2e3)):(J(!0),setTimeout((function(){return J(!1)}),2e3),a(),Q?(o(Ae(D.name,D.phoneM)),s("/order/neworder"),b(!0)):(s("/client"),b(!0)),k({salutation:"Dr",contactPerson:"",dcireg:"",name:"",code:"",emailPrimary:"",emailSecondary:"",address1:"",address2:"",area:"",state:"",city:"",pincode:"",phoneO:"",phoneR:"",phoneM:"",deliveryMethod:"",emailOption:!1,smsOption:!1,route:"",priceBand:"",billTo:"",gstin:"",creditLimit:0,taxEx:!1,isLab:!1,paymentTerms:"",balance:"",drcr:"1",notes:"",category:"",workHours:"",acmanager:"",regDate:new Date,company:m,addDocSalutation:""}))})).catch((function(e){U("Error while updating Data"),_(!0),setTimeout((function(){return _(!1)}),2e3)}))}else console.log("UPDATE CLIENT VALUES :",Object(h.a)(Object(h.a)({},D),{},{name:ze.toUpperCase(),addDoc:ne,address:fe})),we(P._id,A,Object(h.a)(Object(h.a)({},D),{},{name:ze.toUpperCase(),addDoc:ne,address:fe})).then((function(e){200!==e.status?(_(!0),setTimeout((function(){return _(!1)}),2e3)):(J(!0),setTimeout((function(){return J(!1)}),2e3),a(),Q?(o(Ae(D.name,D.phoneM)),s("/order"),b(!0)):(console.log("Public_URL :","".concat(".")),s("".concat(".","/client")),"".concat(".","/client"),u.a),k({salutation:"Dr",contactPerson:"",dcireg:"",name:"",code:"",emailPrimary:"",emailSecondary:"",address1:"",address2:"",area:"",state:"",city:"",pincode:"",phoneO:"",phoneR:"",phoneM:"",deliveryMethod:"",emailOption:!1,smsOption:!1,route:"",priceBand:"",addDoc:[],billTo:"",gstin:"",creditLimit:0,taxEx:!1,isLab:!1,paymentTerms:"",balance:"",drcr:"1",notes:"",category:"",workHours:"",acmanager:"",regDate:new Date,company:m,addDocSalutation:"",addDocName:""}))})).catch((function(e){U("Error while saving Data"),_(!0),setTimeout((function(){return _(!1)}),2e3)}))}},Ie=D.salutation,ze=D.name,Fe=D.code,Re=D.dcireg,_e=D.emailPrimary,Be=D.emailSecondary,Le=D.address1,Me=D.address2,Ue=D.area,Ve=D.city,Ge=D.state,We=D.pincode,Je=D.phoneO,He=D.contactPerson,qe=D.phoneR,Ye=D.phoneM,Ke=D.deliveryMethod,Xe=(D.emailOption,D.smsOption,D.route),Ze=D.priceBand,Qe=D.billTo,$e=D.gstin,et=D.creditLimit,tt=(D.taxEx,D.isLab,D.paymentTerms),nt=D.balance,ct=D.company,rt=(D.drcr,D.notes),at=D.category,it=D.workHours,ot=D.acmanager,st=(D.addDocSalutation,D.addDocName,function(e){return function(t){t.preventDefault();var n=t.target.value;k(Object(h.a)(Object(h.a)({},D),{},Object(f.a)({},e,n)))}}),lt=function(e){var t=e.toString(),n=t.length;if(n<6)for(var c=0;c<6-n;c++)t="0"+t;return t},dt=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/clientcounter"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return e})).then((function(e){y(lt(e.sequence_val)),k(Object(h.a)(Object(h.a)({},D),{},{code:lt(e.sequence_val)}))})).catch((function(e){U("Error in sequence"),_(!0),setTimeout((function(){return _(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){b(!1),i?(K(!0),k(Object(h.a)({},i)),ce(i.addDoc),he(i.address)):(dt(),ce([]),he([]))}),[Y]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(w,{}),Object(g.jsx)("div",{children:de&&Object(g.jsx)(Qn,{title:"Add  Location",onCloseModal:function(){return je(!1)},children:Object(g.jsx)($n,{onAddressConfirm:function(e){if(ye){var t=ke.index,n=fe;n[t]=e,he(n),je(!1),Te(null)}else je(!1),he((function(t){return[].concat(Object(Ft.a)(t),[Object(h.a)({},e)])}));Ne(!1)},onAddressCancel:function(){je(!1)},currentLocation:ke})})}),ie&&Object(g.jsx)(Qn,{title:"Add Doctor Information",children:Object(g.jsx)(tc,{addDoc:ne,onAddDocConfirm:function(e){oe(!1),ce((function(t){return[].concat(Object(Ft.a)(t),[e])}))},onAddDocCancel:function(){oe(!1)},onAddDocEdit:function(e,t){var n=ne;n[t]=e,ce(n)}})}),Object(g.jsxs)("div",{className:"container mt-5 fs-4",children:[F&&Object(g.jsx)(C,{children:Object(g.jsx)("h3",{children:M})}),Object(g.jsxs)("div",{className:"client-form-container mx-auto ",children:[Object(g.jsxs)("form",{children:[Object(g.jsx)("div",{className:"border border-dark px-3 ",children:Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between ",children:[Object(g.jsxs)("div",{children:[Object(g.jsxs)("h2",{className:"w-30",children:[Y?"Edit":"New"," "," ","Client"]}),Object(g.jsx)("label",{className:"fs-4",children:"Company :"}),Object(g.jsxs)("select",{name:"company",className:"fs-4 mx-2",value:ct,onChange:st("company"),children:[Object(g.jsx)("option",{value:"1",children:"1"}),Object(g.jsx)("option",{value:"2",children:"2"}),Object(g.jsx)("option",{value:"3",children:"3"})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-column  ",children:[Object(g.jsxs)("div",{className:"w-100 d-flex flex-sm-row  align-items-center justify-content-between ",children:[Object(g.jsx)("div",{className:"",children:Object(g.jsx)(Zn,{className:"form-select",label:"Salutation",name:"salutation",value:Ie,onChange:st("salutation"),options:[{value:"Dr."},{value:"Dr(Mrs.)"},{value:"M/s"},{value:"Mr."}]})}),Object(g.jsxs)("div",{className:"w-50",children:[Object(g.jsx)("label",{children:"Name"}),Object(g.jsx)("input",{className:"form-control",type:"text",label:"Name",name:"name",value:ze,required:!0,onChange:st("name")})]}),Object(g.jsxs)("div",{className:"w-25 mx-2",children:[Object(g.jsx)("label",{children:"Contact Person"}),Object(g.jsx)("input",{className:"form-control",type:"text",label:"Contact Person",name:"contactPerson",value:He,onChange:st("contactPerson")})]}),Object(g.jsx)("div",{className:"btn text-primary fs-5 mx-2 ",onClick:function(){return oe(!0)},children:Object(g.jsx)("b",{children:" Add Doctor"})})]}),Object(g.jsxs)("div",{className:"d-flex flex-sm-row  align-items-center justify-content-between",children:[Object(g.jsxs)("div",{className:"w-20 px-1",children:[Object(g.jsx)("div",{children:"Code"}),Object(g.jsx)("input",{className:"form-control",disabled:!0,type:"number",label:"Code",name:"code",value:Fe})]}),Object(g.jsxs)("div",{className:"w-20 px-1",children:[Object(g.jsx)("div",{children:"DCI Reg#"}),Object(g.jsx)("input",{className:"form-control",type:"text",label:"DCI Reg#",name:"dcireg",value:Re,onChange:st("dcireg")})]}),Object(g.jsxs)("div",{className:"w-40 px-1",children:[Object(g.jsx)("label",{children:"Working Hours"}),Object(g.jsx)("input",{className:"form-control",type:"text",label:"Working Hours",name:"workHours",value:it,onChange:st("workHours")})]}),Object(g.jsx)("div",{className:"w-20 px-1",children:Object(g.jsx)(Zn,{label:"Account Manager",name:"acmanager",onChange:st("acmanager"),value:ot,options:[{value:"select"},{value:"Shilpin Patel"},{value:"Jayesh Jain"}]})})]})]})]})}),Object(g.jsxs)("div",{className:"border border-5 border-dark  row",children:[Object(g.jsxs)("div",{className:"col  ",children:[Object(g.jsxs)("div",{className:" ",children:[Object(g.jsx)("div",{className:"btn btn-info fs-5  ",onClick:function(){je(!1),pe(!1)},children:"Primary Address"}),Object(g.jsx)("div",{className:"btn btn-warning fs-5 mx-2 px-4",onClick:function(){return pe(!0)},children:"Locations"}),me&&Object(g.jsxs)("div",{className:"location-list",children:[Object(g.jsx)("div",{className:"btn btn-info",onClick:function(){je(!0)},children:"+New Location"}),fe.length>0&&Object(g.jsx)("div",{children:Object(g.jsx)(ec,{addressBook:fe,onAddressEdit:function(e,t){Te({address:e,index:t}),Ne(!0),je(!0)}})})]}),!me&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("input",{className:"form-control fs-4",type:"text",placeholder:"address line 1",name:"address1",value:Le,onChange:st("address1")}),Object(g.jsx)("input",{className:"form-control fs-4",type:"text",placeholder:"address line 2",name:"address2",value:Me,onChange:st("address2")}),Object(g.jsx)("input",{className:"form-control fs-4",type:"text",placeholder:"Area",name:"area",value:Ue,onChange:st("area")}),Object(g.jsx)("input",{className:"form-control ",type:"text",placeholder:"City",name:"city",value:Ve,onChange:st("city")}),Object(g.jsx)("input",{className:"form-control ",type:"number",placeholder:"Pin",name:"pincode",value:We,onChange:st("pincode")}),Object(g.jsx)(Zn,{type:"text",label:"State",name:"state",className:"fs-5 mx-2 px-4",value:Ge,options:[{value:"Select State"},{value:"GUJARAT"},{value:"MAHARASHTRA"},{value:"MADHYA PRADESH"}],onChange:st("state")})]})]}),Object(g.jsxs)("div",{className:"w-75  px-3",children:[Object(g.jsx)("label",{children:"Office Phone"}),Object(g.jsx)("input",{className:"form-control",type:"number",name:"phoneO",label:"Office Phone",value:Je,onChange:st("phoneO")}),Object(g.jsx)("label",{children:"Cell Phone"}),Object(g.jsx)("input",{className:"form-control",type:"number",name:"phoneM",label:"Cell Phone",value:Ye,required:!0,onChange:st("phoneM")}),Object(g.jsx)("label",{children:"Res Phone"}),Object(g.jsx)("input",{className:"form-control",type:"number",name:"phoneR",label:"Res Phone",value:qe,onChange:st("phoneR")})]}),Object(g.jsxs)("div",{className:"d-flex flex-row   justify-items-center ",children:[Object(g.jsx)("div",{className:"w-75  ",children:Object(g.jsxs)("div",{className:"d-flex flex-column",children:[Object(g.jsx)("label",{children:"Email"}),Object(g.jsx)("input",{className:"form-control py-1 ",type:"email",label:"Email",name:"emailPrimary",value:_e,placeholder:"primary address",onChange:st("emailPrimary")}),Object(g.jsx)("div",{id:"extraemail",className:"d-none",children:Object(g.jsx)("input",{className:"form-control ",type:"email",name:"emailSecondary",value:Be,placeholder:"secondary address",onChange:st("emailSecondary")})})]})}),Object(g.jsx)("div",{className:"btn  fs-3 mt-4 text-dark",id:"addEmailIcon",children:Object(g.jsx)(qn.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"add Email"}),children:Object(g.jsx)(Gn.a,{onClick:function(){return document.getElementById("extraemail").classList.toggle("d-none"),void document.getElementById("addEmailIcon").classList.add("d-none")},children:Object(g.jsx)(Lt.a,{})})})})]}),Object(g.jsxs)("div",{className:"d-flex flex-row",children:[Object(g.jsx)("label",{children:"Send Welcome Message"}),Object(g.jsxs)("div",{className:"form-check ",children:[Object(g.jsx)("input",{className:"form-check-input",type:"checkbox",value:"sms",id:"smsOption"}),Object(g.jsx)("label",{className:"form-check-label",htmlFor:"flexCheckDefault",children:"SMS"})]}),Object(g.jsxs)("div",{className:"form-check  ",children:[Object(g.jsx)("input",{className:"form-check-input",type:"checkbox",value:"email",id:"emailOption"}),Object(g.jsx)("label",{className:"form-check-label",htmlFor:"flexCheckChecked",children:"Email "})]})]})]}),Object(g.jsxs)("div",{className:"col border border-dark p-0 ",children:[Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-around  border-dark border-bottom pb-2 ",children:[Object(g.jsx)("div",{className:"w-50",children:Object(g.jsx)(Zn,{type:"text",label:"Delivey Method",name:"deliveryMethod",value:Ke,options:[{value:"Courier"},{value:"Delivery Boy"},{value:"Doctor Pickup"},{value:"Mail"}],onChange:st("deliveryMethod")})}),Object(g.jsx)("div",{className:"w-50 ",children:Object(g.jsx)(Zn,{className:"form-select",type:"text",label:"Route",name:"route",value:Xe,options:[{value:"CTM"},{value:"ASARVA"}],onChange:st("route")})})]}),Object(g.jsxs)("div",{className:"d-flex flex-column border-dark border-bottom pb-2",children:[Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-around  align-items-center  ",children:[Object(g.jsx)("div",{className:"w-50 ",children:Object(g.jsx)(Zn,{className:"form-select",type:"text",label:"Price Band",name:"priceBand",value:Ze,options:[{value:""},{value:"Favourite Clients"},{value:"International"},{value:"Laboratory"},{value:"Out Of State"},{value:"Regular"},{value:"Sensitive"},{value:"Vora"}],onChange:st("priceBand")})}),Object(g.jsxs)("div",{className:"w-50",children:[Object(g.jsx)("label",{children:"GSTIN"}),Object(g.jsx)("input",{className:"form-control",type:"text",name:"gstin",value:$e,onChange:st("gstin")})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-around  align-items-center",children:[Object(g.jsxs)("div",{className:"form-check ",children:[Object(g.jsx)("input",{className:"form-check-input",type:"checkbox",name:"taxEx",value:"TaxEx",id:"taxEx"}),Object(g.jsx)("label",{className:"form-check-label",children:"Tax Exemption"})]}),Object(g.jsxs)("div",{className:"form-check ",children:[Object(g.jsx)("input",{className:"form-check-input",type:"checkbox",value:"isLab",id:"isLab"}),Object(g.jsx)("label",{className:"form-check-label",children:"This is a Dental Lab "})]})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-row   justify-content-between  align-items-start border-dark border-bottom pb-2 ",children:[Object(g.jsx)("h1",{children:"\u20b9 "}),Object(g.jsxs)("div",{className:"px-1 ",children:[Object(g.jsx)("label",{className:"",children:"Credit Limit"}),Object(g.jsx)("input",{className:"form-control",type:"number",name:"cerditLimit",placeholder:"0",value:et,onChange:st("creditLimit")})]}),Object(g.jsxs)("div",{className:"px-1 ",children:[Object(g.jsx)("label",{children:"  Payment Terms "}),Object(g.jsx)("input",{className:"form-control",type:"number",name:"paymentTerms",placeholder:"0",value:tt,onChange:st("paymentTerms")}),Object(g.jsx)("span",{className:"input-group-text",children:"Days"})]}),Object(g.jsxs)("div",{className:" px-2  ",children:[Object(g.jsx)("label",{className:"",children:"Opening Balance"}),Object(g.jsx)("input",{className:"form-control ",type:"number",name:"balance",placeholder:"0",value:nt,onChange:st("balance")}),Object(g.jsxs)("span",{className:"d-flex flex-row",children:[Object(g.jsxs)("div",{className:"form-check form-check-inline",children:[Object(g.jsx)("input",{className:"form-check-input",type:"radio",onChange:st("drcr"),name:"drcr",value:"dr",checked:!0}),Object(g.jsx)("label",{className:"form-check-label",for:"flexRadioDefault1",children:"Dr       "})]}),Object(g.jsxs)("div",{className:"form-check form-check-inline",children:[Object(g.jsx)("input",{className:"form-check-input",type:"radio",onChange:st("drcr"),name:"drcr",value:"cr"}),Object(g.jsx)("label",{className:"form-check-label",for:"flexRadioDefault2",children:"cr"})]})]})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-row align-items-end fs-4 border-dark border-bottom pb-2 ",children:[Object(g.jsx)("div",{id:"self",className:"btn ",onClick:function(){return function(){var e=document.getElementById("billTo");e.classList.remove("d-none"),e.classList.add("d-block"),document.getElementById("self").classList.add("d-none")}()},children:"Bill To :  self"}),Object(g.jsx)("div",{className:"w-75 d-none",id:"billTo",children:Object(g.jsx)(Zn,{className:"form-select ",label:"Bill To",name:"billTo",value:Qe,options:Pe,onChange:st("billTo")})}),Object(g.jsx)(qn.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.2rem",padding:"0.5rem"},children:"Send Bill to other Company or Doctor instead of the present Client"}),children:Object(g.jsx)(Gn.a,{children:Object(g.jsx)(Kn.a,{sx:{fontSize:30}})})})]}),Object(g.jsx)("div",{className:"border-dark border-bottom pb-2  ",children:Object(g.jsx)(Zn,{type:"text",label:"Category",name:"category",value:at,onChange:st("category"),style:{color:"#5c5c5c"},options:[{value:"Select associated category"},{value:"Favourite Clients"},{value:"International"},{value:"Laboratory"},{value:"Out Of State"},{value:"Regular"},{value:"Sensitive"},{value:"Vora"}]})}),Object(g.jsxs)("div",{className:"border-dark border-bottom pb-2 ",children:[Object(g.jsx)("label",{children:"Notes "}),Object(g.jsx)("input",{className:"form-control",type:"text",name:"notes",value:rt,onChange:st("notes")})]})]})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-end my-3",children:[Object(g.jsxs)("button",{className:"btn btn-info fs-3 mx-3  px-5",type:"submit",onClick:Ee,children:["Save",Y?" changes":""]}),Object(g.jsx)("button",{className:"btn btn-info fs-3 mx-3",type:"submit",onClick:function(e){$(!0),Ee(e)},children:"Save and New Order"}),Object(g.jsx)("button",{className:"btn btn-info fs-3 mx-3",onClick:function(){t.go(-1),o(null)},children:"Cancel"})]}),W&&Object(g.jsx)(C,{children:"Client created successfully"}),F&&Object(g.jsx)(C,{children:"Error while saving Client data!"})]})]})]})},cc=n(362),rc=n.n(cc),ac=function(e){var t=e.products,n=(e.fetchProducts,e.onEditProduct),c=e.onDeleteProduct;console.log("Products received  in table:",t);return Object(g.jsx)("div",{className:"container ",children:Object(g.jsx)(W.a,{columns:[{title:"Product",field:"name",cellStyle:{fontSize:"1.8rem"},defaultSort:"asc"}],data:t,icons:ge,title:"Products",actions:[{icon:function(){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Edit Product"}),children:Object(g.jsx)(Dt.a,{sx:{fontSize:30}})})},onClick:function(e,t){n(t)}},{icon:function(){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Delete Product"}),children:Object(g.jsx)(rc.a,{sx:{fontSize:30}})})},onClick:function(e,t){var n;n=t,window.confirm("Are You sure you want to delete the Product type ?")&&c(n)}}],options:{padding:"dense",filtering:!0,pageSizeOptions:[10,20,50],paginationType:"stepped",exportAllData:!0,exportFileName:"productdata",actionsColumnIndex:2,headerStyle:{backgroundColor:"#01579b",color:"#fff",fontSize:"1.5rem"},style:{fontSize:"2rem"}}})})},ic=function(e){e.categories;var t=e.productTypes,n=e.fetchProducts,r=e.productToEdit,a=e.onCancel,i=(Object(u.g)(),Object(c.useState)({name:"",code:"",warranty:"",productType:"MISC",cpDays:"",price:0,isSlab:!1,slEnd1:"",s1Price:"",slEnd2:"",s2Price:"",s3Price:""})),o=Object(j.a)(i,2),s=o[0],l=o[1],d=Object(c.useState)(!1),b=Object(j.a)(d,2),O=b[0],m=b[1],p=Object(c.useState)(""),v=Object(j.a)(p,2),y=v[0],w=v[1],N=Object(c.useState)(!1),S=Object(j.a)(N,2),C=S[0],D=S[1],k=Object(c.useState)(!1),T=Object(j.a)(k,2),P=T[0],A=T[1],E=Object(c.useContext)(bt),I=E.user,z=E.token;Object(c.useEffect)((function(){r&&(A(!0),l({_id:r._id,name:r.name,code:r.code,warranty:r.warranty,productType:r.productType.name,productTypeId:r.productType.productTypeId,price:r.price,isSlab:r.slabPrice,slEnd1:r.slab1.end,s1Price:r.slab1.s1price,slEnd2:r.slab2.end,s2Price:r.slab2.s2price,s3Price:r.slab3.s3price,priceband:r.priceband,cpDays:r.cpDays}),console.log("Editing mode On :::::::::::::::"))}),[]);var F=s.name,R=s.code,_=s.warranty,B=s.productType,L=(s.productTypeId,s.cpDays),M=s.price,U=s.isSlab,V=s.slEnd1,G=s.s1Price,W=s.slEnd2,J=s.s2Price,H=s.s3Price,q=function(e){return function(t){t.preventDefault();var n=t.target.value;l(Object(h.a)(Object(h.a)({},s),{},Object(f.a)({},e,n)))}};return Object(g.jsxs)("div",{className:"container ",children:[Object(g.jsx)("h1",{children:" Add New Product"}),C&&Object(g.jsx)("div",{className:"fs-3 text-danger",children:y}),Object(g.jsx)("div",{className:"d-flex",children:Object(g.jsxs)("form",{children:[Object(g.jsxs)("div",{className:"d-flex flex-row",children:[Object(g.jsxs)("div",{className:"form-group w-50 fs-4",children:[Object(g.jsx)("label",{htmlFor:"name",children:"Name"}),Object(g.jsx)("input",{className:"",type:"text",name:"name",value:F,onChange:q("name")})]}),Object(g.jsxs)("div",{className:"form-group mx-2 fs-4",children:[Object(g.jsx)("label",{htmlFor:"code",children:"code"}),Object(g.jsx)("input",{className:"",type:"text",name:"code",value:R,onChange:q("code")})]}),Object(g.jsxs)("div",{className:"form-group mx-2 fs-4",children:[Object(g.jsx)("label",{htmlFor:"warranty",children:"Warranty"}),Object(g.jsxs)("div",{className:"d-flex flex-row",children:[Object(g.jsx)("input",{className:"w-50",type:"number",name:"warranty",value:_,defaultValue:"0",placeholder:"0",onChange:q("warranty")}),Object(g.jsx)("span",{className:"w-50 px-2",children:"years"})]})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(g.jsxs)("div",{className:"form-group  w-50",children:[Object(g.jsx)("label",{className:"fs-4",children:"Type"}),Object(g.jsxs)("select",{name:"productType",value:B,onChange:q("productType"),defaultValue:"MISC",className:"form-select fs-4 ",children:[Object(g.jsx)("option",{children:"Select Type"}),t.length>0&&t.map((function(e){return Object(g.jsx)("option",{value:e.name,children:e.name},e._id)}))]})]}),Object(g.jsxs)("div",{className:"form-group w-25 fs-4",children:[Object(g.jsx)("label",{htmlFor:"name",children:"Completion Period"}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("input",{className:"col",type:"number",name:"cpDays",defaultValue:"5",placeholder:"5",value:L,onChange:q("cpDays")}),Object(g.jsx)("span",{className:"col",children:"Days"})]})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(g.jsxs)("div",{className:"form-group w-25 mx-2 fs-4",children:[Object(g.jsx)("label",{htmlFor:"code",children:"Standard Charge"}),Object(g.jsx)("input",{className:"",type:"text",name:"price",value:M,onChange:q("price")})]}),Object(g.jsxs)("div",{className:"form-check fs-4 mx-3",children:[Object(g.jsx)("input",{className:"form-check-input",type:"checkbox",value:U,cheked:U,onClick:function(){l(U?Object(h.a)(Object(h.a)({},s),{},{isSlab:!1}):Object(h.a)(Object(h.a)({},s),{},{isSlab:!0}))}}),Object(g.jsx)("label",{class:"form-check-label",for:"flexCheckDefault",children:"use Slab Pricing"})]})]}),U&&Object(g.jsxs)("div",{className:"border border-dark rounded fs-4  px-3",children:[Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-around py-2 mx-2 ",children:[Object(g.jsxs)("div",{className:"d-flex flex-row ",children:[Object(g.jsx)("div",{className:"w-75",children:" First "}),Object(g.jsx)("input",{className:"form-control w-25 mx-2",name:"slEnd1",value:V,onChange:q("slEnd1")})]}),Object(g.jsxs)("div",{className:"d-flex flex-row ",children:[Object(g.jsx)("div",{className:"w-75",children:" Units@ "}),Object(g.jsx)("input",{className:"form-control w-25",name:"s1Price",value:G,onChange:q("s1Price")})]}),Object(g.jsx)("div",{children:"Per Unit"})]}),Object(g.jsx)("div",{className:"btn btn-info px-3 fs-2 text-white",onClick:function(){m(!0)},children:Object(g.jsx)("strong",{children:"+"})})]}),O&&Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-around  py-2",children:[Object(g.jsxs)("div",{className:"d-flex flex-row ",children:[Object(g.jsx)("div",{className:"w-75",children:"  Next"}),Object(g.jsx)("input",{className:"form-control w-25 mx-2",name:"slEnd2",value:W,onChange:q("slEnd2")})]}),Object(g.jsxs)("div",{className:"d-flex flex-row ",children:[Object(g.jsx)("div",{className:"w-75",children:" Units@ "}),Object(g.jsx)("input",{className:"form-control w-25",name:"s2Price",value:J,onChange:q("s2Price")})]}),Object(g.jsx)("div",{children:"Per Unit"})]}),Object(g.jsxs)("div",{className:"d-flex flex-row  py-2",children:[Object(g.jsx)("div",{className:"w-50 ",children:"Remaining Units@"}),Object(g.jsx)("div",{className:"w-25 ",children:Object(g.jsx)("input",{className:"form-control",name:"s3Price",value:H,onChange:q("s3Price")})}),Object(g.jsx)("div",{className:"px-2",children:"Per Unit"})]})]}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-end mt-3",children:[Object(g.jsx)("button",{className:"btn btn-info mx-3 fs-3 text-white",onClick:function(e){e.preventDefault();var c=t.filter((function(e){return e.name===B})),a={name:F,code:R,warranty:_,productType:{name:B,_id:c[0]._id},price:M,slabPrice:U,slab1:{end:V,s1price:G},slab2:{end:W,s2price:J},slab3:{s3price:H},priceband:"",cpDays:L};P?(a._id=r._id,Re(I._id,z,a).then((function(e){200!==e.status?(w("Error in updating Product Type"),D(!0),setTimeout((function(){return D(!1)}),2e3)):(A(!1),w("Prduct Types updated successfully"),D(!0),setTimeout((function(){return D(!1)}),2e3),n(),l({name:"",code:"",warranty:"",productType:"MISC",productTypeId:"",cpDays:"",price:0,isSlab:!1,slEnd1:"",s1Price:"",slEnd2:"",s2Price:"",s3Price:""}))})).catch((function(e){w("Error in updating Product Type"),D(!0),setTimeout((function(){return D(!1)}),2e3)}))):function(e,t,n){return console.log("Product Received in index to save ",n),fetch("".concat(x,"/products/create/").concat(e),{method:"POST",headers:{"content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(n)}).then((function(e){return e})).catch((function(e){return e}))}(I._id,z,a).then((function(e){200!==e.status?(w("Error in Saving Product Type"),D(!0),setTimeout((function(){return D(!1)}),2e3)):(w("Prduct Types saved successfully"),D(!0),setTimeout((function(){return D(!1)}),2e3),n(),l({name:"",code:"",warranty:"",productType:"MISC",productTypeId:"",cpDays:"",price:0,isSlab:!1,slEnd1:"",s1Price:"",slEnd2:"",s2Price:"",s3Price:""}))})).catch((function(e){w("Error in Saving Product Type"),D(!0),setTimeout((function(){return D(!1)}),2e3)}))},children:"Save"}),Object(g.jsx)("button",{className:"btn btn-info mx-3 fs-3 text-white",onClick:a,children:"Cancel"})]})]})})]})},oc=n(454),sc=function(e){var t=e.categories,n=e.productTypes,r=e.fetchProductTypes,a=Object(c.useContext)(bt),i=a.user,o=a.token,s=Object(c.useState)({name:"",category:"",categoryId:""}),l=Object(j.a)(s,2),d=l[0],u=l[1],b=d._id,x=d.name,O=d.category,m=d.categoryId,p=Object(c.useState)(""),v=Object(j.a)(p,2),y=v[0],w=v[1],N=Object(c.useState)(!1),S=Object(j.a)(N,2),C=S[0],D=S[1],k=Object(c.useState)(!1),T=Object(j.a)(k,2),P=T[0],A=T[1],E=function(e){return function(t){t.preventDefault();var n=t.target.value;u(Object(h.a)(Object(h.a)({},d),{},Object(f.a)({},e,n)))}},I=function(e){console.log("Product to be deleted : ",e),ze(e,i._id,o).then((function(e){200!==e.status?(w("Error deleting Product Type"),D(!0),setTimeout((function(){return D(!1)}),2e3)):(w("Product Type was deleted successfully"),D(!0),setTimeout((function(){return D(!1)}),2e3),r(),u({name:"",category:"",categoryId:""}))})).catch((function(e){w("Error deleting Product Type"),D(!0),setTimeout((function(){return D(!1)}),2e3)}))},z=function(){if(P){console.log("Editing Product type ",d);var e={_id:b,name:x,category:{name:O,_id:m}};console.log(" update values : ",e),Ie(i._id,o,e).then((function(e){200!==e.status?(w("Error in Saving Product Type"),D(!0),setTimeout((function(){return D(!1)}),2e3)):(w("Prduct Type updated successfully"),D(!0),setTimeout((function(){return D(!1)}),2e3),r(),u({name:"",category:"",categoryId:""}))})).catch((function(e){w("Error in Saving Product Type"),D(!0),setTimeout((function(){return D(!1)}),2e3)})),A(!1)}else{var n=t.filter((function(e){return e.name===O})),c={name:x,category:Object(h.a)({},n[0])};Ae(i._id,o,c).then((function(e){200!==e.status?(w("Error in Saving Product Type"),D(!0),setTimeout((function(){return D(!1)}),2e3)):(w("Prduct Types saved successfully"),D(!0),setTimeout((function(){return D(!1)}),2e3),r(),u({name:"",categoryId:""}))})).catch((function(e){w("Error in Saving Product Type"),D(!0),setTimeout((function(){return D(!1)}),2e3)}))}};return Object(g.jsxs)("div",{className:"container-fluid",children:[Object(g.jsx)("h2",{children:"Product Type"}),Object(g.jsx)("div",{className:" mx-auto",children:Object(g.jsx)("form",{children:Object(g.jsxs)("div",{className:"border border-dark p-3 ",children:[C&&Object(g.jsx)("div",{className:"fs-3 text-danger",children:y}),Object(g.jsxs)("div",{className:"d-flex flex-column flex-md-row justify-content-around ",children:[Object(g.jsxs)("div",{className:" form-group ",children:[Object(g.jsx)("label",{className:"fs-4",children:"Name"}),Object(g.jsx)("input",{type:"text",className:"form-control",value:x,onChange:E("name")})]}),Object(g.jsxs)("div",{className:" form-group mx-2",children:[Object(g.jsx)("label",{className:"fs-4",children:"Category"}),Object(g.jsxs)("select",{name:"category",className:"fs-3 form-select",value:O,onChange:E("category"),children:[Object(g.jsx)("option",{children:"Select Category"}),t.length>0&&t.map((function(e){return Object(g.jsx)("option",{value:e.name,children:e.name},e._id)}))]})]}),Object(g.jsx)("div",{className:"btn btn-info fs-3 text-white px-3",onClick:z,children:"Save"})]})]})})}),Object(g.jsx)("div",{className:"my-3",children:Object(g.jsx)("div",{className:"container-fluid  ",children:n.length>0&&Object(g.jsx)("ul",{children:n.map((function(e){return Object(g.jsx)("li",{children:Object(g.jsxs)("div",{className:"row  ",children:[Object(g.jsx)("div",{className:"col-8 border border-dark fs-3",onClick:function(){u({_id:e._id,name:e.name,category:e.category.name,categoryId:e.category._id})},children:e.name}),Object(g.jsxs)("div",{className:"col-2 border border-dark ",onClick:function(){A(!0),u({_id:e._id,name:e.name,category:e.category.name,categoryId:e.category._id}),console.log("Set Edit : ",P)},children:["            ",Object(g.jsx)(oc.a,{children:Object(g.jsx)(Dt.a,{sx:{fontSize:30}})})]}),Object(g.jsx)("div",{className:"col-2 border border-dark",onClick:function(){return function(e){window.confirm("Are You sure you want to delete the Product type ?")&&I(e)}(e)},children:Object(g.jsxs)(oc.a,{children:["   ",Object(g.jsx)(rc.a,{sx:{fontSize:30}})]})})]})},e._id)}))})})})]})},lc=function(e){var t=e.categories,n=(e.fetchCategories,Object(c.useState)("")),r=Object(j.a)(n,2),a=r[0],i=r[1],o=Object(c.useState)(!1),s=Object(j.a)(o,2),l=s[0],d=s[1],u=Object(c.useState)(!1),b=Object(j.a)(u,2),f=b[0],h=b[1],O=Object(c.useState)(""),m=Object(j.a)(O,2),p=m[0],v=m[1],y=Object(c.useState)(!1),w=Object(j.a)(y,2),N=(w[0],w[1],Object(c.useContext)(bt)),S=N.user,C=N.token;return Object(g.jsxs)("div",{className:"w-50",children:[Object(g.jsx)("div",{className:"btn btn-info m-3 fs-4",onClick:function(){console.log("Hi i m clicked"),d(!0)},children:"Add New Category"}),f&&Object(g.jsx)("div",{className:"fs-4 text-danger",children:p}),t.length>0&&Object(g.jsx)("ul",{children:t.map((function(e){return Object(g.jsx)("li",{className:"border border-dark fs-3 p-3",children:e.name},e._id)}))}),l&&Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)("form",{children:Object(g.jsxs)("div",{className:"form-group fs-4",children:[Object(g.jsx)("label",{children:"Category Name "}),Object(g.jsx)("span",{children:Object(g.jsx)("input",{className:"form-group",type:"text",value:a,onChange:function(e){i(e.target.value)}})})]})}),Object(g.jsx)("div",{className:"btn btn-info fs-4",onClick:function(){console.log("Category to be saved : ",a),function(e,t,n){return fetch("".concat(x,"/category/create"),{method:"POST",headers:{"content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(n)}).then((function(e){return e})).catch((function(e){return e}))}(S._id,C,{name:a}).then((function(e){200!==e.status?(v("Error while creating new category"),h(!0),setTimeout((function(){return h(!1)}),2e3)):(v("category created successfully"),h(!0),setTimeout((function(){return h(!1)}),2e3),Be(),i(""))})).catch((function(e){v("Error while creating new category"),h(!0),setTimeout((function(){return h(!1)}),2e3)}))},children:"Save"})]})]})},dc=(n(1311),function(e){var t=Object(c.useState)(!0),n=Object(j.a)(t,2),r=(n[0],n[1],Object(c.useState)(!0)),a=Object(j.a)(r,2),i=(a[0],a[1],Object(c.useState)([])),o=Object(j.a)(i,2),s=o[0],u=o[1],b=Object(c.useState)([]),f=Object(j.a)(b,2),h=f[0],x=f[1],O=Object(c.useState)(null),m=Object(j.a)(O,2),p=m[0],v=m[1],y=Object(c.useState)([]),N=Object(j.a)(y,2),S=N[0],C=N[1],D=Object(c.useContext)(bt),k=D.user,T=D.token,P=Object(c.useState)({error:"",loading:!1}),A=Object(j.a)(P,2),E=(A[0],A[1]),I=Object(c.useState)(""),z=Object(j.a)(I,2),F=z[0],R=z[1],_=Object(c.useState)(!1),B=Object(j.a)(_,2),L=B[0],M=B[1],U=Object(c.useState)(1),V=Object(j.a)(U,2),G=V[0],W=V[1],J=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E({error:"",loading:!0}),e.next=3,Fe(k._id,T).then((function(e){e.error?E({error:e.error,loading:!1}):(E({error:"",loading:!1}),C(e))})).catch((function(e){E({error:e,loading:!1})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be();case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee();case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(k._id,T,t).then((function(e){R("Product  was deleted successfully"),M(!0),setTimeout((function(){return M(!1)}),2e3),J()})).catch((function(e){R("Error deleting Product"),M(!0),setTimeout((function(){return M(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){J(),H(),q()}),[p]),Object(g.jsxs)("div",{children:[Object(g.jsx)(w,{}),Object(g.jsxs)("div",{className:" container-100-mdx60-xlx50 ",children:[Object(g.jsxs)("div",{className:"d-flex flex-row  justify-content-around  ",style:{backgroundColor:"dodgerblue"},children:[Object(g.jsx)("div",{className:"btn  text-white fs-3 p-2",style:1===G?{backgroundColor:"tomato"}:{backgroundColor:"dodgerblue"},onClick:function(){W(1)},children:"Products"}),Object(g.jsx)("div",{className:"btn  text-white fs-3 p-2",style:2===G?{backgroundColor:"tomato"}:{backgroundColor:"dodgerblue"},onClick:function(){W(2)},children:"Product Types"}),Object(g.jsx)("div",{className:"btn  text-white fs-3 p-2",style:3===G?{backgroundColor:"tomato"}:{backgroundColor:"dodgerblue"},onClick:function(){W(3)},children:"Add New Product"}),Object(g.jsx)("div",{className:"btn  text-white fs-3 p-2",style:4===G?{backgroundColor:"tomato"}:{backgroundColor:"dodgerblue"},onClick:function(){W(4)},children:"Category"})]}),Object(g.jsxs)("div",{className:"p-5",children:[L&&Object(g.jsx)("div",{className:"fs-3 text-danger",children:F}),2===G&&Object(g.jsx)(sc,{categories:s,productTypes:h,fetchProductTypes:q}),3===G&&Object(g.jsx)(ic,{categories:s,productTypes:h,productToEdit:p,fetchProducts:J,onCancel:function(){v(null),W(1)}}),1===G&&Object(g.jsx)(ac,{products:S,fetchProducts:J,onEditProduct:function(e){v(e),W(3)},onDeleteProduct:Y}),4===G&&Object(g.jsx)(lc,{categories:s,fetchCategories:H})]})]})]})}),jc=function(e){return Object(g.jsxs)("div",{children:[Object(g.jsx)(w,{}),"Shipment Page is under construction"]})},uc=n(266),bc=n.n(uc),fc=n(363),hc=n.n(fc),xc=n(364),Oc=n.n(xc),mc=r.a.createContext();mc.displayName="AdjustmentContext";var pc=mc,vc=n(138),gc=n.n(vc),yc=function(e){var t=[];return e.length>0&&e.forEach((function(e,n){var c=function(e){return e.slice(0,1)}(e),r=function(e){return e.slice(1)}(e);"1"==c?t[1]=(t[1]?t[1]:"")+""+r:"2"==c?t[2]=(t[2]?t[2]:"")+""+r:"3"==c?t[3]=(t[3]?t[3]:"")+""+r:"4"==c&&(t[4]=(t[4]?t[4]:"")+""+r)})),t},wc=function(e){var t=e.invoice,n=Object(c.useContext)(V).orders,r=Object(c.useContext)(R).clients,a=Object(c.useContext)(pc).adjustments,i=function(){var e,c=n.filter((function(e){return t.ordersList.includes(e._id)})),i=Object(Ft.a)(c),o=r.filter((function(e){return t.clientId===e._id})),s=0,l={};t.adjustmentNo&&(e=t.adjustmentNo,l=a.filter((function(t){return t.adjNo===e}))[0]),console.log("Adjustment Found :",l),c.forEach((function(e,t){var n,c=[],r=[],a=0;e.products.length>0&&e.products.forEach((function(e){c.push(" ".concat(e.product)),e.teethSelected.length>0&&(r=[].concat(Object(Ft.a)(r),Object(Ft.a)(e.teethSelected))),a+=e.teethSelected.length})),i[t].productsList=c.join(),i[t].teethSelected=Object(Ft.a)(r),i[t].units=a,s+=a,n=yc(i[t].teethSelected),i[t].teethList=Object(Ft.a)(n)})),console.log("Invoice Value sent for  Print :",Object(h.a)(Object(h.a)({},t),{},{discount:l.amount,totalunits:s,ordersList:i,clientDetail:o})),ln(Object(h.a)(Object(h.a)({},t),{},{discount:l.amount,totalunits:s,ordersList:i,clientDetail:o}))};return Object(g.jsx)("div",{children:Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Print Invoice"}),children:Object(g.jsx)(gc.a,{sx:{fontSize:30},onClick:function(){i()}})})})},Nc=Object(ft.a)({root:{backgroundColor:"blue",color:"green"},toolbar:{backgroundColor:"white"},caption:{color:"black",fontSize:"20px"},selectIcon:{color:"blue",fontSize:"2rem"},select:{color:"blue",fontSize:"2rem"},actions:{color:"blue"}}),Sc=function(e){var t=e.invoices,n=e.onInvoiceSelect,r=e.path,a=Nc(),i=Object(u.g)(),o=Object(c.useContext)(Nn),s=(o.invoiceSelected,o.setInvoiceSelected),l=Object(c.useContext)(R),d=l.clients,f=l.setClientSelected,x=l.onClientSelect,O=Object(c.useState)(""),m=Object(j.a)(O,2),p=(m[0],m[1]),v=(Object(c.useContext)(V).orders,Object(c.useState)([])),y=Object(j.a)(v,2),w=y[0],N=y[1],S=Object(c.useState)([]),C=Object(j.a)(S,2),D=C[0],k=C[1],T=function(e){return d.filter((function(t){return t._id===e}))[0]},P=function(e){p(e.target.value)},A=[{title:"Invoice#",field:"invoiceNo",cellStyle:{fontSize:"1.6rem"},render:function(e){return Object(g.jsx)(b.b,{style:{textDecoration:"none"},to:r,onClick:function(){f(T(e.clientId)),s(e),n(e)},children:e.invoiceNo})}},{title:"Invoice Date",field:"invoiceDate",cellStyle:{fontSize:"1.6rem"},render:function(e){return Object(g.jsx)("div",{children:new Intl.DateTimeFormat("en-GB").format(new Date(e.invoiceDate))})}},{title:"Client",field:"client",cellStyle:{fontSize:"1.6rem"},render:function(e){return Object(g.jsx)(b.b,{to:"/client/clientprofile",style:{textDecoration:"none"},onClick:function(){x(T(e.clientId))},children:e.client.toUpperCase()})}},{title:"Amount",field:"amount",cellStyle:{fontSize:"1.6rem"}},{title:"Due Date",field:"invoiceDueDate",cellStyle:{fontSize:"1.6rem"}},{title:"Paid",field:"paid",cellStyle:{fontSize:"1.6rem"}},{title:"Balance",field:"balance",cellStyle:{fontSize:"1.6rem"},render:function(e){return Object(g.jsx)("div",{style:e.drcr?{color:"green"}:{color:"red"},children:e.balance})}},{title:"Actions",field:"",maxWidth:"15px",render:function(e){return Object(g.jsx)(b.b,{target:"_blank",style:{color:"#000"},to:"/print/invoice/".concat(e._id),children:Object(g.jsx)(wc,{invoice:e})})}},{title:"",field:"",maxWidth:"15px",render:function(e){return Object(g.jsx)(b.b,{style:{textDecoration:"none",color:"#000"},to:r,onClick:function(){f(T(e.clientId)),s(e),n(e)},children:Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Edit"}),children:Object(g.jsx)(Dt.a,{sx:{fontSize:30}})})})}}];return Object(c.useEffect)((function(){k(t),N(t)}),[]),Object(g.jsxs)("div",{className:"container-fluid",children:[Object(g.jsx)("div",{className:"fs-4",children:"Invoice Date"}),Object(g.jsx)(Ot,{data:w,onUpdate:function(e){k(e)},searchField:"invoiceDate"}),t.length>0&&Object(g.jsx)(W.a,{columns:A,data:D,icons:ge,title:"INVOICE TABLE",actions:[{icon:function(){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Email"}),children:Object(g.jsx)(bc.a,{sx:{fontSize:30}})})},onClick:function(e,t){console.log(t)}},{icon:function(){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"sms"}),children:Object(g.jsx)(hc.a,{sx:{fontSize:30}})})},onClick:function(e,t){s(t),i.push("/invoice/newinvoice")}},{icon:function(){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"WhatsApp"}),children:Object(g.jsx)(Oc.a,{sx:{fontSize:30}})})},onClick:function(e,t){console.log(t)}}],components:{Toolbar:function(e){return Object(g.jsxs)("div",{style:{padding:"10px 0px"},children:[Object(g.jsx)(G.MTableToolbar,Object(h.a)({},e)),Object(g.jsx)("div",{children:Object(g.jsxs)("select",{name:"search",className:"fs-4 px-3 mx-3",onChange:P,children:[Object(g.jsx)("option",{value:"",children:"Last 1 week"}),Object(g.jsx)("option",{value:""}),Object(g.jsx)("option",{value:""}),Object(g.jsx)("option",{value:""}),Object(g.jsx)("option",{value:""}),Object(g.jsx)("option",{value:""})]})})]})},Pagination:function(e){return Object(g.jsx)(ye.a,{component:"div",colSpan:e.colSpan,count:e.count,rowsPerPage:e.rowsPerPage,page:e.page,onChangePage:e.onChangePage,onChangeRowsPerPage:e.onChangeRowsPerPage,classes:{root:a.root,toolbar:a.toolbar,caption:a.caption,selectIcon:a.selectIcon,select:a.select,actions:a.actions}})}},options:{filtering:!0,pageSize:50,padding:"dense",actionsColumnIndex:-1,pageSizeOptions:[10,20,50,100],paginationType:"stepped",exportAllData:!0,exportFileName:"orderdata",columnsButton:!0,rowStyle:function(e,t){return t%2==0?{background:"#f2f2f2"}:null},showTextRowsSelected:!1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontSize:"1.5rem"},style:{fontSize:"1.5rem"}}}),0===t.length&&Object(g.jsx)("div",{className:"fs-3 text-center",children:"No Invoices found "})]})},Cc=Object(u.h)((function(e){var t=e.history,n=function(e,t){return e.location.pathname===t?{backgroundColor:"#0b8df7"}:{color:"#FFFFFF"}};return Object(g.jsx)("div",{className:"",children:Object(g.jsxs)("div",{className:"d-flex flex-row  flex-wrap bg-info",children:[Object(g.jsx)(b.b,{className:"btn btn-info fs-4 text-white px-3 py-2 mx-2 ",style:n(t,"/accounts/invoices"),to:"/accounts/invoices",children:"Invoices     "}),Object(g.jsx)(b.b,{className:"btn btn-info fs-4 text-white px-3 py-2 mx-2 ",style:n(t,"/accounts/collections"),to:"/accounts/collections",children:"Collections  "}),Object(g.jsx)(b.b,{className:"btn btn-info fs-4 text-white px-3 py-2 mx-2 ",style:n(t,"/accounts/receipt"),to:"/accounts/receipt",children:"Payment      "}),Object(g.jsx)(b.b,{className:"btn btn-info fs-4 text-white px-3 py-2 mx-2 ",style:n(t,"/accounts/adjustments"),to:"/accounts/adjustments",children:"Adjustments  "}),Object(g.jsx)(b.b,{className:"btn btn-info fs-4 text-white px-3 py-2 mx-2 ",style:n(t,"/accounts/manage"),to:"/accounts/manage",children:"Manage       "})]})})})),Dc=n(259),kc=n.n(Dc),Tc=Object(ft.a)({root:{backgroundColor:"blue",color:"green"},toolbar:{backgroundColor:"white"},caption:{color:"black",fontSize:"20px"},selectIcon:{color:"blue",fontSize:"2rem"},select:{color:"blue",fontSize:"2rem"},actions:{color:"blue"}}),Pc=function(e){var t=e.rOrders,n=e.onRowSelect,r=e.showAction,a=Tc(),i=Object(c.useContext)(V),o=(i.orders,i.setOrderSelected),s=Object(c.useContext)(R),l=(s.clients,s.setClientSelected,function(e){var t=[];return e.length>0&&e.forEach((function(e){return t.push("".concat(e.product," - ").concat(e.units))})),t.join()}),d=[{title:"Order#",field:"orderNo",maxWidth:"5rem",render:function(e){return r?Object(g.jsx)("div",{children:e.orderNo}):Object(g.jsx)(b.b,{style:{textDecoration:"none"},to:"order/newOrder",onClick:function(){o(e)},children:e.orderNo})}},{title:"Order Date",field:"orderDate",maxWidth:"8rem",render:function(e){return Object(g.jsx)("div",{children:new Intl.DateTimeFormat("en-GB").format(new Date(e.orderDate))})}},{title:"Client",field:"client",render:function(e){return Object(g.jsx)("div",{children:e.client.toUpperCase()})}},{title:"patient",field:"patient",maxWidth:"12rem"},{title:"products",field:"",render:function(e){return Object(g.jsx)("div",{children:l(e.products)})}},{title:"Order Amount",field:"orderAmount",maxWidth:"7rem"}];return Object(c.useEffect)((function(){}),[]),Object(g.jsx)("div",{className:"container-fluid",children:Object(g.jsx)("div",{className:"border border-info fs-4 mx-auto my-2   ",children:Object(g.jsx)(W.a,{columns:d,data:t,icons:ge,title:"Orders",actions:[r&&{icon:function(){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Cancel"}),children:Object(g.jsx)(kc.a,{sx:{fontSize:25}})})},onClick:function(e,t){n(t)}}],components:{Pagination:function(e){return console.log(e),Object(g.jsx)(ye.a,{component:"div",colSpan:e.colSpan,count:e.count,rowsPerPage:e.rowsPerPage,page:e.page,onChangePage:e.onChangePage,onChangeRowsPerPage:e.onChangeRowsPerPage,classes:{root:a.root,toolbar:a.toolbar,caption:a.caption,selectIcon:a.selectIcon,select:a.select,actions:a.actions}})}},options:{filtering:!1,padding:"dense",pageSize:5,search:!1,actionsColumnIndex:6,pageSizeOptions:[5,10,20,50,100],paginationType:"stepped",exportAllData:!0,exportFileName:"orderdata",selection:!1,showTextRowsSelected:!1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontSize:"1.5rem"},style:{fontSize:"1.5rem"}}})})})},Ac=function(e){var t=e.invoice,n=e.onAdjustmentCancel,r=Object(c.useContext)(R),a=r.setClientSelected,i=r.clientSelected,o=Object(c.useContext)(bt),s=o.user,u=o.token,b=Object(c.useState)(t),x=Object(j.a)(b,2),O=x[0],m=(x[1],Object(c.useState)()),p=Object(j.a)(m,2),v=p[0],y=p[1],w=Object(c.useState)(""),N=Object(j.a)(w,2),S=N[0],C=N[1],D=Object(c.useState)(!1),k=Object(j.a)(D,2),T=k[0],P=k[1],A=Object(c.useState)({amount:0,adjDate:new Date,adjNo:"",adjType:"Discount",notes:"",client:"",invoice:""}),E=Object(j.a)(A,2),I=E[0],z=E[1],F=function(e){return function(t){z(Object(h.a)(Object(h.a)({},I),{},Object(f.a)({},e,t.target.value))),console.log("".concat(e," : ").concat(t.target.value))}},_=I.amount,B=I.adjDate,L=I.adjNo,M=I.adjType,U=I.notes,V=function(e){var t=e.toString(),n=t.length;if(n<6)for(var c=0;c<6-n;c++)t="0"+t;return t},G=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De().then((function(e){y(V(e.sequence_val)),console.log("Adjustment Number :",e.sequence_val)})).catch((function(e){C("Error in sequence"),P(!0),setTimeout((function(){return P(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){G(),z(Object(h.a)(Object(h.a)({},I),{},{adjNo:v}))}),[]),Object(g.jsx)("div",{children:O&&Object(g.jsxs)("div",{className:" container  my-5 border border-dark",style:{maxWidth:"fit-content",marginLeft:0},children:[Object(g.jsx)("h2",{children:Object(g.jsxs)("b",{children:["Apply Credit Adjustment to Invoice# : ",O.invoiceNo]})}),T&&Object(g.jsx)("div",{className:"fs-4 text-red",children:S}),Object(g.jsxs)("div",{className:"d-flex flex-column flex-md-row   fs-4 ",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:"Amount"}),Object(g.jsx)("input",{type:"number",value:_,onChange:F("amount")})]}),Object(g.jsxs)("div",{className:"mx-4",children:[Object(g.jsx)("div",{children:"Adjustment Date"}),Object(g.jsx)("input",{type:"date",value:B,onChange:F("adjDate")})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:"Reference#"}),Object(g.jsx)("input",{type:"text",value:L})]})]}),Object(g.jsxs)("div",{className:"fs-4",children:[Object(g.jsx)("div",{children:"Adjustment Type"}),Object(g.jsxs)("select",{type:"text",value:M,onChange:F("adjType"),children:[Object(g.jsx)("option",{value:"Discount",children:"Discount"}),Object(g.jsx)("option",{value:"Early Payment Discount",children:"Early Payment Discount"}),Object(g.jsx)("option",{value:"Sales Return",children:"Sales Return"}),Object(g.jsx)("option",{value:"Write Off",children:"Write Off"})]})]}),Object(g.jsxs)("div",{className:"fs-4",children:[Object(g.jsx)("div",{children:"Notes"}),Object(g.jsx)("input",{type:"text",value:U,onChange:F("notes")})]}),Object(g.jsx)("hr",{}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-end my-2",children:[_>0&&O&&Object(g.jsx)("div",{className:"btn btn-info  fs-4 mx-5",onClick:function(){var e=Object(h.a)(Object(h.a)({},I),{},{adjNo:v,invoice:O._id,client:i._id});console.log("New Values Adjustment to save ",e),He(s._id,u,e).then((function(e){e.error&&window.alert("Error Saving new Adjustment")})).catch((function(e){window.alert("Error Saving new Adjustment")})),function(){var e=parseInt(O.balance)-parseInt(_),t=Object(h.a)(Object(h.a)({},O),{},{adjustmentNo:v,balance:e,discount:_});console.log("Invoice values after update :",t),Ue(s._id,u,t).then((function(e){e.error&&window.alert("Error while saving Invoice Data")})).catch((function(e){window.alert("Error while saving Invoice Data")}))}(),function(){var e=Object(h.a)({},i);e.balance-=_,console.log("Client Values after update : ",e),Se(s._id,u,e).then((function(e){e.error&&window.alert("error while saving Client data")})).catch((function(e){window.alert("error while saving Client data")}))}(),a(null),n()},children:"Save Adjustment"}),Object(g.jsx)("div",{className:"btn btn-info fs-4 ",onClick:n,children:"Cancel"})]})]})})},Ec=function(e){var t=e.onPrint;return Object(g.jsxs)("div",{className:"btn btn-warning fs-4 mx-1 my-1 px-4",style:{width:"10rem"},onClick:t,children:[Object(g.jsx)(gc.a,{}),"Print"]})},Ic=function(e){var t=e.invoice,n=e.path,r=Object(c.useContext)(R),a=(r.clients,r.setClientSelected),i=r.clientSelected,o=Object(c.useContext)(Nn),s=o.invoiceSelected,l=o.fetchInvoices,d=Object(c.useContext)(V).orders,f=Object(c.useContext)(pc).adjustments,x=Object(u.g)(),O=Object(c.useContext)(bt),m=O.user,p=O.token,v=Object(c.useState)(""),y=Object(j.a)(v,2),w=y[0],N=y[1],S=Object(c.useState)(!1),C=Object(j.a)(S,2),D=C[0],k=C[1],T=Object(c.useState)([]),P=Object(j.a)(T,2),A=P[0],E=P[1],I=Object(c.useState)(!1),z=Object(j.a)(I,2),F=z[0],_=z[1],B=Object(c.useState)({_id:"",invoiceNo:"",invoiceDate:"",dueDate:"",taxOption:"",taxAmount:"",amount:"",paid:0,balance:0,ordersList:[],client:"",cancelled:""}),L=Object(j.a)(B,2),M=L[0],U=L[1];Object(c.useEffect)((function(){if(s){console.log("OrdersList in orderAction form:",s.ordersList);var e=d.filter((function(e){return s.ordersList.includes(e._id)}));E(e),U(Object(h.a)(Object(h.a)({},s),{},{ordersList:s.ordersList}))}}),[]);M._id;var G=M.invoiceNo,W=M.invoiceDate,J=M.dueDate,H=(M.taxOption,M.taxAmount,M.amount),q=M.paid,Y=M.balance,K=(M.ordersList,M.client),X=(M.cancelled,function(){_(!1)});return Object(g.jsxs)("div",{className:"container w-100 fs-4",children:[D&&Object(g.jsx)("div",{className:"fs-4 text-red",children:w}),s&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{children:"Client"}),Object(g.jsx)("div",{className:"fs-4",children:Object(g.jsx)("b",{children:K})}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(g.jsxs)("div",{className:"d-flex flex-row",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"",children:"Invoice#"}),Object(g.jsx)("div",{style:{fontSize:"1.6rem"},children:G})]}),Object(g.jsxs)("div",{className:"mx-5",children:[Object(g.jsx)("div",{children:"Invoice Date"}),Object(g.jsx)("div",{style:{fontSize:"1.6rem"},children:ht(W)})]}),Object(g.jsxs)("div",{className:"mx-5",children:[Object(g.jsx)("div",{children:"Due Date"}),Object(g.jsx)("div",{style:{fontSize:"1.6rem"},children:ht(J)})]})]}),Object(g.jsx)("div",{className:"mx-5",children:Object(g.jsxs)(b.b,{target:"_blank",to:"/print/invoice/".concat(s._id),onClick:function(){var e,t=Object(Ft.a)(A),n=0,c={};s.adjustmentNo&&(e=s.adjustmentNo,c=f.filter((function(t){return t.adjNo===e}))[0]),console.log("Adjustment Found :",c),A.forEach((function(e,c){var r,a=[],i=[],o=0;e.products.length>0&&e.products.forEach((function(e){a.push(" ".concat(e.product)),e.teethSelected.length>0&&(i=[].concat(Object(Ft.a)(i),Object(Ft.a)(e.teethSelected))),o+=e.teethSelected.length})),t[c].productsList=a.join(),t[c].teethSelected=Object(Ft.a)(i),t[c].units=o,n+=o,r=yc(t[c].teethSelected),t[c].teethList=Object(Ft.a)(r)})),console.log("Invoice Value sent for Print :",Object(h.a)(Object(h.a)({},s),{},{discount:c.amount,totalunits:n,ordersList:t,clientDetail:i})),ln(Object(h.a)(Object(h.a)({},s),{},{discount:c.amount,totalunits:n,ordersList:t,clientDetail:i}))},children:[" ",Object(g.jsx)(Ec,{})]})})]}),Object(g.jsxs)("div",{className:"d-flex flex-row",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:"Order Total"}),Object(g.jsx)("div",{style:{fontSize:"1.6rem"},children:H})]}),Object(g.jsxs)("div",{className:"mx-5",children:[Object(g.jsx)("div",{children:"Tax"}),Object(g.jsx)("div",{style:{fontSize:"1.8rem"},children:"GST @ 0%"})]}),Object(g.jsxs)("div",{className:"mx-5",children:[Object(g.jsx)("div",{children:"Tax Amount"}),Object(g.jsx)("div",{style:{fontSize:"1.8rem"},children:"0"})]}),Object(g.jsxs)("div",{className:"mx-5",children:[Object(g.jsx)("div",{children:"Amount"}),Object(g.jsx)("div",{style:{fontSize:"1.8rem"},children:H})]})]}),Object(g.jsx)("div",{children:Object(g.jsxs)("div",{children:[!F&&Object(g.jsxs)("div",{children:[Object(g.jsx)(Pc,{rOrders:A,onRowSelect:function(){return console.log("Row selected")}}),Object(g.jsxs)("div",{className:"border border-dark d-flex flex-row justify-content-between",children:[Object(g.jsxs)("div",{children:["Total Applied : ",q," "]}),Object(g.jsxs)("div",{children:["Balance : ",Y]}),Object(g.jsx)("div",{className:"btn btn-info fs-4",onClick:function(){_(!0)},children:"Add Credit Adjustment"})]})]}),Object(g.jsx)("div",{children:F&&Object(g.jsx)(Ac,{invoice:s,onAdjustmentCancel:X})})]})}),!F&&Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between my-1",children:[Object(g.jsx)("div",{className:"btn btn-info fs-4",onClick:function(){window.confirm("This will cancel the Invoice, Are you Sure ?")&&function(){var e=Object(h.a)(Object(h.a)({},t),{},{cancelled:!0}),n=Object(h.a)({},i);n.balance-=e.balance,Ue(m._id,p,e).then((function(e){e.err?window.alert("Error while cancelling invoice"):(l(),N("Invoice cancelled"),k(!0),setTimeout((function(){return k(!1)}),2e3))})).catch((function(e){window.alert("Error while canceling invoice")})),Se(m._id,p,n).then((function(e){e.error?window.alert("Error Saving Client Detail"):a(n)})).catch((function(e){window.alert("Error Saving Client Detail")}))}()},children:"Cancel Invoice"}),Object(g.jsx)("div",{className:"btn btn-info fs-4",onClick:function(){return x.go(n)},children:"Close"})]})]})]})},zc=function(e){var t=Object(c.useContext)(Nn),n=t.invoiceSelected,r=t.setInvoiceSelected,a=Object(c.useState)([]),i=Object(j.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)(!1),b=Object(j.a)(u,2),f=b[0],h=b[1],x=Object(c.useState)({error:"",loading:!1}),O=Object(j.a)(x,2),m=O[0],p=O[1],v=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p({error:"",loading:!0}),e.next=3,Me().then((function(e){e.error?p({error:e.error,loading:!1}):(s(e),p({error:"",loading:!1}))})).catch((function(e){p({error:e,loading:!1})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){v(),r(null)}),[]);var y=m.error,N=m.loading;return Object(g.jsxs)("div",{children:[Object(g.jsx)(w,{}),Object(g.jsx)(Cc,{}),N&&Object(g.jsx)("div",{className:"fs-3 text-center text-secondary",children:"Loading...."}),y&&Object(g.jsx)("div",{className:"fs-3 text-center text-secondary",children:"Error fetching Data"}),Object(g.jsxs)("div",{className:"container",children:[!f&&o.length>0&&Object(g.jsx)(Sc,{invoices:o,onInvoiceSelect:function(e){r(e),h(!0)},path:"/accounts"}),f&&n&&Object(g.jsx)(Ic,{invoice:n,path:"/accounts"})]})]})},Fc=Object(ft.a)({root:{backgroundColor:"blue",color:"green"},toolbar:{backgroundColor:"white"},caption:{color:"black",fontSize:"20px"},selectIcon:{color:"blue",fontSize:"2rem"},select:{color:"blue",fontSize:"2rem"},actions:{color:"blue"}});var Rc=function(e){e.onNewPayment;var t=Object(c.useContext)(bt),n=t.user,r=t.token,a=Object(c.useContext)(R),i=a.onClientSelect,o=a.setClientSelected,s=a.setPathRedirect,u=a.setRedirect,f=Object(c.useState)([]),h=Object(j.a)(f,2),x=(h[0],h[1]),O=Object(c.useState)({error:"",loading:!1}),m=Object(j.a)(O,2),p=m[0],v=m[1],y=Fc(),N=Object(c.useState)([]),S=Object(j.a)(N,2),C=S[0],D=S[1],k=function(e,t){var n=Object(Ft.a)(t),c=Object(Ft.a)(e);if(n.length>0){var r=[];null===c||void 0===c||c.forEach((function(e){var n=t.filter((function(t){return t.clientId._id===e._id}));n.length>0&&r.push({client:e,orders:n,value:T(n),num:P(n)}),D(r)}))}},T=function(e){var t=0;return e.forEach((function(e){return t+=e.orderAmount})),t},P=function(e){var t=0;return e.forEach((function(e){return t+=e.products.length})),t},A=[{title:"Client",field:"client.name",cellStyle:{fontSize:"1.6rem",paddingLeft:"1rem",border:"1px solid #5c5c5c"},defaultSort:"asc",render:function(e){return Object(g.jsx)(b.b,{to:"/client/clientprofile",style:{textDecoration:"none"},onClick:function(){return o(e.client)},children:e.client.name.toUpperCase()})}},{title:"Value",field:"value",align:"left",cellStyle:{fontSize:"1.8rem",padding:"1rem",border:"1px solid #5c5c5c"},type:"currency",currencySetting:{currencyCode:"INR"}},{title:"Num",field:"num",align:"center",maxWidth:"3rem",cellStyle:{fontSize:"1.6rem",padding:"1rem",border:"1px solid #5c5c5c"}},{title:"code",field:"client.code",align:"center",cellStyle:{fontSize:"1.6rem",padding:"1rem",border:"1px solid #5c5c5c"},render:function(e){return Object(g.jsx)(b.b,{to:"/client/newclient",style:{textDecoration:"none"},onClick:function(){return o(e.client)},children:e.client.code})}},{title:"Office Phone",field:"client.phoneO",align:"left",cellStyle:{fontSize:"1.6rem",padding:"1rem",border:"1px solid #5c5c5c"}},{title:"Cell Phone",field:"client.phoneM",align:"left",cellStyle:{fontSize:"1.6rem",padding:"1rem",border:"1px solid #5c5c5c"}},{title:"City",field:"client.city",align:"left",cellStyle:{fontSize:"1.6rem",padding:"1rem",border:"1px solid #5c5c5c"}},{title:"email",field:"client.emailPrimary",align:"left",cellStyle:{fontSize:"1.6rem",padding:"1rem",border:"1px solid #5c5c5c"},sorting:!1}];Object(c.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v({loading:!0}),e.next=3,Ne(n._id,r);case 3:return t=e.sent,e.next=6,Pe(n._id,r);case 6:c=e.sent,k(t,c),x({client:t,order:c}),v({loading:!1});case 10:case"end":return e.stop()}}),e)})))()}),[]);var E=function(e){s("/client/newclient"),o(e.client),u(!0)},I=p.loading,z=p.error;return Object(g.jsxs)("div",{children:[Object(g.jsx)(w,{}),Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)(It,{}),I&&Object(g.jsx)("div",{className:"fs-3 text-secondary text-center",children:"Loading..."}),z&&Object(g.jsx)("div",{className:"fs-3 text-danger text-center",children:"Error fetching data"}),Object(g.jsx)("div",{className:"row  fs-4",children:Object(g.jsx)(W.a,{columns:A,data:C,icons:ge,title:"Client-Orders",actions:[{icon:function(){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Create Order"}),children:Object(g.jsx)(Nt.a,{sx:{fontSize:25}})})},iconProps:{style:{border:"1px solid #5c5c5c"}},onClick:function(e,t){!function(e){s("/order/neworder"),i(e.client),u(!0)}(t)}},{icon:function(){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Edit Client"}),children:Object(g.jsx)(Dt.a,{sx:{fontSize:25}})})},onClick:function(e,t){E(t)}},{icon:function(){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"New Payment"}),children:Object(g.jsx)(Tt.a,{sx:{fontSize:25}})})},onClick:function(e,t){E(t)}}],components:{Pagination:function(e){return Object(g.jsx)(ye.a,{component:"div",colSpan:e.colSpan,count:e.count,rowsPerPage:e.rowsPerPage,page:e.page,onChangePage:e.onChangePage,onChangeRowsPerPage:e.onChangeRowsPerPage,classes:{root:y.root,toolbar:y.toolbar,caption:y.caption,selectIcon:y.selectIcon,select:y.select,actions:y.actions}})}},options:{filtering:!0,pageSizeOptions:[5,10,20,50,100],rowsPerPage:25,paginationType:"stepped",exportAllData:!0,exportFileName:"clientdata",addRowPosition:"first",actionsColumnIndex:0,padding:"dense",actionsCellStyle:{border:"1px solid #5c5c5c"},columnsButton:!0,rowStyle:function(e,t){return t%2==0?{background:"#f2f2f2",height:"2rem"}:{height:"2rem"}},headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontSize:"1.5rem"},style:{fontSize:"2rem"}}})})]})]})},_c=function(e){var t=e.email;return Object(g.jsxs)("div",{className:"btn btn-warning fs-4 mx-1 my-1 px-3",style:{width:"10rem"},onClick:function(){t?console.log("Email :",{email:t}):window.alert("No email registered for this Client")},children:[Object(g.jsx)(bc.a,{}),"Email"]})},Bc=function(e){var t=e.clientSelected,n=t.phoneO,c=t.phoneM,r=t.openBalance,a=t.drcrOption,i=t.regDate,o=t.email,s=t.balance,l=t.drcr;return Object(g.jsxs)("div",{className:"container  m-0",children:[Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6 col-sm-4",children:"Contact"}),Object(g.jsx)("div",{className:"col-6 col-sm-4",children:n})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6 col-sm-4",children:"Cell Phone"}),Object(g.jsx)("div",{className:"col-6 col-sm-4",children:c})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6 col-sm-4",children:"Opening Balance"}),Object(g.jsxs)("div",{className:"col-6 col-sm-4",children:[" ",Object(g.jsxs)("span",{children:[r,a]})]})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6 col-sm-4",children:"Reg.Date"}),Object(g.jsx)("div",{className:"col-6 col-sm-4",children:new Intl.DateTimeFormat("en-GB").format(new Date(i))})]}),Object(g.jsx)(b.b,{className:"row btn btn-info fs-4 my-2",to:"/client/newclient",children:"Edit Client"}),Object(g.jsxs)("div",{className:"row ",children:[Object(g.jsx)("div",{className:"col-8 col-sm-6 d-flex  flex-column border border-dark ",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-4",children:"Price List"}),Object(g.jsxs)("div",{className:"col-8",children:[Object(g.jsx)(_c,{email:o}),Object(g.jsx)(Ec,{})]})]})}),Object(g.jsx)("div",{className:"col-4 ",children:Object(g.jsxs)("div",{className:"d-flex flex-row",children:[Object(g.jsx)("div",{className:"",children:"Balance : "}),Object(g.jsx)("div",{style:l?{color:"green"}:{color:"red"},children:s})]})})]}),Object(g.jsxs)("div",{className:"row d-flex flex-cloumn  px-2 py-2  border border-dark ",children:[Object(g.jsxs)("div",{className:"d-flex flex-row ",children:[Object(g.jsx)("div",{className:"",children:"Last Invoice : "}),Object(g.jsx)("div",{className:"",children:"invoice data"})]}),Object(g.jsxs)("div",{className:"d-flex flex-row ",children:[Object(g.jsx)("div",{className:"",children:"Last Payment : "}),Object(g.jsx)("div",{className:"",children:"Payment data"})]}),Object(g.jsxs)("div",{className:" py-1 d-flex flex-row border border-dark align-items-center",children:[Object(g.jsx)("div",{className:"w-50 ",children:"StateMent of Accounts"}),Object(g.jsx)(Ec,{}),Object(g.jsx)(_c,{})]}),Object(g.jsxs)("div",{className:" py-1  d-flex flex-row border border-dark align-items-center",children:[Object(g.jsx)("div",{className:"w-50 ",children:"Outstanding Invoices"}),Object(g.jsx)(Ec,{}),Object(g.jsx)(_c,{})]}),Object(g.jsxs)("div",{className:" py-1 d-flex flex-row border border-dark align-items-center",children:[Object(g.jsx)("div",{className:"w-50 ",children:"Billing History"}),Object(g.jsx)(Ec,{}),Object(g.jsx)(_c,{})]})]})]})},Lc=function(e){var t=e.clientSelected,n=Object(c.useContext)(V).orders,r=Object(c.useState)([]),a=Object(j.a)(r,2),i=a[0],o=a[1],s=[{title:"Order#",field:"orderNo",maxWidth:"2rem",height:"2rem",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"}},{title:"client",field:"client",height:"2rem",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"},render:function(e){return Object(g.jsx)("div",{children:e.client.toUpperCase()})}},{title:"products",field:"productsList",height:"2rem",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"}},{title:"Order Amount",field:"orderAmount",height:"2rem",align:"left",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"}},{title:"status",field:"status",width:"10%",height:"2rem",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"}},{title:"Order Date",field:"orderDate",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"},render:function(e){return Object(g.jsx)("div",{children:new Intl.DateTimeFormat("en-GB").format(new Date(e.orderDate))})}},{title:"Due Date",field:"duedate",width:"5rem",height:"2rem",cellStyle:{fontSize:"1.6rem",border:"1px solid #5c5c5c"},render:function(e){return Object(g.jsx)("div",{children:new Intl.DateTimeFormat("en-GB").format(new Date(e.duedate))})}}];return Object(c.useEffect)((function(){t&&n.length>0&&function(){if(n.length>0&&t){var e=n.filter((function(e){return e.clientId===t._id}));o(e)}}()}),[]),Object(g.jsx)("div",{className:"container-fluid",children:Object(g.jsx)(W.a,{columns:s,data:i,icons:ge,title:"Order Data",onSelectionChange:function(e){console.log(e)},options:{filtering:!0,actionsCellStyle:{border:"1px solid #5c5c5c"},pageSizeOptions:[10,20,50,100],paginationType:"stepped",exportAllData:!0,exportFileName:"orderdata",columnsButton:!0,rowStyle:function(e,t){return t%2==0?{background:"#f2f2f2"}:null},selection:!0,showSelectAllCheckbox:!1,showTextRowsSelected:!1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontSize:"1.5rem"},style:{fontSize:"1.5rem"}}})})},Mc=function(e){var t=Object(c.useContext)(Nn),n=t.invoices,r=(t.invoiceSelected,t.setInvoiceSelected),a=Object(c.useContext)(R).clientSelected,i=Object(c.useState)([]),o=Object(j.a)(i,2),s=o[0],l=o[1],d=Object(c.useState)(!1),u=Object(j.a)(d,2),b=u[0],f=u[1],x=Object(c.useState)(null),O=Object(j.a)(x,2),m=O[0],p=O[1],v={};return Object(c.useEffect)((function(){console.log("In Client Invoice detail///////",a),a&&function(){if(a&&n.length>0){var e=n.filter((function(e){return e.clientId===a._id}));l(e),console.log("client Invoices :",e)}}()}),[]),Object(g.jsxs)("div",{children:[!b&&s.length>0&&Object(g.jsx)(Sc,{invoices:s,onInvoiceSelect:function(e){v=Object(h.a)({},e),p(e),r(e),console.log("Invoice Selected in client profile :",v),f(!0)},path:"/client/clientprofile"}),b&&m&&Object(g.jsx)(Ic,{invoice:v,path:"/client/clientprofile"})]})},Uc=function(e){var t=Object(u.g)(),n=Object(c.useContext)(R).clientSelected,r=Object(c.useState)(!0),a=Object(j.a)(r,2),i=a[0],o=a[1],s=Object(c.useState)(!1),l=Object(j.a)(s,2),d=l[0],b=l[1],f=Object(c.useState)(!1),h=Object(j.a)(f,2),x=h[0],O=h[1],m=Object(c.useState)(!1),p=Object(j.a)(m,2),v=p[0],y=p[1],N=Object(c.useState)(!1),S=Object(j.a)(N,2),C=S[0],D=S[1];return Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)(w,{}),Object(g.jsxs)("div",{className:"container ",children:[Object(g.jsx)(It,{}),Object(g.jsxs)("div",{className:"d-flex flex-column border border-dark px-3 py-3 fs-4 w-100",children:[Object(g.jsx)("div",{className:"btn btn-info fs-4 px-5 align-self-center  w-25",onClick:function(){return t.goBack()},children:"Back"}),Object(g.jsx)("div",{children:Object(g.jsx)("b",{children:"Client Profile : "})}),n&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"fs-3  ",children:[Object(g.jsx)("b",{children:n.name.toUpperCase()})," ",Object(g.jsx)("span",{className:"mx-2",children:n.code})]}),Object(g.jsx)("hr",{}),Object(g.jsx)("div",{children:Object(g.jsxs)("div",{className:"d-flex flex-column flex-sm-row  justify-content-evenly ",style:{backgroundColor:"dodgerblue"},children:[Object(g.jsx)("div",{className:"btn   text-white fs-3 p-2",style:i?{backgroundColor:"tomato"}:{backgroundColor:"dodgerblue"},onClick:function(){o(!0),O(!1),b(!1),y(!1),D(!1)},children:"Summary "}),Object(g.jsx)("div",{className:"btn  text-white fs-3 p-2",style:d?{backgroundColor:"tomato"}:{backgroundColor:"dodgerblue"},onClick:function(){o(!1),O(!1),b(!0),y(!1),D(!1)},children:"Order "}),Object(g.jsx)("div",{className:"btn btn-info  text-white fs-3 p-2",style:x?{backgroundColor:"tomato"}:{backgroundColor:"dodgerblue"},onClick:function(){o(!1),O(!0),b(!1),y(!1),D(!1)},children:" Shipment "}),Object(g.jsx)("div",{className:"btn btn-info  text-white fs-3 p-2",style:v?{backgroundColor:"tomato"}:{backgroundColor:"dodgerblue"},onClick:function(){o(!1),O(!1),b(!1),y(!0),D(!1)},children:" Invoice "}),Object(g.jsx)("div",{className:"btn btn-info text-white fs-3 p-2",style:C?{backgroundColor:"tomato"}:{backgroundColor:"dodgerblue"},onClick:function(){o(!1),O(!1),b(!1),y(!1),D(!0)},children:" Payment "})]})}),i&&Object(g.jsx)(Bc,{clientSelected:n}),d&&Object(g.jsx)(Lc,{clientSelected:n}),v&&Object(g.jsx)(Mc,{clientSelected:n})]})]})]})]})},Vc=(n(1312),n(451),function(e){var t=e.invoices,n=e.onInvoiceApplyCancel,c=e.onCashApplied,r=function(e){return function(t){c(t.target.value,e)}};return Object(g.jsx)("div",{children:Object(g.jsxs)("table",{children:[Object(g.jsxs)("tr",{className:"tr",children:[Object(g.jsx)("th",{className:"th",children:"Invoice#"}),Object(g.jsx)("th",{className:"th",children:"Invoice Date"}),Object(g.jsx)("th",{className:"th",children:"Invoice Amount"}),Object(g.jsx)("th",{className:"th",children:"Other Paid"}),Object(g.jsx)("th",{className:"th",children:"Current Payment"})]}),t.map((function(e,t){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"td",children:e.invoiceNo}),Object(g.jsx)("td",{className:"td",children:new Date(e.invoiceDate).toDateString()}),Object(g.jsx)("td",{className:"td",children:e.amount}),Object(g.jsx)("td",{className:"td",children:e.paid}),Object(g.jsx)("td",{className:"td",children:Object(g.jsx)("input",{type:"number",style:{maxWidth:"10rem",outline:"none",border:"none"},onChange:r(t)})}),Object(g.jsx)("td",{children:Object(g.jsx)("div",{className:"btn fs-4 text-primary border border-secondary  mx-2",onClick:function(){return n(t)},children:Object(g.jsx)("b",{children:"X"})})})]})}))]})})}),Gc=n(742),Wc=n.n(Gc);var Jc=function(e){var t=e.receiptData,n=e.onClose,r=Object(c.useState)([]),a=Object(j.a)(r,2),i=a[0],o=a[1],s=Object(c.useState)([]),u=Object(j.a)(s,2),b=u[0],f=u[1],h=Object(c.useState)({error:"",loading:!1}),x=Object(j.a)(h,2),O=x[0],m=x[1],p=O.error,v=O.loading,y=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m({error:"",loading:!0}),e.next=3,Me().then((function(e){e.error?m({error:e.error,loading:!1}):(o(e),m({error:"",loading:!1}))})).catch((function(e){m({error:e,loading:!1})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){y(),f(function(){var e=i.filter((function(e){return t.invoicesApplied.includes(e._id)}));return console.log("Invoice List in table :",e),e}(t.invoicesApplied))}),[]),Object(g.jsxs)("div",{children:[v&&Object(g.jsx)("div",{className:"fs-3 text-center text-secondary",children:"Loading...."}),p&&Object(g.jsx)("div",{className:"fs-3 text-center text-secondary",children:"Error fetching Data"}),Object(g.jsxs)("div",{className:"w-100 fs-4 border border-dark rounded ",children:[Object(g.jsxs)("div",{className:"bg-info d-flex justify-content-between align-items-center p-3",children:[Object(g.jsx)("div",{children:Object(g.jsx)("b",{children:"Payment Applied"})}),n&&Object(g.jsx)("div",{className:"btn fs-3",onClick:function(){return n()},children:Object(g.jsx)("b",{children:"X"})})]}),Object(g.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(g.jsxs)("div",{children:["Receipt# : ",t.receiptNo]}),Object(g.jsxs)("div",{children:["payment for ",Object(g.jsx)("span",{children:b.length}),1===b.length?"invoice":"invoices"]})]}),b.length>0&&Object(g.jsx)("div",{className:"w-100",children:Object(g.jsxs)("table",{className:"table",children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{className:"th"}),Object(g.jsx)("th",{className:"th",children:"Invoice#"}),Object(g.jsx)("th",{className:"th",children:"Invoice Date"}),Object(g.jsx)("th",{className:"th",children:"Invoice Amount"}),Object(g.jsx)("th",{className:"th",children:"Adjusted"})]}),b.map((function(e,t){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"td",children:t+1}),Object(g.jsx)("td",{className:"td",children:e.invoiceNo}),Object(g.jsx)("td",{className:"td",children:new Date(e.invoiceDate).toDateString()}),Object(g.jsx)("td",{className:"td",children:e.amount}),Object(g.jsx)("td",{className:"td",children:e.paid})]})}))]})})]})]})},Hc=function(e){var t=Object(u.g)(),n=Object(c.useContext)(bt),r=n.user,a=n.token,i=Object(c.useContext)(R),o=i.clientSelected,s=i.setClientSelected,b=Object(c.useState)([]),O=Object(j.a)(b,2),m=O[0],p=O[1],v=Object(c.useState)([]),y=Object(j.a)(v,2),N=y[0],S=y[1],C=Object(c.useState)([]),D=Object(j.a)(C,2),k=(D[0],D[1]),T=Object(c.useContext)(Nn).setInvoiceSelected,P=Object(c.useContext)(Cn).receiptSelected,A=Object(c.useState)([]),E=Object(j.a)(A,2),I=E[0],z=E[1],F=Object(c.useState)(!1),_=Object(j.a)(F,2),B=_[0],L=_[1],M=Object(c.useState)(null),U=Object(j.a)(M,2),V=U[0],G=U[1],W=Object(c.useState)(!1),J=Object(j.a)(W,2),H=J[0],q=J[1],Y=Object(c.useState)(""),K=Object(j.a)(Y,2),X=K[0],Z=K[1],Q=Object(c.useState)(!1),$=Object(j.a)(Q,2),ee=$[0],te=$[1],ne=Object(c.useState)([]),ce=Object(j.a)(ne,2),ae=ce[0],ie=ce[1],oe=Object(c.useState)(0),se=Object(j.a)(oe,2),le=se[0],de=se[1],je=Object(c.useState)(!1),ue=Object(j.a)(je,2),be=ue[0],fe=ue[1],he=Object(c.useState)({error:"",loading:!1}),xe=Object(j.a)(he,2),Oe=xe[0],me=xe[1],pe=[],ve=(Oe.error,Oe.loading),ge=Object(c.useState)({amount:0,paymentDate:new Date,receiptNo:0,paymentMode:"Cash",paidtoAc:"",chequeNo:"",notes:"",invoicesApplied:[],client:"",cancelled:!1}),ye=Object(j.a)(ge,2),we=ye[0],Ce=ye[1],De=function(){if(function(){if(ke<=0||ae.length<1)return!1;if(""===Ee)return window.alert("Please select the paid to account"),!1;if("Cheque"===Ae&&""===Ie)return window.alert("Please Enter valid Cheque Number"),!1;var e=qe();return ke<e?(window.alert("Total applied amount ".concat(e," exceeding  paid amount ").concat(ke)),!1):!(ke>e)||(window.alert("Toatl paid amount ".concat(ke," is more than total applied amount ").concat(e)),!1)}()){var e=Ye(),n=function(){var e=[];return ae.forEach((function(t){return e.push(t._id)})),e}();ae.forEach((function(e){var t=Object(h.a)({},e);t.paid=parseInt(t.applied),t.balance=parseInt(t.amount)-t.paid,delete t.applied,Ue(r._id,a,t).then((function(e){e.error&&window.alert("Error while saving invoice update")})).catch((function(e){return window.alert("Error while saving invoice update")}))})),Se(r._id,a,Object(h.a)(Object(h.a)({},o),{},{balance:e})).then((function(e){e.error&&window.alert("Error while saving client data")})).catch((function(e){return window.alert("Error while saving client data")})),We(r._id,a,Object(h.a)(Object(h.a)({},we),{},{receiptNo:V,amount:ke,invoicesApplied:n})).then((function(e){e.error&&window.alert("Error while creating receipt")})).catch((function(e){return window.alert("Error while creating receipt")})),T(null),s(null),t.push("/accounts/receipt")}},ke=we.amount,Te=we.paymentDate,Ae=we.paymentMode,Ee=we.paidtoAc,Ie=we.chequeNo,ze=we.notes,Fe=function(e){return function(t){Ce(Object(h.a)(Object(h.a)({},we),{},Object(f.a)({},e,t.target.value)))}},Re=function(e){if(e.length>1){var t=Object(Ft.a)(e);t.sort((function(e,t){return parseInt(e.invoiceNo)-parseInt(t.invoiceNo)}));var n=Ve(t[t.length-1].invoiceNo),c=e.filter((function(e){return e.invoiceNo===n}));return"#".concat(c[0].invoiceNo,"   for   Rs.").concat(c[0].amount," on ").concat(new Date(c[0].invoiceDate).toDateString())}return 1===e.length?"#".concat(e[0].invoiceNo," for Rs.").concat(e[0].amount," on ").concat(new Date(e[0].invoiceDate).toDateString()):Object(g.jsx)("div",{children:"No Invoices found"})},_e=function(e){var t=e.target.value,n=m.filter((function(e){return e._id===t}));Ce(Object(h.a)(Object(h.a)({},we),{},{client:n[0]._id})),s(n[0]),de(n[0].balance),fe(n.drcr),Me().then((function(e){if(e.err)window.alert("Error while111 fetching invoices",e.err);else if(e.length>0){var n=e.filter((function(e){return e.clientId===t&&e.balance>=0}));z(n)}})).catch((function(e){window.alert("Error while fetching invoices",e)}))},Be=function(){L(!1)},Le=function(){if(pe.length>0){L(!1);var e=[];pe.forEach((function(t){return e.push(I[t])})),ie(e)}else window.alert("Please select atleast one Invoice to apply")},Ve=function(e){var t=e.toString(),n=t.length;if(n<6)for(var c=0;c<6-n;c++)t="0"+t;return t},Ge=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/receiptcounter"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return e})).then((function(e){G(Ve(e.sequence_val))})).catch((function(e){Z("Error in sequence"),te(!0),setTimeout((function(){return te(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return me({error:"",loading:!0}),e.next=3,Ne(r._id,a);case 3:return t=e.sent,e.next=6,Pe(r._id,a);case 6:n=e.sent,c=Me(r._id),p(t),S(n),k(c),me({error:"",loading:!1});case 12:case"end":return e.stop()}}),e)})))(),P?(q(!0),s(P.client),Ce(Object(h.a)(Object(h.a)({},P),{},{client:P.client._id,_id:P._id})),G(P.receiptNo)):(Ge(),o&&N.filter((function(e){return e.clientId._id===o._id})))}),[]);var He=function(e){var t=ae.slice(0,e),n=ae.slice(e+1),c=[].concat(Object(Ft.a)(t),Object(Ft.a)(n));ie(c)},qe=function(){var e=0;return ae.length>0&&ae.forEach((function(t){return t.applied?e+=parseInt(t.applied):null})),e},Ye=function(){var e=0;if(!be){var t=qe();return t>=le?((e=parseInt(t)-parseInt(le))>0&&fe(!0),de(e),e):((e=parseInt(le)-parseInt(t))>0&&fe(!1),de(e),e)}};return Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)(w,{}),ve&&Object(g.jsx)("div",{className:"fs-3 text-center text-secondary",children:"Loading..."}),ee&&Object(g.jsx)("div",{className:"fs-4 text-red",children:X}),B&&Object(g.jsx)(Qn,{title:"Payment Settlemant",onClose:Be,children:Object(g.jsx)("div",{children:Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"my-2 w-100 fs-4",children:I.length>0&&Object(g.jsx)("div",{className:"w-100",children:Object(g.jsxs)("table",{className:"table",children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{className:"th"}),Object(g.jsx)("th",{className:"th",children:"Invoice#"}),Object(g.jsx)("th",{className:"th",children:"Invoice Date"}),Object(g.jsx)("th",{className:"th",children:"Invoice Amount"}),Object(g.jsx)("th",{className:"th",children:"Paid"})]}),I.map((function(e,t){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"td",children:Object(g.jsx)("input",{type:"checkbox",className:"mx-2 ",value:e._id,onChange:function(){if(pe.includes(t)){var e=pe.filter((function(e){return e!==t}));pe=e}else pe.push(t)}})}),Object(g.jsx)("td",{className:"td",children:e.invoiceNo}),Object(g.jsx)("td",{className:"td",children:new Date(e.invoiceDate).toDateString()}),Object(g.jsx)("td",{className:"td",children:e.amount}),Object(g.jsx)("td",{className:"td",children:e.paid})]})}))]})})}),Object(g.jsxs)("div",{className:"modal-footer",children:[Object(g.jsx)("button",{className:"btn btn-info fs-4",onClick:Le,children:"Continue"}),Object(g.jsx)("button",{className:"btn btn-info fs-4",onClick:Be,children:"Close"})]})]})})}),Object(g.jsxs)("div",{className:" container-100-mdx60-xlx50 fs-4 d-flex flex-column",children:[Object(g.jsx)("div",{className:"fs-4 my-3",children:Object(g.jsx)("b",{children:"Payment"})}),o&&Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{children:["Client : ",Object(g.jsx)("b",{children:o.name})," "]})}),!o&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{children:"Client"}),Object(g.jsxs)("select",{name:"client",className:"my-2 payment-container ",onChange:_e,children:[Object(g.jsx)("option",{children:" Select Client"}),m.map((function(e){return Object(g.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),Object(g.jsxs)("div",{className:"row ",children:[Object(g.jsxs)("div",{className:"col ",children:[Object(g.jsx)("div",{children:"Amount"}),Object(g.jsx)("input",{type:"number",value:ke,disabled:H,onChange:Fe("amount")})]}),Object(g.jsxs)("div",{className:"col ",children:[Object(g.jsx)("div",{children:"Payment Date"}),!H&&Object(g.jsx)("input",{type:"date",value:Te,onChange:Fe("paymentDate")}),H&&Object(g.jsx)("div",{className:"border border-dark text-right",children:ht(Te)})]}),Object(g.jsxs)("div",{className:"col",children:[Object(g.jsx)("div",{children:"Receipt#"}),Object(g.jsx)("input",{type:"number",value:V})]})]}),Object(g.jsxs)("div",{className:"row ",children:[Object(g.jsxs)("div",{className:"col",children:[Object(g.jsx)("div",{children:"Payment Mode"}),Object(g.jsxs)("select",{value:Ae,disabled:H,onChange:Fe("paymentMode"),children:[Object(g.jsx)("option",{value:"Cash",children:"Cash"}),Object(g.jsx)("option",{value:"Cheque",children:"Cheque"}),Object(g.jsx)("option",{value:"NetBanking",children:"NetBanking"})]})]}),Object(g.jsxs)("div",{className:"col ",children:[Object(g.jsx)("div",{children:"Paid to a/c : "}),Object(g.jsxs)("select",{value:"NetBanking"===Ae?"Bank account":Ee,disabled:H,onChange:Fe("paidtoAc"),children:[Object(g.jsx)("option",{}),Object(g.jsx)("option",{value:"Bank account",children:"Bank account"}),Object(g.jsx)("option",{value:"Cash Account",children:"Cash Account"})]})]}),Object(g.jsxs)("div",{className:"col",children:[Object(g.jsx)("div",{children:"Cheque/Ref#"}),Object(g.jsx)("input",{type:"number",value:Ie,disabled:H,onChange:Fe("chequeNo")})]})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{children:"Notes"}),Object(g.jsx)("input",{type:"text",value:ze,onChange:Fe("notes")})]}),!H&&Object(g.jsxs)(g.Fragment,{children:[" ",Object(g.jsxs)("div",{className:"row border border-dark ",style:{color:"#000",fontSize:"1.6rem"},children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("b",{children:"Balance : "}),o&&Object(g.jsxs)("span",{style:{fontSize:"1.8rem"},children:[" ",o.balance]})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("b",{children:"Last Invoice : "}),Object(g.jsx)("span",{style:{fontSize:"1.8rem"},children:Re(I)})]}),Object(g.jsx)("div",{children:Object(g.jsx)("b",{children:"Last Payment : "})})]}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center border border-dark my-1",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("b",{children:"Total Applied : "}),qe()]}),ke>0&&Object(g.jsx)("div",{className:"btn fs-4 text-primary",onClick:function(){L(!0)},children:"Apply Payment"})]}),ae.length>0&&Object(g.jsx)("div",{children:Object(g.jsx)(Vc,{invoices:ae,onInvoiceApplyCancel:He,onCashApplied:function(e,t){return function(e,t){var n=Object(Ft.a)(ae);e>0&&(n[t].applied=e,ie(n))}(e,t)}})})]}),H&&Object(g.jsxs)("div",{className:" border border-dark my-1",children:[Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("b",{children:"Total Applied : "}),ke]}),Object(g.jsxs)("div",{className:" fs-4 px-2 ",children:["Balance : ",o.balance," ",Object(g.jsx)("span",{children:Object(g.jsx)(Wc.a,{sx:{fontSize:30}})})]})]}),Object(g.jsx)(Jc,{receiptData:P})]}),Object(g.jsxs)("div",{className:"d-flex justify-content-between my-2",children:[H&&Object(g.jsxs)("div",{className:"btn btn-danger fs-4 ",onClick:function(){if(window.confirm("Receipt # : ".concat(V," will be deleted permenantly.\n                                               Are you Sure? "))){var e=Object(h.a)({},P);e.cancelled=!0,Je(r._id,a,e).then((function(e){e.error&&window.alert("Delete request failed")})).catch((function(e){window.alert("Delete request failed")}))}},children:[Object(g.jsx)(re.a,{sx:{fontSize:40}}),"Cancel Payment"]}),(ae.length>0||H)&&Object(g.jsx)("div",{className:"btn btn-info fs-4",onClick:De,children:"Save Receipt"}),Object(g.jsx)("div",{className:"btn btn-info fs-4",onClick:function(){s(null),H?t.push("/accounts/receipt"):t.goBack()},children:"Cancel"})]})]})]})},qc=Object(ft.a)({root:{backgroundColor:"blue",color:"green"},toolbar:{backgroundColor:"white"},caption:{color:"black",fontSize:"20px"},selectIcon:{color:"blue",fontSize:"2rem"},select:{color:"blue",fontSize:"2rem"},actions:{color:"blue"}}),Yc=function(e){var t=e.rOrders,n=e.onRowSelect,r=qc(),a=Object(u.g)(),i=Object(c.useContext)(R),o=i.clients,s=i.setClientSelected,l=(i.onClientSelect,Object(c.useContext)(V)),d=(l.orders,l.setOrderSelected),f=Object(c.useState)([]),h=Object(j.a)(f,2),x=h[0],O=h[1],m=function(e){var t=[];return console.log("Products :::",e),e.length>0&&e.forEach((function(e){return t.push("".concat(e.product," - ").concat(e.units))})),t.join()},p=[{title:"Order#",field:"orderNo",maxWidth:"7rem",render:function(e){return Object(g.jsx)(b.b,{style:{textDecoration:"none"},to:"/order/newOrder",onClick:function(){return d(e)},children:e.orderNo})}},{title:"Order Date",field:"orderDate",render:function(e){return Object(g.jsx)("div",{children:new Intl.DateTimeFormat("en-GB").format(new Date(e.orderDate))})}},{title:"Client",field:"client",render:function(e){return Object(g.jsx)(b.b,{to:"/client/clientprofile",style:{textDecoration:"none"},onClick:function(){var t;s((t=e.clientId,o.filter((function(e){return e._id===t}))[0]))},children:e.client.toUpperCase()})}},{title:"patient",field:"patient"},{title:"products",field:"",render:function(e){return Object(g.jsx)("div",{children:m(e.products)})}},{title:"Order Amount",field:"orderAmount"}];return Object(c.useEffect)((function(){}),[]),Object(g.jsxs)("div",{className:"container-fluid",children:[console.log("Orders received in OrderInInvoiceForm ::::",t),Object(g.jsxs)("div",{className:"border border-info fs-4 mx-auto my-2   ",children:[Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-end ",children:[Object(g.jsx)("div",{className:"btn btn-info text-white fs-3 mx-3 border border-white",onClick:function(){O([]),a.goBack()},children:"Cancel"}),Object(g.jsx)("div",{className:"btn btn-info text-white fs-3 border border-white",onClick:function(){n(x)},children:"Add to Invoice"})]}),Object(g.jsx)(W.a,{columns:p,data:t,icons:ge,title:"Orders",onSelectionChange:function(e){O(e)},components:{Pagination:function(e){return Object(g.jsx)(ye.a,{component:"div",colSpan:e.colSpan,count:e.count,rowsPerPage:e.rowsPerPage,page:e.page,onChangePage:e.onChangePage,onChangeRowsPerPage:e.onChangeRowsPerPage,classes:{root:r.root,toolbar:r.toolbar,caption:r.caption,selectIcon:r.selectIcon,select:r.select,actions:r.actions}})}},options:{filtering:!0,actionsColumnIndex:6,pageSize:50,padding:"dense",pageSizeOptions:[10,20,50,100],paginationType:"stepped",exportAllData:!0,exportFileName:"orderdata",rowStyle:function(e,t){return t%2==0?{background:"#f2f2f2"}:null},selection:!0,showSelectAllCheckbox:!1,showTextRowsSelected:!1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontSize:"1.5rem"},style:{fontSize:"1.5rem"}}})]})]})},Kc=function(e){var t=Object(c.useContext)(R),n=t.clients,r=t.clientSelected,a=t.setClientSelected,i=t.onClientSelect,o=Object(c.useContext)(Nn),s=(o.invoices,o.setInvoiceSelected,o.invoiceSelected),u=Object(c.useContext)(bt),b=u.user,x=u.token,O=Object(c.useContext)(V),m=O.orders,p=O.fetchOrders,v=Object(c.useState)(!1),y=Object(j.a)(v,2),w=(y[0],y[1]),N=Object(c.useState)(""),S=Object(j.a)(N,2),C=S[0],D=S[1],k=Object(c.useState)(""),T=Object(j.a)(k,2),P=T[0],A=T[1],E=Object(c.useState)(!1),I=Object(j.a)(E,2),z=I[0],F=I[1],_=Object(c.useState)(!1),B=Object(j.a)(_,2),L=B[0],M=B[1],U=Object(c.useState)(!1),G=Object(j.a)(U,2),W=G[0],J=G[1],H=Object(c.useState)([]),q=Object(j.a)(H,2),Y=q[0],K=q[1],X=Object(c.useState)([]),Z=Object(j.a)(X,2),Q=Z[0],$=Z[1],ee=[],te=Object(c.useState)({invoiceNo:0,invoiceDate:new Date,dueDate:new Date,taxOption:"",taxAmount:0,amount:0,paid:0,balance:0,cancelled:!1,adjustment:{},discount:0}),ne=Object(j.a)(te,2),ce=ne[0],re=ne[1],ae=function(e){return function(t){re(Object(h.a)(Object(h.a)({},ce),{},Object(f.a)({},e,t.target.value)))}},ie=function(){if(r&&0===Q.length&&0===Y.length){console.log("Orders received in neInvoice table:",m),console.log("Client Selected :",r);var e=m.filter((function(e){return e.clientId===r._id&&!1===e.isInvoiced}));console.log("Orders belongnf to  this client are:",e),$(e),M(!0),J(!1)}else r&&Q.length>0&&(console.log("Orders belongnf to  this client are**************:",Q,Q.length),M(!0),J(!1))},oe=(ce.invoiceNo,ce.invoiceDate),se=ce.paymentDueDate,le=ce.taxOption,de=(ce.taxAmount,ce.amount),je=function(e){var t=e.toString(),n=t.length;if(n<6)for(var c=0;c<6-n;c++)t="0"+t;return t},ue=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce().then((function(e){D(je(e.sequence_val))})).catch((function(e){A("Error in sequence"),F(!0),setTimeout((function(){return F(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){s?(w(!0),a(function(e){var t=n.filter((function(t){return t._id===e}));return console.log("Client Selected : ",t[0]),t[0]}(s.clientId)),re(s),console.log("Invoice se;lected",s)):(ue(),M(!1),J(!1),re(Object(h.a)(Object(h.a)({},ce),{},{invoiceNo:C})))}),[r]);var be=function(e){var t=ce.amount;if(t-=e.orderAmount,$([].concat(Object(Ft.a)(Q),[e])),Y.length>0){var n=Y.filter((function(t){return t._id!==e._id}));K(n)}re(Object(h.a)(Object(h.a)({},ce),{},{amount:t})),M(!0),J(!1)},fe=function(e){console.log("RowSElected IN  aDD to Invoice",e);var t=ce.amount;K((function(){return[].concat(Object(Ft.a)(Y),Object(Ft.a)(e))})),e.length>0&&e.forEach((function(e){ee=Q.filter((function(t){return t._id!==e._id})),$(ee),t+=e.orderAmount})),re(Object(h.a)(Object(h.a)({},ce),{},{amount:t,balance:r.balance,clientId:r._id,client:r.name})),M(!1),J(!0)},he=function(){var e=function(){var e=[];return Y.length>0&&Y.forEach((function(t){return e.push(t._id)})),e}();!function(){if(r){var e=parseInt(r.balance),t=r.drcr;t?de>=e?(e=de-e,t=!1):de<e&&(e-=de,t=!0):e+=de,Se(b._id,x,Object(h.a)(Object(h.a)({},r),{},{balance:e,drcr:t})).then((function(e){e.error&&window.alert("could not update client data")})).catch((function(e){window.alert("could not update client data")}))}}(),Y.forEach((function(e){var t=Object(h.a)(Object(h.a)({},e),{},{isInvoiced:!0,invoiceId:C,invoiceDate:new Date});Te(b._id,x,t).then((function(e){e.err?(A("Error during invoicing order"),F(!0),setTimeout((function(){return F(!1)}),2e3)):p()})).catch((function(e){A("Error during invoicing order "),F(!0),setTimeout((function(){return F(!1)}),2e3)}))})),console.log("NEW VALUES :",Object(h.a)(Object(h.a)({},ce),{},{ordersList:Object(Ft.a)(e)})),Le(b._id,x,Object(h.a)(Object(h.a)({},ce),{},{ordersList:Object(Ft.a)(e)})).then((function(e){e.err?window.alert("Error while generating invoice"):(a(null),A("Invoice generated"),F(!0),setTimeout((function(){return F(!1)}),2e3),re({invoiceNo:0,invoiceDate:new Date,dueDate:new Date,taxOption:"",taxAmount:0,amount:0,paid:0,balance:0}))})).catch((function(e){window.alert("Error while generating invoice")}))};return Object(c.useEffect)((function(){a(null)}),[]),Object(g.jsx)("div",{className:"container-fluid",children:Object(g.jsxs)("div",{children:[z&&Object(g.jsx)("div",{className:"fs-4 text-red",children:P}),r&&Object(g.jsx)("div",{className:"container-fluid fs-4",children:Object(g.jsxs)("div",{className:"border border-dark my-3  ",children:[Object(g.jsx)("h2",{children:"Create Invoice"}),Object(g.jsx)("hr",{}),Object(g.jsxs)("div",{className:"d-flex flex-column p-2",children:[Object(g.jsxs)("div",{children:["Client : ",Object(g.jsx)("b",{children:r.name})]}),Object(g.jsxs)("div",{className:"row  my-2 ",children:[Object(g.jsxs)("div",{className:"col-4 ",children:[Object(g.jsx)("div",{children:"Invoice#"}),Object(g.jsx)("input",{type:"text",value:C})]}),Object(g.jsxs)("div",{className:"col-4 ",children:[Object(g.jsx)("div",{children:"Invoice Date"}),Object(g.jsx)("input",{type:"date",value:oe,onChange:ae("invoiceDate")})]}),Object(g.jsxs)("div",{className:"col-4 ",children:[Object(g.jsx)("div",{children:"Due Date"}),Object(g.jsx)("input",{type:"date",value:se,onChange:ae("dueDate")})]})]}),Object(g.jsxs)("div",{className:"row px-3",children:[Object(g.jsxs)("div",{className:"col-3",children:[Object(g.jsx)("label",{children:"Order Total"}),Object(g.jsx)("div",{children:de})]}),Object(g.jsxs)("div",{className:"col-3",children:[Object(g.jsx)("div",{children:"Tax"}),Object(g.jsxs)("select",{name:"tax",style:{minWidth:"100%"},value:le,disabled:!0,onChange:ae("taxOption"),children:[Object(g.jsx)("option",{children:"1"}),Object(g.jsx)("option",{children:"2"})]})]}),Object(g.jsxs)("div",{className:"col-3",children:[Object(g.jsx)("div",{children:"Tax Amount"}),Object(g.jsx)("div",{children:"0"})]}),Object(g.jsxs)("div",{className:"col-3",children:[Object(g.jsx)("div",{children:"Invoice Amount"}),Object(g.jsx)("div",{children:de})]})]})]})]})}),!L&&r&&Object(g.jsx)("div",{className:"container  d-inline-flex flex-row",children:Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)("div",{className:"btn btn-info mx-2 fs-4",onClick:function(){return a(null)},children:"Cancel"}),Y.length>0&&Object(g.jsx)("div",{className:"btn btn-info mx-2 fs-4",disabled:Y.length>0,onClick:he,children:"Save Invoice"}),Object(g.jsx)("div",{className:"btn btn-info mx-2 fs-4",onClick:ie,children:"Add Existing Orders"}),Object(g.jsx)("div",{className:"btn btn-info mx-2 fs-4",children:"Add New Order"})]})}),L&&r&&Q.length>0&&Object(g.jsx)(Yc,{rOrders:Q,onRowSelect:fe}),L&&r&&0===Q.length&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"fs-3 text-center",children:"No Orders from this client"}),Object(g.jsx)("div",{className:"btn btn-info fs-4 text-center",onClick:function(){return a(null)},children:"Back"})]}),W&&Y.length>0&&Object(g.jsx)(Pc,{rOrders:Y,onRowSelect:be,showAction:!0}),!r&&Object(g.jsxs)("div",{className:" text-center  ",children:[Object(g.jsx)("span",{className:"text-danger fs-4",children:Object(g.jsx)("strong",{children:"Select Client to create New Order"})}),Object(g.jsx)(Bn,{onClientSelection:i})]})]})})},Xc=Object(ft.a)({root:{backgroundColor:"blue",color:"green"},toolbar:{backgroundColor:"white"},caption:{color:"black",fontSize:"20px"},selectIcon:{color:"blue",fontSize:"2rem"},select:{color:"blue",fontSize:"2rem"},actions:{color:"blue"}}),Zc=function(e){var t=e.clientOrderList,n=Xc(),r=Object(c.useContext)(R),a=(r.clients,r.setClientSelected,r.onClientSelect,Object(c.useContext)(V).orders,function(e){var t=[];return e.forEach((function(e){return t.push("".concat(e.product," - ").concat(e.units))})),t.join()}),i=[{title:"client",field:"client.name"},{title:"job Total",field:"amount"},{title:"Tax",field:""},{title:"Pay Terms",field:"0"},{title:"Amount",field:"amount"},{title:"Due Date",field:"due",render:function(e){return Object(g.jsx)("div",{children:new Date(e.due).toDateString()})}}],o=function(e){var t=e.orderList;return Object(g.jsxs)("table",{style:{minWidth:"100%"},children:[console.log("ORDER LIST IN DETAIL :",t),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:"Order#"}),Object(g.jsx)("td",{children:"Order Date"}),Object(g.jsx)("td",{children:"Patient"}),Object(g.jsx)("td",{children:"Products"}),Object(g.jsx)("td",{children:"Model#"}),Object(g.jsx)("td",{children:"Shipment#"}),Object(g.jsx)("td",{children:"Shipment Date"}),Object(g.jsx)("td",{children:"Order Amount"})]}),t.length>0&&t.map((function(e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:e.orderNo}),Object(g.jsx)("td",{children:new Date(e.orderDate).toDateString()}),Object(g.jsx)("td",{children:e.patient}),Object(g.jsx)("td",{children:a(e.products)}),Object(g.jsx)("td",{children:e.modelno}),Object(g.jsx)("td",{children:e.shipment}),Object(g.jsx)("td",{children:e.dueDate}),Object(g.jsx)("td",{children:e.orderAmount})]},e._id)}))]})};return Object(g.jsxs)("div",{className:" fs-4",children:[console.log("TABLE RECIEVED : ",t),Object(g.jsx)(W.a,{columns:i,data:t,icons:ge,title:"New Invoices",detailPanel:[{icon:function(){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Orders"}),children:Object(g.jsx)(Kn.a,{sx:{fontSize:40}})})},render:function(e){return Object(g.jsx)("div",{style:{fontSize:15,textAlign:"left",color:"#000",backgroundColor:"#f0f0f0"},children:o(e)})}}],components:{Toolbar:function(e){return Object(g.jsxs)("div",{style:{padding:"10px 0px"},children:[Object(g.jsx)(G.MTableToolbar,Object(h.a)({},e)),Object(g.jsx)("div",{})]})},Pagination:function(e){return Object(g.jsx)(ye.a,{component:"div",colSpan:e.colSpan,count:e.count,rowsPerPage:e.rowsPerPage,page:e.page,onChangePage:e.onChangePage,onChangeRowsPerPage:e.onChangeRowsPerPage,classes:{root:n.root,toolbar:n.toolbar,caption:n.caption,selectIcon:n.selectIcon,select:n.select,actions:n.actions}})}},options:{filtering:!1,pageSize:5,padding:"dense",actionsColumnIndex:-1,pageSizeOptions:[5,10,20,50,100],paginationType:"stepped",exportAllData:!0,exportFileName:"orderdata",columnsButton:!1,rowStyle:function(e,t){return t%2==0?{background:"#f2f2f2"}:null},showTextRowsSelected:!1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontSize:"1.5rem"},style:{fontSize:"1.5rem"}}})]})},Qc=function(e){var t=Object(u.g)(),n=Object(c.useContext)(bt),r=(n.user,n.token,Object(c.useContext)(V)),a=r.orders,i=(r.fetchOrders,Object(c.useState)([])),o=Object(j.a)(i,2),s=o[0],b=o[1],f=Object(c.useContext)(R),h=f.clients,x=(f.clientSelected,f.setClientSelected),O=(f.onClientSelect,Object(c.useState)(!1)),m=Object(j.a)(O,2),p=m[0],v=m[1],y=Object(c.useState)([]),w=Object(j.a)(y,2),N=w[0],S=w[1],C=Object(c.useState)(""),D=Object(j.a)(C,2),k=D[0],T=D[1],P=Object(c.useState)(!1),A=Object(j.a)(P,2),E=A[0],I=A[1],z=Object(c.useState)(null),F=Object(j.a)(z,2),_=F[0],B=F[1],L="",M=function(e){var t=e.toString(),n=t.length;if(n<6)for(var c=0;c<6-n;c++)t="0"+t;return t},U=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce().then((function(e){B(M(e.sequence_val)),L=M(e.sequence_val),console.log("Invoice Number Recieved is : ",L)})).catch((function(e){T("Error in sequence"),I(!0),setTimeout((function(){return I(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){U(),function(){if(a.length>0){var e=a.filter((function(e){return!1===e.isInvoiced}));b(e)}}(),x(null),v(!1)}),[]),Object(g.jsxs)("div",{children:[E&&Object(g.jsx)("div",{className:"fs-4 text-red",children:k}),!p&&Object(g.jsx)(Yc,{rOrders:s,onRowSelect:function(e){console.log("Rows Selected in Generate Invoices :",e);var t=[];e.forEach((function(e){return t.includes(e.clientId)?console.log("skip"):t.push(e.clientId)})),console.log("Unique Clients list :",t);var n=[],c=[];t.forEach((function(t){n=e.filter((function(e){return e.clientId===t}));var r=h.filter((function(e){return e._id===t})),a=0,i=new Date;n.forEach((function(e){return a+=e.orderAmount})),c.push({client:r[0],orderList:n,amount:a,due:i})})),S(c),v(!0)}}),p&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(Zc,{clientOrderList:N}),Object(g.jsxs)("div",{className:"d-flex flex-row my-2",children:[Object(g.jsx)("div",{className:"btn btn-info fs-4 ",onClick:function(){N.length>0&&N.forEach((function(e){var t={invoiceNo:_,invoiceDate:new Date,dueDate:new Date,taxOption:"GST",taxAmount:0,amount:e.amount,paid:0,client:e.client.name,clientId:e.client._id,balance:e.amount,ordersList:e.orderList};console.log("Values For Invoice Id ".concat(_," & values are:"),t)}))},children:"Save Invoice"}),Object(g.jsx)("div",{className:"btn btn-info mx-5 fs-4 ",onClick:function(){return t.goBack()},children:"Cancel"})]})]})]})};var $c=function(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),o=Object(j.a)(i,2),s=o[0],u=o[1],b=Object(c.useState)(!1),f=Object(j.a)(b,2),h=f[0],x=f[1],O=Object(c.useState)(null),m=Object(j.a)(O,2),p=m[0],v=m[1],y=Object(c.useState)(!1),w=Object(j.a)(y,2),N=w[0],S=w[1],C=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve().then((function(e){e.error?(u("Error fetching data"),x(!0),setTimeout((function(){return x(!1)}),2e3)):(a(e),console.log("invoices recieved from DB:",r))})).catch((function(e){u("Error fetching data"),x(!0),setTimeout((function(){return x(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){C()}),[]),Object(g.jsxs)("div",{children:[h&&Object(g.jsx)("div",{className:"text-red",children:Object(g.jsx)("b",{children:s})}),!N&&Object(g.jsx)(Sc,{invoices:r,onInvoiceSelect:function(e){v(e),S(!0)},path:"/accounts/invoices"}),N&&Object(g.jsx)(Ic,{invoice:p,path:"/accounts/invoices"})]})},er=function(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),o=Object(j.a)(i,2),s=o[0],u=o[1],b=Object(c.useState)(!1),f=Object(j.a)(b,2),h=f[0],O=f[1],m=Object(c.useState)(null),p=Object(j.a)(m,2),v=p[0],y=p[1],w=Object(c.useState)(!1),N=Object(j.a)(w,2),S=N[0],C=N[1],D=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/invoices/paid"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e})).then((function(e){e.error?(u("Error fetching data"),O(!0),setTimeout((function(){return O(!1)}),2e3)):(a(e),console.log("invoices recieved from DB:",e))})).catch((function(e){u("Error fetching data"),O(!0),setTimeout((function(){return O(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){D()}),[]),Object(g.jsxs)("div",{children:[h&&Object(g.jsx)("div",{className:"text-red",children:Object(g.jsx)("b",{children:s})}),!S&&Object(g.jsx)(Sc,{invoices:r,onInvoiceSelect:function(e){y(e),C(!0)},path:"/accounts/invoices"}),S&&Object(g.jsx)(Ic,{invoice:v,path:"/accounts/invoices"})]})},tr=function(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),o=Object(j.a)(i,2),s=o[0],u=o[1],b=Object(c.useState)(!1),f=Object(j.a)(b,2),h=f[0],O=f[1],m=Object(c.useState)(null),p=Object(j.a)(m,2),v=p[0],y=p[1],w=Object(c.useState)(!1),N=Object(j.a)(w,2),S=N[0],C=N[1],D=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/invoices/cancelled"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e})).then((function(e){e.error?(u("Error fetching data"),O(!0),setTimeout((function(){return O(!1)}),2e3)):a(e)})).catch((function(e){u("Error fetching data"),O(!0),setTimeout((function(){return O(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){D()}),[]),Object(g.jsxs)("div",{children:[h&&Object(g.jsx)("div",{className:"text-red",children:Object(g.jsx)("b",{children:s})}),!S&&Object(g.jsx)(Sc,{invoices:r,onInvoiceSelect:function(e){y(e),C(!0)},path:"/accounts/invoices"}),S&&Object(g.jsx)(Ic,{invoice:v,path:"/accounts/invoices"})]})},nr=function(e){var t=Object(c.useContext)(R).setClientSelected,n=Object(c.useState)(1),r=Object(j.a)(n,2),a=r[0],i=r[1];return Object(c.useEffect)((function(){t(null)}),[]),Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)(w,{}),Object(g.jsx)(Cc,{}),Object(g.jsx)("div",{className:"container-fluid",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-12 col-md-2",children:Object(g.jsxs)("div",{className:"container-fluid d-flex flex-column  justify-content-end",children:[Object(g.jsx)("div",{className:"btn btn-info text-white fs-4 my-3 ",style:1===a?{backgroundColor:"#0b8df7"}:null,onClick:function(){i(1)},children:"+New Invoice"}),Object(g.jsx)("div",{className:"btn btn-info text-white fs-4 my-3 ",style:2===a?{backgroundColor:"#0b8df7"}:null,onClick:function(){i(2)},children:"Generate Invoices"}),Object(g.jsx)("div",{className:"btn btn-info text-white fs-4 my-3 ",style:3===a?{backgroundColor:"#0b8df7"}:null,onClick:function(){i(3)},children:"Awaiting Payments"}),Object(g.jsx)("div",{className:"btn btn-info text-white fs-4 my-3 ",style:4===a?{backgroundColor:"#0b8df7"}:null,onClick:function(){i(4)},children:"Paid Invoices"}),Object(g.jsx)("div",{className:"btn btn-info text-white fs-4 my-3 ",style:5===a?{backgroundColor:"#0b8df7"}:null,onClick:function(){i(5)},children:"Cancelled Invoices"})]})}),Object(g.jsxs)("div",{className:"col-12 col-md-10",children:[1===a&&Object(g.jsx)(Kc,{}),2===a&&Object(g.jsx)(Qc,{}),3===a&&Object(g.jsx)($c,{}),4===a&&Object(g.jsx)(er,{}),5===a&&Object(g.jsx)(tr,{})]})]})})]})},cr=function(e){var t=e.receipt;return Object(g.jsx)("div",{children:Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Print Receipt"}),children:Object(g.jsx)(gc.a,{sx:{fontSize:30},onClick:function(){!function(e){void 0!==typeof window&&localStorage.setItem("receipt",JSON.stringify(e))}(t)}})})})},rr=Object(ft.a)({root:{backgroundColor:"blue",color:"green"},toolbar:{backgroundColor:"white"},caption:{color:"black",fontSize:"20px"},selectIcon:{color:"blue",fontSize:"2rem"},select:{color:"blue",fontSize:"2rem"},actions:{color:"blue"}}),ar=function(e){var t=e.receipts,n=(e.onReceiptSelect,e.path,rr()),r=Object(c.useContext)(R).setClientSelected,a=Object(c.useState)([]),i=Object(j.a)(a,2),o=(i[0],i[1]),s=Object(c.useContext)(bt),u=s.user,f=s.token,x=Object(c.useContext)(Cn).setReceiptSelected,O=Object(c.useState)(""),m=Object(j.a)(O,2),p=(m[0],m[1]),v=Object(c.useState)(null),y=Object(j.a)(v,2),w=y[0],N=y[1],S=Boolean(w),C=S?"simple-popover":void 0,D=Object(c.useState)({error:"",loading:!1}),k=Object(j.a)(D,2),T=k[0],P=k[1],A=(T.error,T.loading),E=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P({error:"",loading:!0}),e.next=3,Ne(u._id,f).then((function(e){e.error?(P({error:"Error fetching data",loading:!1}),window.alert("Failed to Connect to database ")):(o(e),P({error:"",loading:!1}))})).catch((function(e){P({error:e,loading:!1}),window.alert("Failed to Connect to database ")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){p(e.target.value)},z=function(e){N(e.currentTarget)},F=function(){N(null)},_=[{title:"Receipt#",field:"receiptNo",maxWidth:"7rem",render:function(e){return Object(g.jsx)(b.b,{to:"/payment",style:{textDecoration:"none"},onClick:function(){x(e),r(e.client)},children:e.receiptNo})}},{title:"Receipt Date",field:"paymentDate",maxWidth:"12rem",render:function(e){return Object(g.jsx)("div",{children:ht(e.paymentDate)})}},{title:"Client",field:"client",minWidth:"10rem",render:function(e){return Object(g.jsx)(b.b,{to:"/client/clientprofile",style:{textDecoration:"none"},className:"fs-4",onClick:function(){r(e.client)},children:e.client.name.toUpperCase()})}},{title:"Amount",field:"amount",maxWidth:"10rem",render:function(e){return Object(g.jsxs)("div",{children:[" ",Object(g.jsx)("div",{className:" btn fs-4 text-primary",onClick:z,children:e.amount}),Object(g.jsx)(hn.a,{open:S,id:C,anchorEl:w,onClose:F,anchorOrigin:{verticle:"top",horizontal:"left"},children:(t=e,Object(g.jsx)(Jc,{receiptData:t,onClose:F}))})]});var t}},{title:"Applied",field:"amount",maxWidth:"10rem"},{title:"Actions",field:"",maxWidth:"10px",render:function(e){return Object(g.jsx)(b.b,{target:"_blank",style:{color:"#000"},to:"/print/receipt/".concat(e._id),onClick:function(){return console.log("receipt Data to print",e)},children:Object(g.jsx)(cr,{receipt:e})})}},{title:"",field:"",maxWidth:"10px",render:function(e){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"sms"}),children:Object(g.jsx)(hc.a,{sx:{fontSize:30}})})}},{title:"",field:"",maxWidth:"10px",render:function(e){return Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"WhatsApp"}),children:Object(g.jsx)(Oc.a,{sx:{fontSize:30}})})}},{title:"",field:"",maxWidth:"10px",render:function(e){return Object(g.jsx)(b.b,{to:"/payment",style:{textDecoration:"none",color:"#000"},onClick:function(){x(e),r(e.client)},children:Object(g.jsx)(St.a,{title:Object(g.jsx)("div",{style:{fontSize:"1.4rem",padding:"0.5rem"},children:"Edit"}),children:Object(g.jsx)(Dt.a,{sx:{fontSize:30}})})})}}];return Object(c.useEffect)((function(){E(),r(null),x(null)}),[]),Object(g.jsxs)("div",{className:"container-fluid",children:[A&&Object(g.jsx)("div",{className:"fs-3 text-center text-secondary",children:"Loading..."}),t.length>0&&Object(g.jsx)(W.a,{columns:_,data:t,icons:ge,title:"RECEIPTS",components:{Toolbar:function(e){return Object(g.jsxs)("div",{style:{padding:"10px 0px"},children:[Object(g.jsx)(G.MTableToolbar,Object(h.a)({},e)),Object(g.jsx)("div",{children:Object(g.jsxs)("select",{name:"search",className:"fs-4 px-3 mx-3",onChange:I,children:[Object(g.jsx)("option",{value:"",children:"Last 1 week"}),Object(g.jsx)("option",{value:""}),Object(g.jsx)("option",{value:""}),Object(g.jsx)("option",{value:""}),Object(g.jsx)("option",{value:""}),Object(g.jsx)("option",{value:""})]})})]})},Pagination:function(e){return Object(g.jsx)(ye.a,{component:"div",colSpan:e.colSpan,count:e.count,rowsPerPage:e.rowsPerPage,page:e.page,onChangePage:e.onChangePage,onChangeRowsPerPage:e.onChangeRowsPerPage,classes:{root:n.root,toolbar:n.toolbar,caption:n.caption,selectIcon:n.selectIcon,select:n.select,actions:n.actions}})}},options:{filtering:!0,pageSize:25,padding:"dense",actionsColumnIndex:-1,pageSizeOptions:[10,20,50,100],paginationType:"stepped",exportAllData:!0,exportFileName:"orderdata",columnsButton:!0,rowStyle:function(e,t){return t%2==0?{background:"#f2f2f2"}:null},showTextRowsSelected:!1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontSize:"1.5rem"},style:{fontSize:"1.5rem"},cellStyle:{fontSize:"1.6rem"}}}),0===t.length&&Object(g.jsx)("div",{className:"text-center",children:Object(g.jsx)("div",{className:"fs-3 text-center",children:"No Receipts found "})})]})},ir=function(e){var t=Object(c.useState)(1),n=Object(j.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),o=Object(j.a)(i,2),s=o[0],u=o[1],f=Object(c.useState)([]),h=Object(j.a)(f,2),x=h[0],O=h[1],m=Object(c.useState)([]),p=Object(j.a)(m,2),v=p[0],y=p[1],N=Object(c.useState)({error:"",loading:!1}),S=Object(j.a)(N,2),C=S[0],D=S[1],k=(C.error,C.loading),T=function(){},P=function(){if(v.length>0){var e=v.filter((function(e){return!1===e.cancelled}));O(e)}},A=function(){var e=v.filter((function(e){return!0===e.cancelled}));u(e)};return Object(c.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D({loading:!0}),e.next=3,Ge();case 3:t=e.sent,y(t),P(),A(),D({loading:!1});case 8:case"end":return e.stop()}}),e)})))()}),[v]),Object(g.jsxs)("div",{children:[Object(g.jsx)(w,{}),Object(g.jsx)(Cc,{}),k&&Object(g.jsx)("div",{className:"fs-3 text-center text-secondary",children:"Loading..."}),Object(g.jsx)("div",{className:"container-fluid",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-12 col-md-2",children:Object(g.jsxs)("div",{className:"d-flex  flex-column my-3",children:[Object(g.jsx)(b.b,{className:"btn btn-info fs-4 ",to:"/payment",children:"+New Receipt"}),Object(g.jsx)("div",{className:"btn btn-info fs-4 my-1",style:1===r?{backgroundColor:"#0b8df7"}:null,onClick:function(){return a(1)},children:"Payments"}),Object(g.jsx)("div",{className:"btn btn-info fs-4 my-1",style:2===r?{backgroundColor:"#0b8df7"}:null,onClick:function(){return a(2)},children:"Cancelled Payments"})]})}),Object(g.jsxs)("div",{className:"col-12 col-md-10",children:[1===r&&Object(g.jsx)(ar,{receipts:x,onReceiptSelect:T,path:"/accounts/receipt"}),2===r&&Object(g.jsx)(ar,{receipts:s,onReceiptSelect:T,path:"/accounts/receipt"})]})]})})]})},or=Object(ft.a)({root:{backgroundColor:"blue",color:"green"},toolbar:{backgroundColor:"white"},caption:{color:"black",fontSize:"20px"},selectIcon:{color:"blue",fontSize:"2rem"},select:{color:"blue",fontSize:"2rem"},actions:{color:"blue"}}),sr=function(e){var t=or(),n=Object(c.useContext)(bt),r=n.user,a=n.token,i=Object(c.useState)(null),o=Object(j.a)(i,2),s=o[0],u=o[1],b=Object(c.useState)([]),f=Object(j.a)(b,2),x=f[0],O=f[1],m=Object(c.useState)({error:"",loading:!1}),p=Object(j.a)(m,2),v=p[0],y=p[1],w=(v.error,v.loading),N=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y({error:"",loading:!0}),e.next=3,qe().then((function(e){e.error?y({error:e.error,loading:!1}):(O(e),y({error:"",loading:!1}))})).catch((function(e){y({error:e,loading:!1})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=[{title:"Adj#",field:"adjNo",render:function(e){return Object(g.jsx)("div",{className:"text-primary",style:{cursor:"pointer"},onClick:function(){u(e)},children:e.adjNo})}},{title:"Adj.Date",field:"adjDate",render:function(e){return Object(g.jsx)("div",{children:ht(e.adjDate)})}},{title:"Client",field:"client.name"},{title:"Amount",field:"amount"},{title:"Adjustment Type",field:"adjType"},{title:"Applied To",field:"invoice.invoiceNo",render:function(e){return Object(g.jsxs)("div",{children:["invoice  ",e.invoice.invoiceNo]})}}];return Object(c.useEffect)((function(){N()}),[]),Object(g.jsxs)("div",{className:"container-fluid",children:[w&&Object(g.jsx)("div",{className:"fs-3 text-center text-secondary",children:"Loading..."}),s&&function(){var e=Object(h.a)({},s);return Object(g.jsx)("div",{className:"fs-4",children:Object(g.jsxs)(Qn,{title:"Credit ADjustment ",children:[Object(g.jsxs)("div",{children:["Against Invoice# :",Object(g.jsxs)("b",{children:[" ",e.invoice.invoiceNo]})]}),Object(g.jsxs)("div",{children:["Client :",Object(g.jsx)("b",{children:e.client.name.toUpperCase()})," "]}),Object(g.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:"Amount"}),Object(g.jsx)("input",{value:e.amount})]}),Object(g.jsxs)("div",{className:"mx-4",children:[Object(g.jsx)("div",{children:"Adjustment Date"}),Object(g.jsx)("div",{className:"border border-dark",children:ht(e.adjDate)})]})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:"Reference #"}),Object(g.jsx)("input",{value:e.adjNo})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:"Adjustment Type"}),Object(g.jsx)("div",{children:e.adjType})]}),Object(g.jsx)("div",{children:Object(g.jsxs)("div",{children:["Notes : ",e.notes]})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"btn btn-info fs-4",onClick:function(){window.confirm("This will delete the credit adjustment permenantly , Are you sure?")&&function(e){var t=Object(h.a)({},e.invoice);t.balance=parseInt(t.balance)+parseInt(e.amount),t.adjustmentNo="",t.discount=0,Ue(r._id,a,t).then((function(e){e.error&&window.alert("Could not update the Invoice")})).catch((function(e){window.alert("Could not update the Invoice")})),Ye(r._id,a,e).then((function(e){e.error&&window.alert("Could not delete the Adjustment")})).catch((function(e){window.alert("Could not delete the Adjustment")})),u(null),N()}(e)},children:"Delete Adjustment"}),Object(g.jsx)("div",{className:"btn btn-info mx-4 fs-4",onClick:function(){u(null)},children:"Cancel"})]})]})})}(),x.length>0&&Object(g.jsx)(W.a,{columns:S,data:x,icons:ge,title:"CREDIT ADJUSTMENTS",components:{Pagination:function(e){return Object(g.jsx)(ye.a,{component:"div",colSpan:e.colSpan,count:e.count,rowsPerPage:e.rowsPerPage,page:e.page,onChangePage:e.onChangePage,onChangeRowsPerPage:e.onChangeRowsPerPage,classes:{root:t.root,toolbar:t.toolbar,caption:t.caption,selectIcon:t.selectIcon,select:t.select,actions:t.actions}})}},options:{filtering:!0,pageSize:25,padding:"dense",actionsColumnIndex:-1,pageSizeOptions:[10,20,50,100],paginationType:"stepped",exportAllData:!0,exportFileName:"orderdata",rowStyle:function(e,t){return t%2==0?{background:"#f2f2f2"}:null},showTextRowsSelected:!1,headerStyle:{backgroundColor:"#01579b",color:"#FFF",fontSize:"1.5rem",zIndex:2},style:{fontSize:"1.5rem"},cellStyle:{fontSize:"1.6rem"}}})]})},lr=function(e){var t=e.onAdjustmentCancel,n=Object(c.useContext)(R),r=n.setClientSelected,a=n.clientSelected,i=Object(c.useContext)(bt),o=i.user,s=i.token,u=Object(c.useState)([]),b=Object(j.a)(u,2),x=b[0],O=b[1],m=Object(c.useState)(null),p=Object(j.a)(m,2),v=p[0],y=p[1],w=Object(c.useState)([]),N=Object(j.a)(w,2),S=N[0],C=N[1],D=Object(c.useState)([]),k=Object(j.a)(D,2),T=k[0],P=k[1],A=Object(c.useState)(),E=Object(j.a)(A,2),I=E[0],z=E[1],F=Object(c.useState)(""),_=Object(j.a)(F,2),B=_[0],L=_[1],M=Object(c.useState)(!1),U=Object(j.a)(M,2),V=U[0],G=U[1],W=Object(c.useState)(null),J=Object(j.a)(W,2),H=J[0],q=J[1],Y=Boolean(H),K=Y?"simple-popover":void 0,X=Object(c.useState)({amount:0,adjDate:new Date,adjNo:"",adjType:"Discount",notes:"",client:"",invoice:""}),Z=Object(j.a)(X,2),Q=Z[0],$=Z[1],ee=Object(c.useState)({error:"",loading:!1}),te=Object(j.a)(ee,2),ne=te[0],ce=te[1],re=(ne.error,ne.loading),ae=function(e){return function(t){$(Object(h.a)(Object(h.a)({},Q),{},Object(f.a)({},e,t.target.value))),console.log("".concat(e," : ").concat(t.target.value))}},ie=Q.amount,oe=Q.adjDate,se=Q.adjNo,le=Q.adjType,de=Q.notes,je=function(e){console.log("Invoices Rceived :",T);var t=T.filter((function(t){return t.clientId===e&&t.balance>0&&!1===t.cancelled}));console.log("Invoices for  client:",t),O(t)},ue=function(){q(null)},be=function(e){var t=e.toString(),n=t.length;if(n<6)for(var c=0;c<6-n;c++)t="0"+t;return t},fe=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De().then((function(e){z(be(e.sequence_val))})).catch((function(e){L("Error in sequence"),G(!0),setTimeout((function(){return G(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $({loading:!0}),e.next=3,Ne(o._id,s);case 3:return t=e.sent,e.next=6,Me(o._id);case 6:n=e.sent,C(t),P(n),ce({loading:!1}),fe(),$(Object(h.a)(Object(h.a)({},Q),{},{adjNo:I}));case 12:case"end":return e.stop()}}),e)})))()}),[I]),Object(g.jsxs)("div",{children:[re&&Object(g.jsx)("div",{className:"fs-3 text-center text-secondary",children:"Loading..."}),!a&&Object(g.jsx)("div",{className:"my-5",children:Object(g.jsxs)("select",{className:"fs-4",style:{width:"60%"},onChange:function(e){var t=e.target.value,n=S.filter((function(e){return e._id===t}));console.log("Client Selected id : ",n[0]),je(t),r(n[0])},children:[Object(g.jsx)("option",{className:"mx-3",children:"Selecte Client for Credit Adjustment"}),S.map((function(e){return Object(g.jsx)("option",{className:"mx-3",value:e._id,children:e.name})}))]})}),a&&Object(g.jsx)("h3",{children:Object(g.jsxs)("b",{children:["Client : ",a.name]})}),x.length>0&&Object(g.jsxs)("div",{className:" container  my-5 border border-dark",style:{maxWidth:"fit-content",marginLeft:0},children:[Object(g.jsxs)("div",{children:[v&&Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-4",children:"Invoice#"}),Object(g.jsx)("div",{className:"fs-4",children:v.invoiceNo})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-4",children:"Total Amount"}),Object(g.jsx)("div",{className:"fs-4",children:v.amount})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-4",children:"Other Adjs"}),Object(g.jsx)("div",{className:"fs-4",children:v.paid})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-4",children:"Balance#"}),Object(g.jsx)("div",{className:"fs-4",children:v.balance})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"fs-4",children:"Date"}),Object(g.jsx)("div",{className:"fs-4",children:v.invoiceDate})]})]}),a&&x.length>0&&Object(g.jsxs)(g.Fragment,{children:[" ",Object(g.jsx)("div",{className:"btn btn-info fs-4 mx-2",onClick:function(e){q(e.currentTarget)},children:v?"Change Invoice":"+Select"}),Object(g.jsx)(hn.a,{open:Y,id:K,anchorEl:H,onClose:ue,anchorOrigin:{verticle:"top",horizontal:"left"},children:Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"w-100 fs-4 border border-dark rounded ",children:[Object(g.jsxs)("div",{className:"bg-info d-flex justify-content-between align-items-center p-3",children:[Object(g.jsx)("div",{children:Object(g.jsx)("b",{children:"Payment Applied"})}),Object(g.jsx)("div",{className:"btn fs-3",onClick:function(){return ue()},children:Object(g.jsx)("b",{children:"X"})})]}),x.length>0&&Object(g.jsx)("div",{className:"w-100",children:Object(g.jsxs)("table",{className:"table",children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{className:"th"}),Object(g.jsx)("th",{className:"th",children:"Invoice#"}),Object(g.jsx)("th",{className:"th",children:"Invoice Date"}),Object(g.jsx)("th",{className:"th",children:"Invoice Amount"}),Object(g.jsx)("th",{className:"th",children:"Paid"})]}),x.map((function(e,t){return Object(g.jsxs)("tr",{style:{cursor:"pointer"},onClick:function(){y(e),ue()},children:[Object(g.jsx)("td",{className:"td",children:t+1}),Object(g.jsx)("td",{className:"td",children:e.invoiceNo}),Object(g.jsx)("td",{className:"td",children:new Date(e.invoiceDate).toDateString()}),Object(g.jsx)("td",{className:"td",children:e.amount}),Object(g.jsx)("td",{className:"td",children:e.paid})]})}))]})})]})})})]})]}),Object(g.jsxs)("div",{className:"container my-5 border border-dark",style:{width:"fit-content",marginLeft:0},children:[Object(g.jsx)("h2",{children:Object(g.jsx)("b",{children:"Apply Credit Adjustment to Invoice"})}),V&&Object(g.jsx)("div",{className:"fs-4 text-red",children:B}),Object(g.jsxs)("div",{className:"d-flex flex-column flex-md-row   fs-4 ",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:"Amount"}),Object(g.jsx)("input",{type:"number",value:ie,onChange:ae("amount")})]}),Object(g.jsxs)("div",{className:"mx-4",children:[Object(g.jsx)("div",{children:"Adjustment Date"}),Object(g.jsx)("input",{type:"date",value:oe,onChange:ae("adjDate")})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:"Reference#"}),Object(g.jsx)("input",{type:"text",value:se})]})]}),Object(g.jsxs)("div",{className:"fs-4",children:[Object(g.jsx)("div",{children:"Adjustment Type"}),Object(g.jsxs)("select",{type:"text",value:le,onChange:ae("adjType"),children:[Object(g.jsx)("option",{value:"Discount",children:"Discount"}),Object(g.jsx)("option",{value:"Early Payment Discount",children:"Early Payment Discount"}),Object(g.jsx)("option",{value:"Sales Return",children:"Sales Return"}),Object(g.jsx)("option",{value:"Write Off",children:"Write Off"})]})]}),Object(g.jsxs)("div",{className:"fs-4",children:[Object(g.jsx)("div",{children:"Notes"}),Object(g.jsx)("input",{type:"text",value:de,onChange:ae("notes")})]}),Object(g.jsx)("hr",{}),Object(g.jsxs)("div",{className:"d-flex flex-row justify-content-end my-2",children:[ie>0&&v&&Object(g.jsx)("div",{className:"btn btn-info  fs-4 mx-5",onClick:function(){var e=Object(h.a)(Object(h.a)({},Q),{},{adjNo:I,invoice:v._id,client:a._id});console.log("New Values Adjustment to save ",e),He(o._id,s,e).then((function(e){e.error&&window.alert("Error Saving new Adjustment")})).catch((function(e){window.alert("Error Saving new Adjustment")})),function(){var e=parseInt(v.balance)-parseInt(ie),t=Object(h.a)(Object(h.a)({},v),{},{adjustmentNo:I,balance:e,discount:ie});console.log("Invoice values after update :",t),Ue(o._id,s,t).then((function(e){e.error&&window.alert("Error while saving Invoice Data")})).catch((function(e){window.alert("Error while saving Invoice Data")}))}(),function(){var e=Object(h.a)({},a);e.balance-=ie,console.log("Client Values after update : ",e),Se(o._id,s,e).then((function(e){e.error&&window.alert("error while saving Client data")})).catch((function(e){window.alert("error while saving Client data")}))}(),r(null),t()},children:"Save Adjustment"}),Object(g.jsx)("div",{className:"btn btn-info fs-4 ",onClick:t,children:"Cancel"})]})]})]}),0===x.length&&a&&Object(g.jsxs)("div",{className:"fs-4",children:["No Invoices for this client",Object(g.jsx)("span",{className:"btn btn-info fs-4 mx-5",onClick:t,children:"Back"})]})]})},dr=function(e){var t=Object(c.useContext)(R).setClientSelected,n=Object(c.useState)(0),r=Object(j.a)(n,2),a=r[0],i=r[1];return Object(c.useEffect)((function(){t(null)}),[]),Object(g.jsxs)("div",{children:[Object(g.jsx)(w,{}),Object(g.jsx)(Cc,{}),Object(g.jsx)("div",{className:"container",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-12 col-md-2",children:Object(g.jsxs)("div",{className:"d-flex flex-column",children:[Object(g.jsx)("div",{className:"btn btn-info fs-4 my-2",style:1===a?{backgroundColor:"#0b8df7"}:null,onClick:function(){return i(1)},children:"+New Adjustment"}),Object(g.jsx)("div",{className:"btn btn-info fs-4 my-2",style:2===a?{backgroundColor:"#0b8df7"}:null,onClick:function(){return i(2)},children:"Debit Adjustment"})]})}),Object(g.jsxs)("div",{className:"col-12 col-md-10",children:[0===a&&Object(g.jsx)(sr,{}),1===a&&Object(g.jsx)(lr,{onAdjustmentCancel:function(){i(0),t(null)}})]})]})})]})},jr=Ut.StyleSheet.create({container:{height:150,flexDirection:"row",maxHeight:"120px",fontWeight:"light",fontSize:12,margin:"10 2",justifyContent:"space-between"},leftSection:{width:"70%",flexDirection:"row",justifyContent:"flex-start",overflow:"wrap"},rigthSection:{width:"30%",justifyContent:"flex-start",textAlign:"right",fontSize:14,paddingTop:10},imageContainer:{width:"10%"},image:{height:"60%"},title:{paddingTop:5,fontSize:20,fontWeigth:900},textStyle:{fontSize:14,paddingRight:100,fontWeight:300}}),ur=function(e){var t=e.client,n="",c="",r="",a="",i="";return 1===t.company?(n="Evoq Digital Dental Solutions",c="804,Venus Atlantis Corporate Park, 100Ft. Rd, Nr. Shell Petrol Pump, Prahaladnagar Ahmedabad-380054",r="evoqdds@gmail.com",a="079-48910770",i="evoqdds.com"):2===t.company?(n="Evoq Digital Dental Solutions2",c="804,Venus Atlantis Corporate Park, 100Ft. Rd, Nr. Shell Petrol Pump, Prahaladnagar Ahmedabad-380054",r="evoqdds@gmail.com2",a="079-48910770",i="evoqdds.com2"):3===t.company?(n="Evoq Digital Dental Solutions3",c="804,Venus Atlantis Corporate Park, 100Ft. Rd, Nr. Shell Petrol Pump, Prahaladnagar Ahmedabad-380054",r="evoqdds@gmail.com3",a="079-48910770",i="evoqdds.com3"):(n="Evoq Digital Dental Solutions",c="804,Venus Atlantis Corporate Park, 100Ft. Rd, Nr. Shell Petrol Pump, Prahaladnagar Ahmedabad-380054",r="evoqdds@gmail.com",a="079-48910770",i="evoqdds.com"),Object(g.jsxs)(Ut.View,{style:jr.container,children:[Object(g.jsxs)(Ut.View,{style:jr.leftSection,children:[Object(g.jsx)(Ut.Image,{style:jr.image,src:Mt}),Object(g.jsxs)(Ut.View,{style:{paddingLeft:10},children:[Object(g.jsx)(Ut.Text,{style:jr.title,children:n}),Object(g.jsx)(Ut.Text,{style:jr.textStyle,children:c})]})]}),Object(g.jsxs)(Ut.View,{style:jr.rigthSection,children:[Object(g.jsxs)(Ut.Text,{children:["Phone :  (O)",a]}),Object(g.jsxs)(Ut.Text,{children:["email : ",r]}),Object(g.jsxs)(Ut.Text,{children:["web : ",i]})]})]})},br=Ut.StyleSheet.create({body:{fontSize:12,fontWeight:"medium"},date:{flexDirection:"row",justifyContent:"space-between",marginVertical:10},bold:{fontSize:14,fontWeight:900},amnt:{fontSize:15,fontWeight:1e3,padding:5}}),fr=function(e){var t=e.receipt,n="".concat(t.client.salutation," ").concat(t.client.name),c=new $t.ToWords({localeCode:"en-IN",converterOptions:{currency:!1,ignoreDecimal:!1,ignoreZeroCurrency:!1,doNotAddOnly:!1}}).convert(t.amount),r=ht(new Date);return Object(g.jsxs)(Ut.View,{style:br.body,children:[Object(g.jsx)(Ut.Text,{style:[br.bold,{marginVertical:10}],children:n}),Object(g.jsxs)(Ut.View,{style:br.date,children:[Object(g.jsxs)(Ut.View,{style:{flexDirection:"row"},children:[Object(g.jsx)(Ut.Text,{style:br.bold,children:"Date "}),Object(g.jsx)(Ut.Text,{children:r})]}),Object(g.jsxs)(Ut.Text,{style:br.bold,children:["Doc #.",t.receiptNo]})]}),Object(g.jsx)(Ut.View,{children:Object(g.jsxs)(Ut.Text,{children:["Received with thanks from  ",n," a sum of ",c," by ",t.paymentMode," ","towards professional charges.   "]})}),Object(g.jsx)(Ut.View,{style:{border:"1px solid #000",maxWidth:150,marginVertical:10},children:Object(g.jsxs)(Ut.Text,{style:br.amnt,children:["Rs.",t.amount]})})]})},hr=Ut.StyleSheet.create({page:{flexDirection:"row",backgroundColor:"#fff",color:"#000"},section:{margin:7,padding:10,flexGrow:1},heading1:{textAlign:"center",fontSize:"14px",fontWeight:"heavy"},fontStyle:{font:"Times New Roman",fontWeight:"bold"},image:{width:"10%"}}),xr=function(e){var t=e.receipt;return Object(g.jsx)(Ut.Document,{children:Object(g.jsx)(Ut.Page,{size:"A4",style:hr.Page,children:Object(g.jsxs)(Ut.View,{style:hr.section,children:[Object(g.jsx)(ur,{client:t.client}),Object(g.jsx)(Ut.Text,{style:hr.heading1,children:"Receipt"}),Object(g.jsx)(fr,{receipt:t})]})})})},Or=Ut.StyleSheet.create({page:{flexDirection:"row",backgroundColor:"#E4E4E4",width:"100%",height:"100vh"},section:{margin:10,padding:10,flexGrow:1}}),mr=function(e){var t=Object(c.useState)(null),n=Object(j.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){var e=function(){if(void 0!==typeof window)return JSON.parse(localStorage.getItem("receipt"))}();e&&a(e)}),[]),Object(g.jsx)(Ut.PDFViewer,{style:Or.page,children:r&&Object(g.jsx)(xr,{receipt:r})})},pr=function(e){Object(u.g)();var t=Object(c.useState)({npswd:"",cpswd:""}),n=Object(j.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(!1),o=Object(j.a)(i,2),s=(o[0],o[1],Object(c.useState)("")),l=Object(j.a)(s,2),d=(l[0],l[1],r.npswd),b=r.cpswd,x=function(e){return function(t){var n=t.target.value;a(Object(h.a)(Object(h.a)({},r),{},Object(f.a)({},e,n.trim()))),console.log("".concat(e," : ").concat(n))}};Object(c.useEffect)((function(){}),[]);var O=function(t){var n=e.match.params,c=n.id,a=n.token;t.preventDefault(),(d.length>0||b.length>0?0===d.localeCompare(b)||(window.alert("Both the password should match"),0):0===d.length?(window.alert("Please enter password"),0):0===b.length?(window.alert("Please confirm password"),0):void 0)&&m(c,a,r).then((function(e){400===e?window.alert("Invalid Link"):200===e&&window.alert("Password Updated successfully please Login");var t=window.parent.origin;window.location.replace(t)})).catch((function(e){console.log("Error in reser Password",e)}))};return Object(c.useEffect)((function(){}),[]),Object(g.jsx)("div",{children:Object(g.jsx)("form",{children:Object(g.jsxs)("div",{className:"container-signin",children:[Object(g.jsx)("div",{className:"fs-4 fw-bold text-dark text-center",children:"Create New Password"}),Object(g.jsxs)("div",{className:"fs-4 ",children:[Object(g.jsx)("div",{className:"text-dark",children:"New Password"}),Object(g.jsx)("input",{className:"w-100",type:"password",onChange:x("npswd")})]}),Object(g.jsxs)("div",{className:"fs-4 w-100",children:[Object(g.jsx)("div",{className:"text-dark",children:"Confirm Password"}),Object(g.jsx)("input",{className:"w-100",type:"password",onChange:x("cpswd")})]}),Object(g.jsx)("input",{type:"submit",className:"btn btn-info fs-4 w-100 my-2",onClick:function(e){return O(e)}})]})})})};var vr=function(){var e=O(),t=e.user,n=e.token,r=Object(c.useState)([]),a=Object(j.a)(r,2),i=a[0],o=a[1],s=Object(c.useState)([]),f=Object(j.a)(s,2),h=f[0],x=f[1],m=Object(c.useState)([]),p=Object(j.a)(m,2),v=p[0],y=p[1],w=Object(c.useState)([]),N=Object(j.a)(w,2),S=N[0],C=N[1],k=Object(c.useState)([]),T=Object(j.a)(k,2),P=T[0],A=T[1],I=Object(c.useState)([]),F=Object(j.a)(I,2),B=F[0],L=(F[1],Object(c.useState)([])),U=Object(j.a)(L,2),G=U[0],W=(U[1],Object(c.useState)(!1)),J=Object(j.a)(W,2),H=J[0],q=J[1],Y=Object(c.useState)("1"),K=Object(j.a)(Y,2),X=K[0],Z=K[1],Q=Object(c.useState)(null),$=Object(j.a)(Q,2),ee=$[0],te=$[1],ne=Object(c.useState)(null),ce=Object(j.a)(ne,2),re=ce[0],ae=ce[1],ie=Object(c.useState)(null),oe=Object(j.a)(ie,2),se=oe[0],le=oe[1],de=Object(c.useState)(null),je=Object(j.a)(de,2),ue=je[0],be=je[1],fe=Object(c.useState)(null),he=Object(j.a)(fe,2),xe=he[0],Oe=he[1],me=Object(c.useState)(""),pe=Object(j.a)(me,2),ve=pe[0],ge=pe[1],ye=Object(c.useState)(!1),we=Object(j.a)(ye,2),Se=we[0],Ce=we[1],De=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(t._id,n).then((function(e){e.error?(ge("Error fetching data"),Ce(!0),setTimeout((function(){return Ce(!1)}),2e3),window.alert("Failed to Connect to database ")):o(e)})).catch((function(e){ge("Error fetching data"),Ce(!0),setTimeout((function(){return Ce(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(t._id,n).then((function(e){e.error?(ge("Error fetching data"),Ce(!0),setTimeout((function(){return Ce(!1)}),2e3)):x(e)})).catch((function(e){ge("Error fetching data"),Ce(!0),setTimeout((function(){return Ce(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(t._id,n).then((function(e){e.error?(ge("Error fetching data"),Ce(!0),setTimeout((function(){return Ce(!1)}),2e3)):y(e)})).catch((function(e){ge("Error fetching data"),Ce(!0),setTimeout((function(){return Ce(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me().then((function(e){e.error?(ge("Error fetching data"),Ce(!0),setTimeout((function(){return Ce(!1)}),2e3)):C(e)})).catch((function(e){ge("Error fetching data"),Ce(!0),setTimeout((function(){return Ce(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge().then((function(e){e.error?(ge("Error fetching data"),Ce(!0),setTimeout((function(){return Ce(!1)}),2e3)):A(e)})).catch((function(e){ge("Error fetching data"),Ce(!0),setTimeout((function(){return Ce(!1)}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){}),[]),Object(c.useEffect)((function(){Ie()}),[H]);var Ie=function(){if(H){if(ee)return Object(g.jsx)(u.a,{to:ee});q(!1)}};return Object(g.jsxs)("div",{children:[Se&&Object(g.jsx)("div",{className:"text-red fs-3",children:ve}),Object(g.jsx)(b.a,{basename:"/labease",children:Object(g.jsxs)(u.d,{children:[Object(g.jsx)(u.b,{path:"/signup",exact:!0,component:E}),Object(g.jsx)(u.b,{path:"/signin",exact:!0,component:D}),Object(g.jsx)(u.b,{path:"/reset-pswd",exact:!0,component:vn}),Object(g.jsx)(u.b,{path:"/reset-pswd/:id/:token",exact:!0,component:pr}),Object(g.jsx)(Hn.Provider,{value:B,children:Object(g.jsx)(bt.Provider,{value:{user:t,token:n},children:Object(g.jsx)(R.Provider,{value:{clients:i,fetchClients:De,setClients:o,onClientSelect:function(e){ae(e),q(!0)},clientSelected:re,redirect:H,setRedirect:q,setClientSelected:ae,setPathRedirect:te},children:Object(g.jsx)(V.Provider,{value:{orders:h,fetchOrders:ke,onOrderSelect:function(e){le(e),q(!0)},setOrderSelected:le,orderSelected:se},children:Object(g.jsx)(yn.Provider,{value:{products:v,fetchProducts:Te},children:Object(g.jsx)(z.Provider,{value:{currentCompany:X,setCurrentCompany:Z},children:Object(g.jsx)(Nn.Provider,{value:{invoices:S,invoiceSelected:ue,setInvoiceSelected:be,fetchInvoices:Ae,setPathRedirect:te,setRedirect:q},children:Object(g.jsx)(Cn.Provider,{value:{receipts:P,receiptSelected:xe,setReceiptSelected:Oe,fetchReceipts:Ee},children:Object(g.jsxs)(pc.Provider,{value:{adjustments:G},children:[Ie(),Object(g.jsx)(M,{path:"/",exact:!0,component:_}),Object(g.jsx)(M,{path:"/client",exact:!0,component:zt}),Object(g.jsx)(M,{path:"/client/newclient",exact:!0,component:nc}),Object(g.jsx)(M,{path:"/client/orders",exact:!0,component:Rc}),Object(g.jsx)(M,{path:"/client/clientprofile",exact:!0,component:Uc}),Object(g.jsx)(M,{path:"/order",exact:!0,component:yt}),Object(g.jsx)(M,{path:"/ordertable",exact:!0,component:pt}),Object(g.jsx)(M,{path:"/order/neworder",exact:!0,component:Wn}),Object(g.jsx)(M,{path:"/products",exact:!0,component:dc}),Object(g.jsx)(M,{path:"/products/newproduct",exact:!0,component:ic}),Object(g.jsx)(M,{path:"/payment",exact:!0,component:Hc}),Object(g.jsx)(M,{path:"/shipment",exact:!0,component:jc}),Object(g.jsx)(M,{path:"/accounts",exact:!0,component:zc}),Object(g.jsx)(M,{path:"/accounts/invoices",exact:!0,component:nr}),Object(g.jsx)(M,{path:"/accounts/collections",exact:!0,component:zc}),Object(g.jsx)(M,{path:"/accounts/adjustments",exact:!0,component:dr}),Object(g.jsx)(M,{path:"/accounts/manage",exact:!0,component:zc}),Object(g.jsx)(M,{path:"/accounts/receipt",exact:!0,component:ir}),Object(g.jsx)(M,{path:"/settings",exact:!0,component:pn}),Object(g.jsx)(M,{path:"/print/invoice/:id",exact:!0,component:jn}),Object(g.jsx)(M,{path:"/print/receipt/:id",exact:!0,component:mr})]})})})})})})})})})]})})]})};n(1313),n(1314);i.a.render(Object(g.jsx)(vr,{}),document.getElementById("root")),o()},415:function(e,t,n){},451:function(e,t,n){},569:function(e,t,n){},599:function(e,t,n){},701:function(e,t,n){},772:function(e,t,n){},935:function(e,t,n){},938:function(e,t){},940:function(e,t){},967:function(e,t){},968:function(e,t){}},[[1315,4,5]]]);
//# sourceMappingURL=main.4fe6d938.chunk.js.map